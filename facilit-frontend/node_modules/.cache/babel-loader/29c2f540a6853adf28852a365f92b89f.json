{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                          * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                          * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                          * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                          * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                          * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                          * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                          * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                          *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                          * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                          * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                          * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                          * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                          * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                          * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                          */\n/* eslint camelcase: 0 */\nimport { t } from '@superset-ui/translation';\nimport { now } from '../modules/dates';\nimport * as actions from './chartAction';\n\nexport const chart = {\n  id: 0,\n  chartAlert: null,\n  chartStatus: 'loading',\n  chartStackTrace: null,\n  chartUpdateEndTime: null,\n  chartUpdateStartTime: 0,\n  latestQueryFormData: {},\n  queryController: null,\n  queryResponse: null,\n  triggerQuery: true,\n  lastRendered: 0 };\n\n\nexport default function chartReducer(charts = {}, action) {\n  const actionHandlers = {\n    [actions.ADD_CHART]() {\n      return _Object$assign({},\n      chart, {},\n      action.chart);\n\n    },\n    [actions.CHART_UPDATE_SUCCEEDED](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'success',\n        queryResponse: action.queryResponse,\n        chartAlert: null,\n        chartUpdateEndTime: now() });\n\n    },\n    [actions.CHART_UPDATE_STARTED](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'loading',\n        chartStackTrace: null,\n        chartAlert: null,\n        chartUpdateEndTime: null,\n        chartUpdateStartTime: now(),\n        queryController: action.queryController });\n\n    },\n    [actions.CHART_UPDATE_STOPPED](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'stopped',\n        chartAlert: t('Updating chart was stopped'),\n        chartUpdateEndTime: now() });\n\n    },\n    [actions.CHART_RENDERING_SUCCEEDED](state) {\n      return _Object$assign({}, state, { chartStatus: 'rendered', chartUpdateEndTime: now() });\n    },\n    [actions.CHART_RENDERING_FAILED](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'failed',\n        chartStackTrace: action.stackTrace,\n        chartAlert: t(\n        'An error occurred while rendering the visualization: %s',\n        action.error) });\n\n\n    },\n    [actions.CHART_UPDATE_TIMEOUT](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'failed',\n        chartAlert:\n        t('Query timeout') + \" - \" +\n        t(\"visualization queries are set to timeout at \" +\n        action.timeout + \" seconds. \") +\n\n        t(\n        'Perhaps your data has grown, your database is under unusual load, ' +\n        'or you are simply querying a data source that is too large ' +\n        'to be processed within the timeout range. ' +\n        'If that is the case, we recommend that you summarize your data further.'),\n\n        chartUpdateEndTime: now() });\n\n    },\n    [actions.CHART_UPDATE_FAILED](state) {\n      return _Object$assign({},\n      state, {\n        chartStatus: 'failed',\n        chartAlert: action.queryResponse ?\n        action.queryResponse.error :\n        t('Network error.'),\n        chartUpdateEndTime: now(),\n        queryResponse: action.queryResponse,\n        chartStackTrace: action.queryResponse ?\n        action.queryResponse.stacktrace :\n        null });\n\n    },\n    [actions.TRIGGER_QUERY](state) {\n      return _Object$assign({},\n      state, {\n        triggerQuery: action.value,\n        chartStatus: 'loading' });\n\n    },\n    [actions.RENDER_TRIGGERED](state) {\n      return _Object$assign({}, state, { lastRendered: action.value });\n    },\n    [actions.UPDATE_QUERY_FORM_DATA](state) {\n      return _Object$assign({}, state, { latestQueryFormData: action.value });\n    },\n    [actions.ANNOTATION_QUERY_STARTED](state) {\n      if (\n      state.annotationQuery &&\n      state.annotationQuery[action.annotation.name])\n      {\n        state.annotationQuery[action.annotation.name].abort();\n      }\n      const annotationQuery = _Object$assign({},\n      state.annotationQuery, {\n        [action.annotation.name]: action.queryRequest });\n\n      return _Object$assign({},\n      state, {\n        annotationQuery });\n\n    },\n    [actions.ANNOTATION_QUERY_SUCCESS](state) {\n      const annotationData = _Object$assign({},\n      state.annotationData, {\n        [action.annotation.name]: action.queryResponse.data });\n\n      const annotationError = _Object$assign({}, state.annotationError);\n      delete annotationError[action.annotation.name];\n      const annotationQuery = _Object$assign({}, state.annotationQuery);\n      delete annotationQuery[action.annotation.name];\n      return _Object$assign({},\n      state, {\n        annotationData,\n        annotationError,\n        annotationQuery });\n\n    },\n    [actions.ANNOTATION_QUERY_FAILED](state) {\n      const annotationData = _Object$assign({}, state.annotationData);\n      delete annotationData[action.annotation.name];\n      const annotationError = _Object$assign({},\n      state.annotationError, {\n        [action.annotation.name]: action.queryResponse ?\n        action.queryResponse.error :\n        t('Network error.') });\n\n      const annotationQuery = _Object$assign({}, state.annotationQuery);\n      delete annotationQuery[action.annotation.name];\n      return _Object$assign({},\n      state, {\n        annotationData,\n        annotationError,\n        annotationQuery });\n\n    } };\n\n\n  /* eslint-disable no-param-reassign */\n  if (action.type === actions.REMOVE_CHART) {\n    delete charts[action.key];\n    return charts;\n  } else if (action.type === actions.UPDATE_CHART_ID) {\n    const { newId, key } = action;\n    charts[newId] = _Object$assign({},\n    charts[key], {\n      id: newId });\n\n    delete charts[key];\n    return charts;\n  }\n\n  if (action.type in actionHandlers) {\n    return _Object$assign({},\n    charts, {\n      [action.key]: actionHandlers[action.type](charts[action.key]) });\n\n  }\n\n  return charts;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(chart, \"chart\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/chart/chartReducer.js\");reactHotLoader.register(chartReducer, \"chartReducer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/chart/chartReducer.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/chart/chartReducer.js"],"names":["t","now","actions","chart","id","chartAlert","chartStatus","chartStackTrace","chartUpdateEndTime","chartUpdateStartTime","latestQueryFormData","queryController","queryResponse","triggerQuery","lastRendered","chartReducer","charts","action","actionHandlers","ADD_CHART","CHART_UPDATE_SUCCEEDED","state","CHART_UPDATE_STARTED","CHART_UPDATE_STOPPED","CHART_RENDERING_SUCCEEDED","CHART_RENDERING_FAILED","stackTrace","error","CHART_UPDATE_TIMEOUT","timeout","CHART_UPDATE_FAILED","stacktrace","TRIGGER_QUERY","value","RENDER_TRIGGERED","UPDATE_QUERY_FORM_DATA","ANNOTATION_QUERY_STARTED","annotationQuery","annotation","name","abort","queryRequest","ANNOTATION_QUERY_SUCCESS","annotationData","data","annotationError","ANNOTATION_QUERY_FAILED","type","REMOVE_CHART","key","UPDATE_CHART_ID","newId"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { t } from '@superset-ui/translation';\nimport { now } from '../modules/dates';\nimport * as actions from './chartAction';\n\nexport const chart = {\n  id: 0,\n  chartAlert: null,\n  chartStatus: 'loading',\n  chartStackTrace: null,\n  chartUpdateEndTime: null,\n  chartUpdateStartTime: 0,\n  latestQueryFormData: {},\n  queryController: null,\n  queryResponse: null,\n  triggerQuery: true,\n  lastRendered: 0,\n};\n\nexport default function chartReducer(charts = {}, action) {\n  const actionHandlers = {\n    [actions.ADD_CHART]() {\n      return {\n        ...chart,\n        ...action.chart,\n      };\n    },\n    [actions.CHART_UPDATE_SUCCEEDED](state) {\n      return {\n        ...state,\n        chartStatus: 'success',\n        queryResponse: action.queryResponse,\n        chartAlert: null,\n        chartUpdateEndTime: now(),\n      };\n    },\n    [actions.CHART_UPDATE_STARTED](state) {\n      return {\n        ...state,\n        chartStatus: 'loading',\n        chartStackTrace: null,\n        chartAlert: null,\n        chartUpdateEndTime: null,\n        chartUpdateStartTime: now(),\n        queryController: action.queryController,\n      };\n    },\n    [actions.CHART_UPDATE_STOPPED](state) {\n      return {\n        ...state,\n        chartStatus: 'stopped',\n        chartAlert: t('Updating chart was stopped'),\n        chartUpdateEndTime: now(),\n      };\n    },\n    [actions.CHART_RENDERING_SUCCEEDED](state) {\n      return { ...state, chartStatus: 'rendered', chartUpdateEndTime: now() };\n    },\n    [actions.CHART_RENDERING_FAILED](state) {\n      return {\n        ...state,\n        chartStatus: 'failed',\n        chartStackTrace: action.stackTrace,\n        chartAlert: t(\n          'An error occurred while rendering the visualization: %s',\n          action.error,\n        ),\n      };\n    },\n    [actions.CHART_UPDATE_TIMEOUT](state) {\n      return {\n        ...state,\n        chartStatus: 'failed',\n        chartAlert:\n          `${t('Query timeout')} - ` +\n          t(\n            `visualization queries are set to timeout at ${action.timeout} seconds. `,\n          ) +\n          t(\n            'Perhaps your data has grown, your database is under unusual load, ' +\n              'or you are simply querying a data source that is too large ' +\n              'to be processed within the timeout range. ' +\n              'If that is the case, we recommend that you summarize your data further.',\n          ),\n        chartUpdateEndTime: now(),\n      };\n    },\n    [actions.CHART_UPDATE_FAILED](state) {\n      return {\n        ...state,\n        chartStatus: 'failed',\n        chartAlert: action.queryResponse\n          ? action.queryResponse.error\n          : t('Network error.'),\n        chartUpdateEndTime: now(),\n        queryResponse: action.queryResponse,\n        chartStackTrace: action.queryResponse\n          ? action.queryResponse.stacktrace\n          : null,\n      };\n    },\n    [actions.TRIGGER_QUERY](state) {\n      return {\n        ...state,\n        triggerQuery: action.value,\n        chartStatus: 'loading',\n      };\n    },\n    [actions.RENDER_TRIGGERED](state) {\n      return { ...state, lastRendered: action.value };\n    },\n    [actions.UPDATE_QUERY_FORM_DATA](state) {\n      return { ...state, latestQueryFormData: action.value };\n    },\n    [actions.ANNOTATION_QUERY_STARTED](state) {\n      if (\n        state.annotationQuery &&\n        state.annotationQuery[action.annotation.name]\n      ) {\n        state.annotationQuery[action.annotation.name].abort();\n      }\n      const annotationQuery = {\n        ...state.annotationQuery,\n        [action.annotation.name]: action.queryRequest,\n      };\n      return {\n        ...state,\n        annotationQuery,\n      };\n    },\n    [actions.ANNOTATION_QUERY_SUCCESS](state) {\n      const annotationData = {\n        ...state.annotationData,\n        [action.annotation.name]: action.queryResponse.data,\n      };\n      const annotationError = { ...state.annotationError };\n      delete annotationError[action.annotation.name];\n      const annotationQuery = { ...state.annotationQuery };\n      delete annotationQuery[action.annotation.name];\n      return {\n        ...state,\n        annotationData,\n        annotationError,\n        annotationQuery,\n      };\n    },\n    [actions.ANNOTATION_QUERY_FAILED](state) {\n      const annotationData = { ...state.annotationData };\n      delete annotationData[action.annotation.name];\n      const annotationError = {\n        ...state.annotationError,\n        [action.annotation.name]: action.queryResponse\n          ? action.queryResponse.error\n          : t('Network error.'),\n      };\n      const annotationQuery = { ...state.annotationQuery };\n      delete annotationQuery[action.annotation.name];\n      return {\n        ...state,\n        annotationData,\n        annotationError,\n        annotationQuery,\n      };\n    },\n  };\n\n  /* eslint-disable no-param-reassign */\n  if (action.type === actions.REMOVE_CHART) {\n    delete charts[action.key];\n    return charts;\n  } else if (action.type === actions.UPDATE_CHART_ID) {\n    const { newId, key } = action;\n    charts[newId] = {\n      ...charts[key],\n      id: newId,\n    };\n    delete charts[key];\n    return charts;\n  }\n\n  if (action.type in actionHandlers) {\n    return {\n      ...charts,\n      [action.key]: actionHandlers[action.type](charts[action.key]),\n    };\n  }\n\n  return charts;\n}\n"]},"metadata":{},"sourceType":"module"}