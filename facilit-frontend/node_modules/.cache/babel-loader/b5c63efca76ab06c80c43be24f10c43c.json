{"ast":null,"code":"import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Dialog from 'react-bootstrap-dialog';\nimport { t } from '@superset-ui/translation';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\n\nimport { exportChart } from '../../explore/exploreUtils';\nimport * as actions from '../actions/sqlLab';\nimport Button from '../../components/Button';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  table: PropTypes.string.isRequired,\n  schema: PropTypes.string,\n  dbId: PropTypes.number.isRequired,\n  errorMessage: PropTypes.string,\n  templateParams: PropTypes.string };\n\n\nconst defaultProps = {\n  vizRequest: {} };\n\n\nclass ExploreCtasResultsButton extends React.PureComponent {\n  constructor(props) {var _context, _context2;\n    super(props);\n    this.visualize = _bindInstanceProperty(_context = this.visualize).call(_context, this);\n    this.onClick = _bindInstanceProperty(_context2 = this.onClick).call(_context2, this);\n  }\n  onClick() {\n    this.visualize();\n  }\n\n  buildVizOptions() {\n    return {\n      datasourceName: this.props.table,\n      schema: this.props.schema,\n      dbId: this.props.dbId,\n      templateParams: this.props.templateParams };\n\n  }\n  visualize() {\n    this.props.actions.\n    createCtasDatasource(this.buildVizOptions()).\n    then(data => {\n      const formData = {\n        datasource: data.table_id + \"__table\",\n        metrics: ['count'],\n        groupby: [],\n        viz_type: 'table',\n        since: '100 years ago',\n        all_columns: [],\n        row_limit: 1000 };\n\n      this.props.actions.addInfoToast(\n      t('Creating a data source and creating a new tab'));\n\n\n      // open new window for data visualization\n      exportChart({ formData });\n    }).\n    catch(() => {\n      this.props.actions.addDangerToast(\n      this.props.errorMessage || t('An error occurred'));\n\n    });\n  }\n  render() {\n    return (\n      ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(Button, {\n        bsSize: \"small\",\n        onClick: this.onClick,\n        tooltip: t('Explore the result set in the data exploration view'), __source: { fileName: _jsxFileName, lineNumber: 91 }, __self: this },\n\n      ___EmotionJSX(InfoTooltipWithTrigger, {\n        icon: \"line-chart\",\n        placement: \"top\",\n        label: \"explore\", __source: { fileName: _jsxFileName, lineNumber: 96 }, __self: this }),\n      ' ',\n      t('Explore')),\n\n      ___EmotionJSX(Dialog, {\n        ref: el => {\n          this.dialog = el;\n        }, __source: { fileName: _jsxFileName, lineNumber: 103 }, __self: this })));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}ExploreCtasResultsButton.propTypes = propTypes;\nExploreCtasResultsButton.defaultProps = defaultProps;\n\nfunction mapStateToProps({ sqlLab, common }) {\n  return {\n    errorMessage: sqlLab.errorMessage,\n    timeout: common.conf ? common.conf.SUPERSET_WEBSERVER_TIMEOUT : null };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(actions, dispatch) };\n\n}\n\nexport { ExploreCtasResultsButton };const _default =\nconnect(\nmapStateToProps,\nmapDispatchToProps)(\nExploreCtasResultsButton);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");reactHotLoader.register(ExploreCtasResultsButton, \"ExploreCtasResultsButton\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/ExploreCtasResultsButton.jsx"],"names":["React","PropTypes","bindActionCreators","connect","Dialog","t","InfoTooltipWithTrigger","exportChart","actions","Button","propTypes","object","isRequired","table","string","schema","dbId","number","errorMessage","templateParams","defaultProps","vizRequest","ExploreCtasResultsButton","PureComponent","constructor","props","visualize","onClick","buildVizOptions","datasourceName","createCtasDatasource","then","data","formData","datasource","table_id","metrics","groupby","viz_type","since","all_columns","row_limit","addInfoToast","catch","addDangerToast","render","el","dialog","mapStateToProps","sqlLab","common","timeout","conf","SUPERSET_WEBSERVER_TIMEOUT","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Dialog from 'react-bootstrap-dialog';\nimport { t } from '@superset-ui/translation';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\n\nimport { exportChart } from '../../explore/exploreUtils';\nimport * as actions from '../actions/sqlLab';\nimport Button from '../../components/Button';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  table: PropTypes.string.isRequired,\n  schema: PropTypes.string,\n  dbId: PropTypes.number.isRequired,\n  errorMessage: PropTypes.string,\n  templateParams: PropTypes.string,\n};\n\nconst defaultProps = {\n  vizRequest: {},\n};\n\nclass ExploreCtasResultsButton extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.visualize = this.visualize.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n  onClick() {\n    this.visualize();\n  }\n\n  buildVizOptions() {\n    return {\n      datasourceName: this.props.table,\n      schema: this.props.schema,\n      dbId: this.props.dbId,\n      templateParams: this.props.templateParams,\n    };\n  }\n  visualize() {\n    this.props.actions\n      .createCtasDatasource(this.buildVizOptions())\n      .then(data => {\n        const formData = {\n          datasource: `${data.table_id}__table`,\n          metrics: ['count'],\n          groupby: [],\n          viz_type: 'table',\n          since: '100 years ago',\n          all_columns: [],\n          row_limit: 1000,\n        };\n        this.props.actions.addInfoToast(\n          t('Creating a data source and creating a new tab'),\n        );\n\n        // open new window for data visualization\n        exportChart({ formData });\n      })\n      .catch(() => {\n        this.props.actions.addDangerToast(\n          this.props.errorMessage || t('An error occurred'),\n        );\n      });\n  }\n  render() {\n    return (\n      <>\n        <Button\n          bsSize=\"small\"\n          onClick={this.onClick}\n          tooltip={t('Explore the result set in the data exploration view')}\n        >\n          <InfoTooltipWithTrigger\n            icon=\"line-chart\"\n            placement=\"top\"\n            label=\"explore\"\n          />{' '}\n          {t('Explore')}\n        </Button>\n        <Dialog\n          ref={el => {\n            this.dialog = el;\n          }}\n        />\n      </>\n    );\n  }\n}\nExploreCtasResultsButton.propTypes = propTypes;\nExploreCtasResultsButton.defaultProps = defaultProps;\n\nfunction mapStateToProps({ sqlLab, common }) {\n  return {\n    errorMessage: sqlLab.errorMessage,\n    timeout: common.conf ? common.conf.SUPERSET_WEBSERVER_TIMEOUT : null,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(actions, dispatch),\n  };\n}\n\nexport { ExploreCtasResultsButton };\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ExploreCtasResultsButton);\n"]},"metadata":{},"sourceType":"module"}