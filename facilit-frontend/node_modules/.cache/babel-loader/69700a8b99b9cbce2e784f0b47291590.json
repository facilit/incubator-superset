{"ast":null,"code":"import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */\nimport React from 'react';\nimport { Modal } from 'react-bootstrap';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\nimport { SupersetClient } from '@superset-ui/connection';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport Omnibar from 'omnibar';\nimport { LOG_ACTIONS_OMNIBAR_TRIGGERED } from '../logger/LogUtils';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  logEvent: PropTypes.func.isRequired };\n\n\nconst getDashboards = (query) =>\n// todo: Build a dedicated endpoint for dashboard searching\n// i.e. superset/v1/api/dashboards?q=${query}\nSupersetClient.get({\n  endpoint: \"/dashboardasync/api/read?_oc_DashboardModelViewAsync=changed_on&_od_DashboardModelViewAsync=desc&_flt_2_dashboard_title=\" + query }).\n\nthen(({ json }) => {var _context;return (\n    _mapInstanceProperty(_context = json.result).call(_context, item => _Object$assign({\n      title: item.dashboard_title },\n    item)));}).\n\n\ncatch(() => ({\n  title: t('An error occurred while fethching Dashboards') }));\n\n\nclass OmniContainer extends React.Component {\n  constructor(props) {var _context2;\n    super(props);\n    this.state = {\n      showOmni: false };\n\n    this.handleKeydown = _bindInstanceProperty(_context2 = this.handleKeydown).call(_context2, this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown(event) {\n    const controlOrCommand = event.ctrlKey || event.metaKey;\n    if (controlOrCommand && isFeatureEnabled(FeatureFlag.OMNIBAR)) {\n      const isK = event.key === 'k' || event.keyCode === 83;\n      if (isK) {\n        this.props.logEvent(LOG_ACTIONS_OMNIBAR_TRIGGERED, {\n          show_omni: !this.state.showOmni });\n\n\n        this.setState({ showOmni: !this.state.showOmni });\n\n        document.getElementsByClassName('Omnibar')[0].focus();\n      }\n    }\n  }\n\n  render() {\n    return (\n      ___EmotionJSX(Modal, { show: this.state.showOmni, style: { marginTop: '25%' } },\n      ___EmotionJSX(Omnibar, {\n        className: \"Omnibar\",\n        placeholder: \"Search all dashboards\",\n        extensions: [getDashboards] })));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nOmniContainer.propTypes = propTypes;const _default =\nOmniContainer;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/OmniContainer.jsx\");reactHotLoader.register(getDashboards, \"getDashboards\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/OmniContainer.jsx\");reactHotLoader.register(OmniContainer, \"OmniContainer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/OmniContainer.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/OmniContainer.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}