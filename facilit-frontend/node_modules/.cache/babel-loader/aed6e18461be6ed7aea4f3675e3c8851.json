{"ast":null,"code":"import \"core-js/modules/es.promise\";import \"core-js/modules/es.regexp.to-string\";import \"core-js/modules/es.string.replace\";import \"core-js/modules/es.string.search\";import \"core-js/modules/es.string.split\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";import _URL from \"@babel/runtime-corejs3/core-js-stable/url\";import _Promise from \"@babel/runtime-corejs3/core-js-stable/promise\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\nimport { SupersetClient } from '@superset-ui/connection';\nimport getClientErrorObject from './getClientErrorObject';\n\n// ATTENTION: If you change any constants, make sure to also change constants.py\n\nexport const NULL_STRING = '<NULL>';\n\nexport function getParamFromQuery(query, param) {\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i += 1) {\n    const pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === param) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\n\nexport function storeQuery(query) {\n  return SupersetClient.post({\n    endpoint: '/kv/store/',\n    postPayload: { data: query } }).\n  then(response => {\n    const baseUrl = window.location.origin + window.location.pathname;\n    const url = baseUrl + \"?id=\" + response.json.id;\n    return url;\n  });\n}\n\nexport function getParamsFromUrl() {\n  const hash = window.location.search;\n  const params = hash.split('?')[1].split('&');\n  const newParams = {};\n  _forEachInstanceProperty(params).call(params, p => {\n    const value = p.split('=')[1].replace(/\\+/g, ' ');\n    const key = p.split('=')[0];\n    newParams[key] = value;\n  });\n  return newParams;\n}\n\nexport function getShortUrl(longUrl) {\n  return SupersetClient.post({\n    endpoint: '/r/shortner/',\n    postPayload: { data: \"/\" + longUrl }, // note: url should contain 2x '/' to redirect properly\n    parseMethod: 'text',\n    stringify: false // the url saves with an extra set of string quotes without this\n  }).\n  then(({ text }) => text).\n  catch((response) =>\n  getClientErrorObject(response).then(({ error, statusText }) =>\n  _Promise.reject(error || statusText)));\n\n\n}\n\nexport function supersetURL(rootUrl, getParams = {}) {\n  const url = new _URL(rootUrl, window.location.origin);\n  for (const k in getParams) {\n    url.searchParams.set(k, getParams[k]);\n  }\n  return url.href;\n}\n\nexport function optionLabel(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  } else if (opt === '') {\n    return '<empty string>';\n  } else if (opt === true) {\n    return '<true>';\n  } else if (opt === false) {\n    return '<false>';\n  } else if (typeof opt !== 'string' && opt.toString) {\n    return opt.toString();\n  }\n  return opt;\n}\n\nexport function optionValue(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  return opt;\n}\n\nexport function optionFromValue(opt) {\n  // From a list of options, handles special values & labels\n  return { value: optionValue(opt), label: optionLabel(opt) };\n}\n\nexport function prepareCopyToClipboardTabularData(data) {\n  let result = '';\n  for (let i = 0; i < data.length; ++i) {\n    result += _Object$values(data[i]).join('\\t') + '\\n';\n  }\n  return result;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(NULL_STRING, \"NULL_STRING\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamFromQuery, \"getParamFromQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(storeQuery, \"storeQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamsFromUrl, \"getParamsFromUrl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getShortUrl, \"getShortUrl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(supersetURL, \"supersetURL\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionLabel, \"optionLabel\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionValue, \"optionValue\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionFromValue, \"optionFromValue\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(prepareCopyToClipboardTabularData, \"prepareCopyToClipboardTabularData\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js"],"names":["SupersetClient","getClientErrorObject","NULL_STRING","getParamFromQuery","query","param","vars","split","i","length","pair","decodeURIComponent","storeQuery","post","endpoint","postPayload","data","then","response","baseUrl","window","location","origin","pathname","url","json","id","getParamsFromUrl","hash","search","params","newParams","p","value","replace","key","getShortUrl","longUrl","parseMethod","stringify","text","catch","error","statusText","reject","supersetURL","rootUrl","getParams","k","searchParams","set","href","optionLabel","opt","toString","optionValue","optionFromValue","label","prepareCopyToClipboardTabularData","result","join"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient } from '@superset-ui/connection';\nimport getClientErrorObject from './getClientErrorObject';\n\n// ATTENTION: If you change any constants, make sure to also change constants.py\n\nexport const NULL_STRING = '<NULL>';\n\nexport function getParamFromQuery(query, param) {\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i += 1) {\n    const pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === param) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\n\nexport function storeQuery(query) {\n  return SupersetClient.post({\n    endpoint: '/kv/store/',\n    postPayload: { data: query },\n  }).then(response => {\n    const baseUrl = window.location.origin + window.location.pathname;\n    const url = `${baseUrl}?id=${response.json.id}`;\n    return url;\n  });\n}\n\nexport function getParamsFromUrl() {\n  const hash = window.location.search;\n  const params = hash.split('?')[1].split('&');\n  const newParams = {};\n  params.forEach(p => {\n    const value = p.split('=')[1].replace(/\\+/g, ' ');\n    const key = p.split('=')[0];\n    newParams[key] = value;\n  });\n  return newParams;\n}\n\nexport function getShortUrl(longUrl) {\n  return SupersetClient.post({\n    endpoint: '/r/shortner/',\n    postPayload: { data: `/${longUrl}` }, // note: url should contain 2x '/' to redirect properly\n    parseMethod: 'text',\n    stringify: false, // the url saves with an extra set of string quotes without this\n  })\n    .then(({ text }) => text)\n    .catch(response =>\n      getClientErrorObject(response).then(({ error, statusText }) =>\n        Promise.reject(error || statusText),\n      ),\n    );\n}\n\nexport function supersetURL(rootUrl, getParams = {}) {\n  const url = new URL(rootUrl, window.location.origin);\n  for (const k in getParams) {\n    url.searchParams.set(k, getParams[k]);\n  }\n  return url.href;\n}\n\nexport function optionLabel(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  } else if (opt === '') {\n    return '<empty string>';\n  } else if (opt === true) {\n    return '<true>';\n  } else if (opt === false) {\n    return '<false>';\n  } else if (typeof opt !== 'string' && opt.toString) {\n    return opt.toString();\n  }\n  return opt;\n}\n\nexport function optionValue(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  return opt;\n}\n\nexport function optionFromValue(opt) {\n  // From a list of options, handles special values & labels\n  return { value: optionValue(opt), label: optionLabel(opt) };\n}\n\nexport function prepareCopyToClipboardTabularData(data) {\n  let result = '';\n  for (let i = 0; i < data.length; ++i) {\n    result += Object.values(data[i]).join('\\t') + '\\n';\n  }\n  return result;\n}\n"]},"metadata":{},"sourceType":"module"}