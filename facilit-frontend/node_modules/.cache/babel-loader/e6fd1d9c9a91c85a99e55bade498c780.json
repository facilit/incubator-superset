{"ast":null,"code":"import \"core-js/modules/es.regexp.constructor\";import \"core-js/modules/es.regexp.to-string\";import \"core-js/modules/es.string.replace\";import \"core-js/modules/es.string.search\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */\n/* eslint camelcase: 0 */\nimport $ from 'jquery';\n\n/**\n                         * Sets the body and title content of a modal, and shows it. Assumes HTML for modal exists and that\n                         * it handles closing (i.e., works with bootstrap)\n                         *\n                         * @param {object} options object of the form\n                         *  {\n                         *    title: {string},\n                         *    body: {string},\n                         *    modalSelector: {string, default: '.misc-modal' },\n                         *    titleSelector: {string, default: '.misc-modal .modal-title' },\n                         *    bodySelector:  {string, default: '.misc-modal .modal-body' },\n                         *   }\n                         */\nexport function showModal(options) {\n  /* eslint no-param-reassign: 0 */\n  options.modalSelector = options.modalSelector || '.misc-modal';\n  options.titleSelector = options.titleSelector || '.misc-modal .modal-title';\n  options.bodySelector = options.bodySelector || '.misc-modal .modal-body';\n  $(options.titleSelector).html(options.title || '');\n  $(options.bodySelector).html(options.body || '');\n  $(options.modalSelector).modal('show');\n}\n\nexport function formatSelectOptionsForRange(start, end) {\n  // outputs array of arrays\n  // formatSelectOptionsForRange(1, 5)\n  // returns [[1,1], [2,2], [3,3], [4,4], [5,5]]\n  const options = [];\n  for (let i = start; i <= end; i++) {\n    options.push([i, i.toString()]);\n  }\n  return options;\n}\n\nexport function formatSelectOptions(options) {\n  return _mapInstanceProperty(options).call(options, opt => [opt, opt.toString()]);\n}\n\nexport function getDatasourceParameter(datasourceId, datasourceType) {\n  return datasourceId + \"__\" + datasourceType;\n}\n\nexport function getParam(name) {\n  /* eslint no-useless-escape: 0 */\n  const formattedName = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + formattedName + '=([^&#]*)');\n  const results = regex.exec(location.search);\n  return results === null ?\n  '' :\n  decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\nexport function mainMetric(savedMetrics) {\n  // Using 'count' as default metric if it exists, otherwise using whatever one shows up first\n  let metric;\n  if (savedMetrics && savedMetrics.length > 0) {\n    _forEachInstanceProperty(savedMetrics).call(savedMetrics, m => {\n      if (m.metric_name === 'count') {\n        metric = 'count';\n      }\n    });\n    if (!metric) {\n      metric = savedMetrics[0].metric_name;\n    }\n  }\n  return metric;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(showModal, \"showModal\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");reactHotLoader.register(formatSelectOptionsForRange, \"formatSelectOptionsForRange\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");reactHotLoader.register(formatSelectOptions, \"formatSelectOptions\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");reactHotLoader.register(getDatasourceParameter, \"getDatasourceParameter\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");reactHotLoader.register(getParam, \"getParam\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");reactHotLoader.register(mainMetric, \"mainMetric\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/modules/utils.js"],"names":["$","showModal","options","modalSelector","titleSelector","bodySelector","html","title","body","modal","formatSelectOptionsForRange","start","end","i","push","toString","formatSelectOptions","opt","getDatasourceParameter","datasourceId","datasourceType","getParam","name","formattedName","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","mainMetric","savedMetrics","metric","length","m","metric_name"],"mappings":"8oBAAA;;;;;;;;;;;;;;;;;;AAkBA;AACA,OAAOA,CAAP,MAAc,QAAd;;AAEA;;;;;;;;;;;;;AAaA,OAAO,SAASC,SAAT,CAAmBC,OAAnB,EAA4B;AACjC;AACAA,EAAAA,OAAO,CAACC,aAAR,GAAwBD,OAAO,CAACC,aAAR,IAAyB,aAAjD;AACAD,EAAAA,OAAO,CAACE,aAAR,GAAwBF,OAAO,CAACE,aAAR,IAAyB,0BAAjD;AACAF,EAAAA,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACG,YAAR,IAAwB,yBAA/C;AACAL,EAAAA,CAAC,CAACE,OAAO,CAACE,aAAT,CAAD,CAAyBE,IAAzB,CAA8BJ,OAAO,CAACK,KAAR,IAAiB,EAA/C;AACAP,EAAAA,CAAC,CAACE,OAAO,CAACG,YAAT,CAAD,CAAwBC,IAAxB,CAA6BJ,OAAO,CAACM,IAAR,IAAgB,EAA7C;AACAR,EAAAA,CAAC,CAACE,OAAO,CAACC,aAAT,CAAD,CAAyBM,KAAzB,CAA+B,MAA/B;AACD;;AAED,OAAO,SAASC,2BAAT,CAAqCC,KAArC,EAA4CC,GAA5C,EAAiD;AACtD;AACA;AACA;AACA,QAAMV,OAAO,GAAG,EAAhB;AACA,OAAK,IAAIW,CAAC,GAAGF,KAAb,EAAoBE,CAAC,IAAID,GAAzB,EAA8BC,CAAC,EAA/B,EAAmC;AACjCX,IAAAA,OAAO,CAACY,IAAR,CAAa,CAACD,CAAD,EAAIA,CAAC,CAACE,QAAF,EAAJ,CAAb;AACD;AACD,SAAOb,OAAP;AACD;;AAED,OAAO,SAASc,mBAAT,CAA6Bd,OAA7B,EAAsC;AAC3C,SAAO,qBAAAA,OAAO,MAAP,CAAAA,OAAO,EAAKe,GAAG,IAAI,CAACA,GAAD,EAAMA,GAAG,CAACF,QAAJ,EAAN,CAAZ,CAAd;AACD;;AAED,OAAO,SAASG,sBAAT,CAAgCC,YAAhC,EAA8CC,cAA9C,EAA8D;AACnE,SAAUD,YAAV,UAA2BC,cAA3B;AACD;;AAED,OAAO,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AAC7B;AACA,QAAMC,aAAa,GAAGD,IAAI,CAACE,OAAL,CAAa,MAAb,EAAqB,KAArB,EAA4BA,OAA5B,CAAoC,MAApC,EAA4C,KAA5C,CAAtB;AACA,QAAMC,KAAK,GAAG,IAAIC,MAAJ,CAAW,WAAWH,aAAX,GAA2B,WAAtC,CAAd;AACA,QAAMI,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWC,QAAQ,CAACC,MAApB,CAAhB;AACA,SAAOH,OAAO,KAAK,IAAZ;AACH,IADG;AAEHI,EAAAA,kBAAkB,CAACJ,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAFtB;AAGD;;AAED,OAAO,SAASQ,UAAT,CAAoBC,YAApB,EAAkC;AACvC;AACA,MAAIC,MAAJ;AACA,MAAID,YAAY,IAAIA,YAAY,CAACE,MAAb,GAAsB,CAA1C,EAA6C;AAC3C,6BAAAF,YAAY,MAAZ,CAAAA,YAAY,EAASG,CAAC,IAAI;AACxB,UAAIA,CAAC,CAACC,WAAF,KAAkB,OAAtB,EAA+B;AAC7BH,QAAAA,MAAM,GAAG,OAAT;AACD;AACF,KAJW,CAAZ;AAKA,QAAI,CAACA,MAAL,EAAa;AACXA,MAAAA,MAAM,GAAGD,YAAY,CAAC,CAAD,CAAZ,CAAgBI,WAAzB;AACD;AACF;AACD,SAAOH,MAAP;AACD,C,iLArDejC,S,4HAUAS,2B,8IAWAM,mB,sIAIAE,sB,yIAIAG,Q,2HAUAW,U","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport $ from 'jquery';\n\n/**\n * Sets the body and title content of a modal, and shows it. Assumes HTML for modal exists and that\n * it handles closing (i.e., works with bootstrap)\n *\n * @param {object} options object of the form\n *  {\n *    title: {string},\n *    body: {string},\n *    modalSelector: {string, default: '.misc-modal' },\n *    titleSelector: {string, default: '.misc-modal .modal-title' },\n *    bodySelector:  {string, default: '.misc-modal .modal-body' },\n *   }\n */\nexport function showModal(options) {\n  /* eslint no-param-reassign: 0 */\n  options.modalSelector = options.modalSelector || '.misc-modal';\n  options.titleSelector = options.titleSelector || '.misc-modal .modal-title';\n  options.bodySelector = options.bodySelector || '.misc-modal .modal-body';\n  $(options.titleSelector).html(options.title || '');\n  $(options.bodySelector).html(options.body || '');\n  $(options.modalSelector).modal('show');\n}\n\nexport function formatSelectOptionsForRange(start, end) {\n  // outputs array of arrays\n  // formatSelectOptionsForRange(1, 5)\n  // returns [[1,1], [2,2], [3,3], [4,4], [5,5]]\n  const options = [];\n  for (let i = start; i <= end; i++) {\n    options.push([i, i.toString()]);\n  }\n  return options;\n}\n\nexport function formatSelectOptions(options) {\n  return options.map(opt => [opt, opt.toString()]);\n}\n\nexport function getDatasourceParameter(datasourceId, datasourceType) {\n  return `${datasourceId}__${datasourceType}`;\n}\n\nexport function getParam(name) {\n  /* eslint no-useless-escape: 0 */\n  const formattedName = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + formattedName + '=([^&#]*)');\n  const results = regex.exec(location.search);\n  return results === null\n    ? ''\n    : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\nexport function mainMetric(savedMetrics) {\n  // Using 'count' as default metric if it exists, otherwise using whatever one shows up first\n  let metric;\n  if (savedMetrics && savedMetrics.length > 0) {\n    savedMetrics.forEach(m => {\n      if (m.metric_name === 'count') {\n        metric = 'count';\n      }\n    });\n    if (!metric) {\n      metric = savedMetrics[0].metric_name;\n    }\n  }\n  return metric;\n}\n"]},"metadata":{},"sourceType":"module"}