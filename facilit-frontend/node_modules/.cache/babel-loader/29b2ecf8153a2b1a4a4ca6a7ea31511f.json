{"ast":null,"code":"import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";import _entriesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/entries\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _Set from \"@babel/runtime-corejs3/core-js-stable/set\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\nLabel,\nRow,\nCol,\nFormControl,\nModal,\nOverlayTrigger,\nTooltip } from\n'react-bootstrap';\nimport { t } from '@superset-ui/translation';\nimport { getChartMetadataRegistry } from '@superset-ui/chart';\n\nimport ControlHeader from '../ControlHeader';\nimport './VizTypeControl.less';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  description: PropTypes.string,\n  label: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func,\n  value: PropTypes.string.isRequired };\n\n\nconst defaultProps = {\n  onChange: () => {} };\n\n\nconst registry = getChartMetadataRegistry();\n\nconst IMAGE_PER_ROW = 6;\nconst LABEL_STYLE = { cursor: 'pointer' };\nconst DEFAULT_ORDER = [\n'line',\n'big_number',\n'table',\n'filter_box',\n'dist_bar',\n'area',\n'bar',\n'deck_polygon',\n'pie',\n'time_table',\n'pivot_table',\n'histogram',\n'big_number_total',\n'deck_scatter',\n'deck_hex',\n'time_pivot',\n'deck_arc',\n'heatmap',\n'deck_grid',\n'dual_line',\n'deck_screengrid',\n'line_multi',\n'treemap',\n'box_plot',\n'separator',\n'sunburst',\n'sankey',\n'word_cloud',\n'mapbox',\n'kepler',\n'cal_heatmap',\n'rose',\n'bubble',\n'deck_geojson',\n'horizon',\n'markup',\n'deck_multi',\n'compare',\n'partition',\n'event_flow',\n'deck_path',\n'directed_force',\n'world_map',\n'paired_ttest',\n'para',\n'iframe',\n'country_map'];\n\n\nconst typesWithDefaultOrder = new _Set(DEFAULT_ORDER);\n\nexport default class VizTypeControl extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3, _context4;\n    super(props);\n    this.state = {\n      showModal: false,\n      filter: '' };\n\n    this.toggleModal = _bindInstanceProperty(_context = this.toggleModal).call(_context, this);\n    this.changeSearch = _bindInstanceProperty(_context2 = this.changeSearch).call(_context2, this);\n    this.setSearchRef = _bindInstanceProperty(_context3 = this.setSearchRef).call(_context3, this);\n    this.focusSearch = _bindInstanceProperty(_context4 = this.focusSearch).call(_context4, this);\n  }\n\n  onChange(vizType) {\n    this.props.onChange(vizType);\n    this.setState({ showModal: false });\n  }\n\n  setSearchRef(searchRef) {\n    this.searchRef = searchRef;\n  }\n\n  toggleModal() {\n    this.setState({ showModal: !this.state.showModal });\n  }\n\n  changeSearch(event) {\n    this.setState({ filter: event.target.value });\n  }\n\n  focusSearch() {\n    if (this.searchRef) {\n      this.searchRef.focus();\n    }\n  }\n\n  renderItem(entry) {var _context5;\n    const { value } = this.props;\n    const { key, value: type } = entry;\n    const isSelected = key === value;\n\n    return (\n      ___EmotionJSX(\"div\", {\n        className: \"viztype-selector-container \" + (isSelected ? 'selected' : ''),\n        onClick: _bindInstanceProperty(_context5 = this.onChange).call(_context5, this, key) },\n\n      ___EmotionJSX(\"img\", {\n        alt: type.name,\n        width: \"100%\",\n        className: \"viztype-selector \" + (isSelected ? 'selected' : ''),\n        src: type.thumbnail }),\n\n      ___EmotionJSX(\"div\", { className: \"viztype-label\" }, type.name)));\n\n\n  }\n\n  render() {var _context6, _context7, _context8, _context9;\n    const { filter, showModal } = this.state;\n    const { value } = this.props;\n\n    const filterString = filter.toLowerCase();\n    const filteredTypes = _filterInstanceProperty(_context6 = _concatInstanceProperty(_context7 = _mapInstanceProperty(_context8 = _filterInstanceProperty(DEFAULT_ORDER).call(DEFAULT_ORDER, type => registry.has(type))).call(_context8,\n    type => ({\n      key: type,\n      value: registry.get(type) }))).call(_context7,\n\n\n    _filterInstanceProperty(_context9 = _entriesInstanceProperty(registry).call(registry)).call(_context9, ({ key }) => !typesWithDefaultOrder.has(key)))).call(_context6,\n\n    entry => {var _context10;return _includesInstanceProperty(_context10 = entry.value.name.toLowerCase()).call(_context10, filterString);});\n\n    const rows = [];\n    for (let i = 0; i <= filteredTypes.length; i += IMAGE_PER_ROW) {var _context11;\n      rows.push(\n      ___EmotionJSX(Row, { key: \"row-\" + i },\n      _mapInstanceProperty(_context11 = _sliceInstanceProperty(filteredTypes).call(filteredTypes, i, i + IMAGE_PER_ROW)).call(_context11, (entry) =>\n      ___EmotionJSX(Col, { md: 12 / IMAGE_PER_ROW, key: \"grid-col-\" + entry.key },\n      this.renderItem(entry)))));\n\n\n\n\n    }\n\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(OverlayTrigger, {\n        placement: \"right\",\n        overlay:\n        ___EmotionJSX(Tooltip, { id: \"error-tooltip\" },\n        t('Click to change visualization type')) },\n\n\n\n      ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(Label, { onClick: this.toggleModal, style: LABEL_STYLE },\n      registry.has(value) ? registry.get(value).name : \"\" + value),\n\n      !registry.has(value) &&\n      ___EmotionJSX(\"div\", { className: \"text-danger\" },\n      ___EmotionJSX(\"i\", { className: \"fa fa-exclamation-circle text-danger\" }), ' ',\n      ___EmotionJSX(\"small\", null, t('This visualization type is not supported.'))))),\n\n\n\n\n      ___EmotionJSX(Modal, {\n        show: showModal,\n        onHide: this.toggleModal,\n        onEnter: this.focusSearch,\n        onExit: this.setSearchRef,\n        bsSize: \"lg\" },\n\n      ___EmotionJSX(Modal.Header, { closeButton: true },\n      ___EmotionJSX(Modal.Title, null, t('Select a visualization type'))),\n\n      ___EmotionJSX(Modal.Body, null,\n      ___EmotionJSX(\"div\", { className: \"viztype-control-search-box\" },\n      ___EmotionJSX(FormControl, {\n        inputRef: this.setSearchRef,\n        type: \"text\",\n        value: filter,\n        placeholder: t('Search'),\n        onChange: this.changeSearch })),\n\n\n      rows))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nVizTypeControl.propTypes = propTypes;\nVizTypeControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(registry, \"registry\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(IMAGE_PER_ROW, \"IMAGE_PER_ROW\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(LABEL_STYLE, \"LABEL_STYLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(DEFAULT_ORDER, \"DEFAULT_ORDER\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(typesWithDefaultOrder, \"typesWithDefaultOrder\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");reactHotLoader.register(VizTypeControl, \"VizTypeControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/VizTypeControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}