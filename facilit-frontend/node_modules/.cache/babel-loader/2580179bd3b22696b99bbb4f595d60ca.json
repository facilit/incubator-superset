{"ast":null,"code":"import \"core-js/modules/es.string.search\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { t } from '@superset-ui/translation';\nimport TableElement from './TableElement';\nimport TableSelector from '../../components/TableSelector';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  queryEditor: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  tables: PropTypes.array,\n  actions: PropTypes.object,\n  database: PropTypes.object,\n  offline: PropTypes.bool };\n\n\nconst defaultProps = {\n  actions: {},\n  height: 500,\n  offline: false,\n  tables: [] };\n\n\nexport default class SqlEditorLeftBar extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3, _context4, _context5, _context6, _context7;\n    super(props);\n    this.resetState = _bindInstanceProperty(_context = this.resetState).call(_context, this);\n    this.onSchemaChange = _bindInstanceProperty(_context2 = this.onSchemaChange).call(_context2, this);\n    this.onSchemasLoad = _bindInstanceProperty(_context3 = this.onSchemasLoad).call(_context3, this);\n    this.onTablesLoad = _bindInstanceProperty(_context4 = this.onTablesLoad).call(_context4, this);\n    this.onDbChange = _bindInstanceProperty(_context5 = this.onDbChange).call(_context5, this);\n    this.getDbList = _bindInstanceProperty(_context6 = this.getDbList).call(_context6, this);\n    this.onTableChange = _bindInstanceProperty(_context7 = this.onTableChange).call(_context7, this);\n  }\n  onSchemaChange(schema) {\n    this.props.actions.queryEditorSetSchema(this.props.queryEditor, schema);\n  }\n  onSchemasLoad(schemas) {\n    this.props.actions.queryEditorSetSchemaOptions(\n    this.props.queryEditor,\n    schemas);\n\n  }\n  onTablesLoad(tables) {\n    this.props.actions.queryEditorSetTableOptions(\n    this.props.queryEditor,\n    tables);\n\n  }\n  onDbChange(db) {\n    this.props.actions.queryEditorSetDb(this.props.queryEditor, db.id);\n  }\n  onTableChange(tableName, schemaName) {\n    this.props.actions.addTable(this.props.queryEditor, tableName, schemaName);\n  }\n  getDbList(dbs) {\n    this.props.actions.setDatabases(dbs);\n  }\n\n  dbMutator(data) {var _context8;\n    const options = _mapInstanceProperty(_context8 = data.result).call(_context8, db => ({\n      value: db.id,\n      label: db.database_name }));\n\n    this.props.actions.setDatabases(data.result);\n    if (data.result.length === 0) {\n      this.props.actions.addDangerToast(\n      t(\"It seems you don't have access to any database\"));\n\n    }\n    return options;\n  }\n\n  resetState() {\n    this.props.actions.resetState();\n  }\n  changeTable(tableOpt) {\n    if (!tableOpt) {\n      return;\n    }\n    const schemaName = tableOpt.value.schema;\n    const tableName = tableOpt.value.table;\n    this.props.actions.queryEditorSetSchema(this.props.queryEditor, schemaName);\n    this.props.actions.addTable(this.props.queryEditor, tableName, schemaName);\n  }\n\n  closePopover(ref) {\n    this.refs[ref].hide();\n  }\n  render() {var _context9;\n    const shouldShowReset = window.location.search === '?reset=1';\n    const tableMetaDataHeight = this.props.height - 130; // 130 is the height of the selects above\n    const qe = this.props.queryEditor;\n    return (\n      ___EmotionJSX(\"div\", { className: \"SqlEditorLeftBar\" },\n      ___EmotionJSX(TableSelector, {\n        dbId: qe.dbId,\n        schema: qe.schema,\n        onDbChange: this.onDbChange,\n        onSchemaChange: this.onSchemaChange,\n        onSchemasLoad: this.onSchemasLoad,\n        onTablesLoad: this.onTablesLoad,\n        getDbList: this.getDbList,\n        onTableChange: this.onTableChange,\n        tableNameSticky: false,\n        database: this.props.database,\n        handleError: this.props.actions.addDangerToast }),\n\n      ___EmotionJSX(\"div\", { className: \"divider\" }),\n      ___EmotionJSX(\"div\", { className: \"scrollbar-container\" },\n      ___EmotionJSX(\"div\", {\n        className: \"scrollbar-content\",\n        style: { height: tableMetaDataHeight } },\n\n      _mapInstanceProperty(_context9 = this.props.tables).call(_context9, (table) =>\n      ___EmotionJSX(TableElement, {\n        table: table,\n        key: table.id,\n        actions: this.props.actions })))),\n\n\n\n\n      shouldShowReset &&\n      ___EmotionJSX(Button, { bsSize: \"small\", bsStyle: \"danger\", onClick: this.resetState },\n      ___EmotionJSX(\"i\", { className: \"fa fa-bomb\" }), \" \", t('Reset State'))));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nSqlEditorLeftBar.propTypes = propTypes;\nSqlEditorLeftBar.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/SqlEditorLeftBar.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/SqlEditorLeftBar.jsx\");reactHotLoader.register(SqlEditorLeftBar, \"SqlEditorLeftBar\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/SqlEditorLeftBar.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/SqlEditorLeftBar.jsx"],"names":["React","PropTypes","Button","t","TableElement","TableSelector","propTypes","queryEditor","object","isRequired","height","number","tables","array","actions","database","offline","bool","defaultProps","SqlEditorLeftBar","PureComponent","constructor","props","resetState","onSchemaChange","onSchemasLoad","onTablesLoad","onDbChange","getDbList","onTableChange","schema","queryEditorSetSchema","schemas","queryEditorSetSchemaOptions","queryEditorSetTableOptions","db","queryEditorSetDb","id","tableName","schemaName","addTable","dbs","setDatabases","dbMutator","data","options","result","value","label","database_name","length","addDangerToast","changeTable","tableOpt","table","closePopover","ref","refs","hide","render","shouldShowReset","window","location","search","tableMetaDataHeight","qe","dbId"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { t } from '@superset-ui/translation';\nimport TableElement from './TableElement';\nimport TableSelector from '../../components/TableSelector';\n\nconst propTypes = {\n  queryEditor: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  tables: PropTypes.array,\n  actions: PropTypes.object,\n  database: PropTypes.object,\n  offline: PropTypes.bool,\n};\n\nconst defaultProps = {\n  actions: {},\n  height: 500,\n  offline: false,\n  tables: [],\n};\n\nexport default class SqlEditorLeftBar extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.resetState = this.resetState.bind(this);\n    this.onSchemaChange = this.onSchemaChange.bind(this);\n    this.onSchemasLoad = this.onSchemasLoad.bind(this);\n    this.onTablesLoad = this.onTablesLoad.bind(this);\n    this.onDbChange = this.onDbChange.bind(this);\n    this.getDbList = this.getDbList.bind(this);\n    this.onTableChange = this.onTableChange.bind(this);\n  }\n  onSchemaChange(schema) {\n    this.props.actions.queryEditorSetSchema(this.props.queryEditor, schema);\n  }\n  onSchemasLoad(schemas) {\n    this.props.actions.queryEditorSetSchemaOptions(\n      this.props.queryEditor,\n      schemas,\n    );\n  }\n  onTablesLoad(tables) {\n    this.props.actions.queryEditorSetTableOptions(\n      this.props.queryEditor,\n      tables,\n    );\n  }\n  onDbChange(db) {\n    this.props.actions.queryEditorSetDb(this.props.queryEditor, db.id);\n  }\n  onTableChange(tableName, schemaName) {\n    this.props.actions.addTable(this.props.queryEditor, tableName, schemaName);\n  }\n  getDbList(dbs) {\n    this.props.actions.setDatabases(dbs);\n  }\n\n  dbMutator(data) {\n    const options = data.result.map(db => ({\n      value: db.id,\n      label: db.database_name,\n    }));\n    this.props.actions.setDatabases(data.result);\n    if (data.result.length === 0) {\n      this.props.actions.addDangerToast(\n        t(\"It seems you don't have access to any database\"),\n      );\n    }\n    return options;\n  }\n\n  resetState() {\n    this.props.actions.resetState();\n  }\n  changeTable(tableOpt) {\n    if (!tableOpt) {\n      return;\n    }\n    const schemaName = tableOpt.value.schema;\n    const tableName = tableOpt.value.table;\n    this.props.actions.queryEditorSetSchema(this.props.queryEditor, schemaName);\n    this.props.actions.addTable(this.props.queryEditor, tableName, schemaName);\n  }\n\n  closePopover(ref) {\n    this.refs[ref].hide();\n  }\n  render() {\n    const shouldShowReset = window.location.search === '?reset=1';\n    const tableMetaDataHeight = this.props.height - 130; // 130 is the height of the selects above\n    const qe = this.props.queryEditor;\n    return (\n      <div className=\"SqlEditorLeftBar\">\n        <TableSelector\n          dbId={qe.dbId}\n          schema={qe.schema}\n          onDbChange={this.onDbChange}\n          onSchemaChange={this.onSchemaChange}\n          onSchemasLoad={this.onSchemasLoad}\n          onTablesLoad={this.onTablesLoad}\n          getDbList={this.getDbList}\n          onTableChange={this.onTableChange}\n          tableNameSticky={false}\n          database={this.props.database}\n          handleError={this.props.actions.addDangerToast}\n        />\n        <div className=\"divider\" />\n        <div className=\"scrollbar-container\">\n          <div\n            className=\"scrollbar-content\"\n            style={{ height: tableMetaDataHeight }}\n          >\n            {this.props.tables.map(table => (\n              <TableElement\n                table={table}\n                key={table.id}\n                actions={this.props.actions}\n              />\n            ))}\n          </div>\n        </div>\n        {shouldShowReset && (\n          <Button bsSize=\"small\" bsStyle=\"danger\" onClick={this.resetState}>\n            <i className=\"fa fa-bomb\" /> {t('Reset State')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n\nSqlEditorLeftBar.propTypes = propTypes;\nSqlEditorLeftBar.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}