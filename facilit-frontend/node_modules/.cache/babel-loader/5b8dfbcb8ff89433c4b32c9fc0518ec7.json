{"ast":null,"code":"import \"core-js/modules/es.number.to-fixed\";import _parseInt from \"@babel/runtime-corejs3/core-js-stable/parse-int\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport $ from 'jquery';\nimport { t } from '@superset-ui/translation';\nimport throttle from 'lodash/throttle';\nimport { ThemeProvider } from 'emotion-theming';\nimport { supersetTheme } from '@superset-ui/style';\nimport TabbedSqlEditors from './TabbedSqlEditors';\nimport QueryAutoRefresh from './QueryAutoRefresh';\nimport QuerySearch from './QuerySearch';\nimport ToastPresenter from '../../messageToasts/containers/ToastPresenter';\nimport {\nLOCALSTORAGE_MAX_USAGE_KB,\nLOCALSTORAGE_WARNING_THRESHOLD,\nLOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS } from\n'../constants';\nimport * as Actions from '../actions/sqlLab';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nclass App extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hash: window.location.hash,\n      contentHeight: '0px' };\n\n\n    this.showLocalStorageUsageWarning = throttle(\n    this.showLocalStorageUsageWarning,\n    LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS,\n    { trailing: false });\n\n  }\n  componentDidMount() {var _context, _context2;\n    /* eslint-disable react/no-did-mount-set-state */\n    this.setState({ contentHeight: this.getHeight() });\n    window.addEventListener('hashchange', _bindInstanceProperty(_context = this.onHashChanged).call(_context, this));\n    window.addEventListener('resize', _bindInstanceProperty(_context2 = this.handleResize).call(_context2, this));\n  }\n  componentDidUpdate() {\n    if (\n    this.props.localStorageUsageInKilobytes >=\n    LOCALSTORAGE_WARNING_THRESHOLD * LOCALSTORAGE_MAX_USAGE_KB)\n    {\n      this.showLocalStorageUsageWarning(\n      this.props.localStorageUsageInKilobytes);\n\n    }\n  }\n  componentWillUnmount() {var _context3, _context4;\n    window.removeEventListener('hashchange', _bindInstanceProperty(_context3 = this.onHashChanged).call(_context3, this));\n    window.removeEventListener('resize', _bindInstanceProperty(_context4 = this.handleResize).call(_context4, this));\n  }\n  onHashChanged() {\n    this.setState({ hash: window.location.hash });\n  }\n  getHeight() {\n    const warningEl = $('#navbar-warning');\n    const tabsEl = $('.nav-tabs');\n    const searchHeaderEl = $('#search-header');\n    const alertEl = $('#sqllab-alerts');\n    const headerEl = $('header .navbar');\n    const headerHeight =\n    headerEl.outerHeight() + _parseInt(headerEl.css('marginBottom'), 10);\n    const searchHeaderHeight =\n    searchHeaderEl.length > 0 ?\n    searchHeaderEl.outerHeight() +\n    _parseInt(searchHeaderEl.css('marginBottom'), 10) :\n    0;\n    const tabsHeight =\n    tabsEl.length > 0 ? tabsEl.outerHeight() : searchHeaderHeight;\n    const warningHeight = warningEl.length > 0 ? warningEl.outerHeight() : 0;\n    const alertHeight = alertEl.length > 0 ? alertEl.outerHeight() : 0;\n    return (\n      window.innerHeight -\n      headerHeight -\n      tabsHeight -\n      warningHeight -\n      alertHeight + \"px\");\n\n  }\n  showLocalStorageUsageWarning(currentUsage) {\n    this.props.actions.addDangerToast(\n    t(\n    \"SQL Lab uses your browser's local storage to store queries and results.\" + (\"\\n Currently, you are using \" +\n    currentUsage.toFixed(\n    2) + \" KB out of \" +\n    LOCALSTORAGE_MAX_USAGE_KB + \" KB. storage space.\") +\n    '\\n To keep SQL Lab from crashing, please delete some query tabs.' +\n    '\\n You can re-access these queries by using the Save feature before you delete the tab. ' +\n    'Note that you will need to close other SQL Lab windows before you do this.'));\n\n\n  }\n  handleResize() {\n    this.setState({ contentHeight: this.getHeight() });\n  }\n  render() {\n    let content;\n    if (this.state.hash) {\n      content =\n      ___EmotionJSX(QuerySearch, {\n        height: this.state.contentHeight,\n        actions: this.props.actions,\n        displayLimit: this.props.common.conf.DISPLAY_MAX_ROW });\n\n\n    } else {\n      content =\n      ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(QueryAutoRefresh, null),\n      ___EmotionJSX(TabbedSqlEditors, null));\n\n\n    }\n    return (\n      ___EmotionJSX(ThemeProvider, { theme: supersetTheme },\n      ___EmotionJSX(\"div\", { className: \"App SqlLab\" },\n      content,\n      ___EmotionJSX(ToastPresenter, null))));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nApp.propTypes = {\n  actions: PropTypes.object,\n  common: PropTypes.object,\n  localStorageUsageInKilobytes: PropTypes.number.isRequired };\n\n\nfunction mapStateToProps(state) {\n  const { common, localStorageUsageInKilobytes } = state;\n  return {\n    common,\n    localStorageUsageInKilobytes };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(Actions, dispatch) };\n\n}\n\nexport { App };const _default =\nconnect(mapStateToProps, mapDispatchToProps)(App);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(App, \"App\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/App.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/App.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/App.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/components/App.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}