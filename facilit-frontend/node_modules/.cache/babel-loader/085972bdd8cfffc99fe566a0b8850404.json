{"ast":null,"code":"import _Date$now from \"@babel/runtime-corejs3/core-js-stable/date/now\";import _Array$from from \"@babel/runtime-corejs3/core-js-stable/array/from\";import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";import _Set from \"@babel/runtime-corejs3/core-js-stable/set\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */\n/* eslint-disable camelcase */\nimport {\nADD_SLICE,\nON_CHANGE,\nON_SAVE,\nREMOVE_SLICE,\nSET_COLOR_SCHEME,\nSET_EDIT_MODE,\nSET_MAX_UNDO_HISTORY_EXCEEDED,\nSET_UNSAVED_CHANGES,\nSHOW_BUILDER_PANE,\nTOGGLE_EXPAND_SLICE,\nTOGGLE_FAVE_STAR,\nTOGGLE_PUBLISHED,\nUPDATE_CSS,\nSET_REFRESH_FREQUENCY,\nSET_DIRECT_PATH,\nSET_FOCUSED_FILTER_FIELD } from\n'../actions/dashboardState';\nimport { BUILDER_PANE_TYPE } from '../util/constants';\n\nexport default function dashboardStateReducer(state = {}, action) {\n  const actionHandlers = {\n    [UPDATE_CSS]() {\n      return _Object$assign({}, state, { css: action.css });\n    },\n    [ADD_SLICE]() {\n      const updatedSliceIds = new _Set(state.sliceIds);\n      updatedSliceIds.add(_sliceInstanceProperty(action).slice_id);\n      return _Object$assign({},\n      state, {\n        sliceIds: _Array$from(updatedSliceIds) });\n\n    },\n    [REMOVE_SLICE]() {\n      const sliceId = action.sliceId;\n      const updatedSliceIds = new _Set(state.sliceIds);\n      updatedSliceIds.delete(sliceId);\n\n      return _Object$assign({},\n      state, {\n        sliceIds: _Array$from(updatedSliceIds) });\n\n    },\n    [TOGGLE_FAVE_STAR]() {\n      return _Object$assign({}, state, { isStarred: action.isStarred });\n    },\n    [TOGGLE_PUBLISHED]() {\n      return _Object$assign({}, state, { isPublished: action.isPublished });\n    },\n    [SET_EDIT_MODE]() {\n      return _Object$assign({},\n      state, {\n        editMode: action.editMode,\n        builderPaneType: action.editMode ?\n        BUILDER_PANE_TYPE.ADD_COMPONENTS :\n        BUILDER_PANE_TYPE.NONE });\n\n    },\n    [SET_MAX_UNDO_HISTORY_EXCEEDED]() {\n      const { maxUndoHistoryExceeded = true } = action.payload;\n      return _Object$assign({}, state, { maxUndoHistoryExceeded });\n    },\n    [SHOW_BUILDER_PANE]() {\n      return _Object$assign({}, state, { builderPaneType: action.builderPaneType });\n    },\n    [SET_COLOR_SCHEME]() {\n      return _Object$assign({},\n      state, {\n        colorScheme: action.colorScheme,\n        updatedColorScheme: true });\n\n    },\n    [TOGGLE_EXPAND_SLICE]() {\n      const updatedExpandedSlices = _Object$assign({}, state.expandedSlices);\n      const sliceId = action.sliceId;\n      if (updatedExpandedSlices[sliceId]) {\n        delete updatedExpandedSlices[sliceId];\n      } else {\n        updatedExpandedSlices[sliceId] = true;\n      }\n      return _Object$assign({}, state, { expandedSlices: updatedExpandedSlices });\n    },\n    [ON_CHANGE]() {\n      return _Object$assign({}, state, { hasUnsavedChanges: true });\n    },\n    [ON_SAVE]() {\n      return _Object$assign({},\n      state, {\n        hasUnsavedChanges: false,\n        maxUndoHistoryExceeded: false,\n        editMode: false,\n        builderPaneType: BUILDER_PANE_TYPE.NONE,\n        updatedColorScheme: false });\n\n    },\n    [SET_UNSAVED_CHANGES]() {\n      const { hasUnsavedChanges } = action.payload;\n      return _Object$assign({}, state, { hasUnsavedChanges });\n    },\n    [SET_REFRESH_FREQUENCY]() {\n      return _Object$assign({},\n      state, {\n        refreshFrequency: action.refreshFrequency,\n        shouldPersistRefreshFrequency: action.isPersistent,\n        hasUnsavedChanges: action.isPersistent });\n\n    },\n    [SET_DIRECT_PATH]() {\n      return _Object$assign({},\n      state, {\n        directPathToChild: action.path,\n        directPathLastUpdated: _Date$now() });\n\n    },\n    [SET_FOCUSED_FILTER_FIELD]() {\n      const { focusedFilterField } = state;\n      if (action.chartId && action.column) {\n        focusedFilterField.push({\n          chartId: action.chartId,\n          column: action.column });\n\n      } else {\n        focusedFilterField.shift();\n      }\n      return _Object$assign({},\n      state, {\n        focusedFilterField });\n\n    } };\n\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(dashboardStateReducer, \"dashboardStateReducer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/reducers/dashboardState.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/reducers/dashboardState.js"],"names":["ADD_SLICE","ON_CHANGE","ON_SAVE","REMOVE_SLICE","SET_COLOR_SCHEME","SET_EDIT_MODE","SET_MAX_UNDO_HISTORY_EXCEEDED","SET_UNSAVED_CHANGES","SHOW_BUILDER_PANE","TOGGLE_EXPAND_SLICE","TOGGLE_FAVE_STAR","TOGGLE_PUBLISHED","UPDATE_CSS","SET_REFRESH_FREQUENCY","SET_DIRECT_PATH","SET_FOCUSED_FILTER_FIELD","BUILDER_PANE_TYPE","dashboardStateReducer","state","action","actionHandlers","css","updatedSliceIds","sliceIds","add","slice_id","sliceId","delete","isStarred","isPublished","editMode","builderPaneType","ADD_COMPONENTS","NONE","maxUndoHistoryExceeded","payload","colorScheme","updatedColorScheme","updatedExpandedSlices","expandedSlices","hasUnsavedChanges","refreshFrequency","shouldPersistRefreshFrequency","isPersistent","directPathToChild","path","directPathLastUpdated","focusedFilterField","chartId","column","push","shift","type"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable camelcase */\nimport {\n  ADD_SLICE,\n  ON_CHANGE,\n  ON_SAVE,\n  REMOVE_SLICE,\n  SET_COLOR_SCHEME,\n  SET_EDIT_MODE,\n  SET_MAX_UNDO_HISTORY_EXCEEDED,\n  SET_UNSAVED_CHANGES,\n  SHOW_BUILDER_PANE,\n  TOGGLE_EXPAND_SLICE,\n  TOGGLE_FAVE_STAR,\n  TOGGLE_PUBLISHED,\n  UPDATE_CSS,\n  SET_REFRESH_FREQUENCY,\n  SET_DIRECT_PATH,\n  SET_FOCUSED_FILTER_FIELD,\n} from '../actions/dashboardState';\nimport { BUILDER_PANE_TYPE } from '../util/constants';\n\nexport default function dashboardStateReducer(state = {}, action) {\n  const actionHandlers = {\n    [UPDATE_CSS]() {\n      return { ...state, css: action.css };\n    },\n    [ADD_SLICE]() {\n      const updatedSliceIds = new Set(state.sliceIds);\n      updatedSliceIds.add(action.slice.slice_id);\n      return {\n        ...state,\n        sliceIds: Array.from(updatedSliceIds),\n      };\n    },\n    [REMOVE_SLICE]() {\n      const sliceId = action.sliceId;\n      const updatedSliceIds = new Set(state.sliceIds);\n      updatedSliceIds.delete(sliceId);\n\n      return {\n        ...state,\n        sliceIds: Array.from(updatedSliceIds),\n      };\n    },\n    [TOGGLE_FAVE_STAR]() {\n      return { ...state, isStarred: action.isStarred };\n    },\n    [TOGGLE_PUBLISHED]() {\n      return { ...state, isPublished: action.isPublished };\n    },\n    [SET_EDIT_MODE]() {\n      return {\n        ...state,\n        editMode: action.editMode,\n        builderPaneType: action.editMode\n          ? BUILDER_PANE_TYPE.ADD_COMPONENTS\n          : BUILDER_PANE_TYPE.NONE,\n      };\n    },\n    [SET_MAX_UNDO_HISTORY_EXCEEDED]() {\n      const { maxUndoHistoryExceeded = true } = action.payload;\n      return { ...state, maxUndoHistoryExceeded };\n    },\n    [SHOW_BUILDER_PANE]() {\n      return { ...state, builderPaneType: action.builderPaneType };\n    },\n    [SET_COLOR_SCHEME]() {\n      return {\n        ...state,\n        colorScheme: action.colorScheme,\n        updatedColorScheme: true,\n      };\n    },\n    [TOGGLE_EXPAND_SLICE]() {\n      const updatedExpandedSlices = { ...state.expandedSlices };\n      const sliceId = action.sliceId;\n      if (updatedExpandedSlices[sliceId]) {\n        delete updatedExpandedSlices[sliceId];\n      } else {\n        updatedExpandedSlices[sliceId] = true;\n      }\n      return { ...state, expandedSlices: updatedExpandedSlices };\n    },\n    [ON_CHANGE]() {\n      return { ...state, hasUnsavedChanges: true };\n    },\n    [ON_SAVE]() {\n      return {\n        ...state,\n        hasUnsavedChanges: false,\n        maxUndoHistoryExceeded: false,\n        editMode: false,\n        builderPaneType: BUILDER_PANE_TYPE.NONE,\n        updatedColorScheme: false,\n      };\n    },\n    [SET_UNSAVED_CHANGES]() {\n      const { hasUnsavedChanges } = action.payload;\n      return { ...state, hasUnsavedChanges };\n    },\n    [SET_REFRESH_FREQUENCY]() {\n      return {\n        ...state,\n        refreshFrequency: action.refreshFrequency,\n        shouldPersistRefreshFrequency: action.isPersistent,\n        hasUnsavedChanges: action.isPersistent,\n      };\n    },\n    [SET_DIRECT_PATH]() {\n      return {\n        ...state,\n        directPathToChild: action.path,\n        directPathLastUpdated: Date.now(),\n      };\n    },\n    [SET_FOCUSED_FILTER_FIELD]() {\n      const { focusedFilterField } = state;\n      if (action.chartId && action.column) {\n        focusedFilterField.push({\n          chartId: action.chartId,\n          column: action.column,\n        });\n      } else {\n        focusedFilterField.shift();\n      }\n      return {\n        ...state,\n        focusedFilterField,\n      };\n    },\n  };\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}\n"]},"metadata":{},"sourceType":"module"}