{"ast":null,"code":"import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\nCol,\nCollapse,\nDropdownButton,\nLabel,\nMenuItem,\nOverlayTrigger,\nRow,\nTooltip,\nWell } from\n'react-bootstrap';\nimport { t } from '@superset-ui/translation';\nimport { ColumnOption, MetricOption } from '@superset-ui/chart-controls';\nimport ControlHeader from '../ControlHeader';\nimport DatasourceModal from '../../../datasource/DatasourceModal';\nimport ChangeDatasourceModal from '../../../datasource/ChangeDatasourceModal';\nimport TooltipWrapper from '../../../components/TooltipWrapper';\nimport './DatasourceControl.less';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.string,\n  datasource: PropTypes.object.isRequired,\n  onDatasourceSave: PropTypes.func };\n\n\nconst defaultProps = {\n  onChange: () => {},\n  onDatasourceSave: null,\n  value: null };\n\n\nclass DatasourceControl extends React.PureComponent {\n  constructor(props) {var _context, _context2, _context3, _context4;\n    super(props);\n    this.state = {\n      showEditDatasourceModal: false,\n      showChangeDatasourceModal: false,\n      menuExpanded: false };\n\n    this.toggleChangeDatasourceModal = _bindInstanceProperty(_context = this.toggleChangeDatasourceModal).call(_context,\n    this);\n\n    this.toggleEditDatasourceModal = _bindInstanceProperty(_context2 = this.toggleEditDatasourceModal).call(_context2, this);\n    this.toggleShowDatasource = _bindInstanceProperty(_context3 = this.toggleShowDatasource).call(_context3, this);\n    this.renderDatasource = _bindInstanceProperty(_context4 = this.renderDatasource).call(_context4, this);\n  }\n\n  toggleShowDatasource() {\n    this.setState(({ showDatasource }) => ({\n      showDatasource: !showDatasource }));\n\n  }\n\n  toggleChangeDatasourceModal() {\n    this.setState(({ showChangeDatasourceModal }) => ({\n      showChangeDatasourceModal: !showChangeDatasourceModal }));\n\n  }\n\n  toggleEditDatasourceModal() {\n    this.setState(({ showEditDatasourceModal }) => ({\n      showEditDatasourceModal: !showEditDatasourceModal }));\n\n  }\n\n  renderDatasource() {var _context5, _context6;\n    const datasource = this.props.datasource;\n    return (\n      ___EmotionJSX(\"div\", { className: \"m-t-10\" },\n      ___EmotionJSX(Well, { className: \"m-t-0\" },\n      ___EmotionJSX(\"div\", { className: \"m-b-10\" },\n      ___EmotionJSX(Label, null,\n      ___EmotionJSX(\"i\", { className: \"fa fa-database\" }), \" \", datasource.database.backend), \" \" +\n\n      datasource.database.name + \" \"),\n\n      ___EmotionJSX(Row, { className: \"datasource-container\" },\n      ___EmotionJSX(Col, { md: 6 },\n      ___EmotionJSX(\"strong\", null, \"Columns\"),\n      _mapInstanceProperty(_context5 = datasource.columns).call(_context5, (col) =>\n      ___EmotionJSX(\"div\", { key: col.column_name },\n      ___EmotionJSX(ColumnOption, { showType: true, column: col })))),\n\n\n\n      ___EmotionJSX(Col, { md: 6 },\n      ___EmotionJSX(\"strong\", null, \"Metrics\"),\n      _mapInstanceProperty(_context6 = datasource.metrics).call(_context6, (m) =>\n      ___EmotionJSX(\"div\", { key: m.metric_name },\n      ___EmotionJSX(MetricOption, { metric: m, showType: true }))))))));\n\n\n\n\n\n\n\n  }\n\n  render() {\n    const { showChangeDatasourceModal, showEditDatasourceModal } = this.state;\n    const { datasource, onChange, onDatasourceSave, value } = this.props;\n    return (\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(ControlHeader, this.props),\n      ___EmotionJSX(\"div\", { className: \"btn-group label-dropdown\" },\n      ___EmotionJSX(TooltipWrapper, {\n        label: \"change-datasource\",\n        tooltip: t('Click to change the datasource') },\n\n      ___EmotionJSX(DropdownButton, {\n        title: datasource.name,\n        className: \"label label-default label-btn m-r-5\",\n        bsSize: \"sm\",\n        id: \"datasource_menu\" },\n\n      ___EmotionJSX(MenuItem, { eventKey: \"3\", onClick: this.toggleChangeDatasourceModal },\n      t('Change Datasource')),\n\n      datasource.type === 'table' &&\n      ___EmotionJSX(MenuItem, {\n        eventKey: \"3\",\n        href: \"/superset/sqllab?datasourceKey=\" + value,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\" },\n\n      t('Explore in SQL Lab')),\n\n\n      !!this.props.onDatasourceSave &&\n      ___EmotionJSX(MenuItem, { eventKey: \"3\", onClick: this.toggleEditDatasourceModal },\n      t('Edit Datasource')))),\n\n\n\n\n      ___EmotionJSX(OverlayTrigger, {\n        placement: \"right\",\n        overlay:\n        ___EmotionJSX(Tooltip, { id: 'toggle-datasource-tooltip' },\n        t('Expand/collapse datasource configuration')) },\n\n\n\n      ___EmotionJSX(\"a\", { href: \"#\" },\n      ___EmotionJSX(\"i\", {\n        className: \"fa fa-\" + (\n        this.state.showDatasource ? 'minus' : 'plus') + \"-square m-r-5 m-l-5 m-t-4\",\n\n        onClick: this.toggleShowDatasource })))),\n\n\n\n\n      ___EmotionJSX(Collapse, { in: this.state.showDatasource },\n      this.renderDatasource()),\n\n      ___EmotionJSX(DatasourceModal, {\n        datasource: datasource,\n        show: showEditDatasourceModal,\n        onDatasourceSave: onDatasourceSave,\n        onHide: this.toggleEditDatasourceModal }),\n\n      ___EmotionJSX(ChangeDatasourceModal, {\n        onDatasourceSave: onDatasourceSave,\n        onHide: this.toggleChangeDatasourceModal,\n        show: showChangeDatasourceModal,\n        onChange: onChange })));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nDatasourceControl.propTypes = propTypes;\nDatasourceControl.defaultProps = defaultProps;const _default =\n\nDatasourceControl;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/DatasourceControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/DatasourceControl.jsx\");reactHotLoader.register(DatasourceControl, \"DatasourceControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/DatasourceControl.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/DatasourceControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}