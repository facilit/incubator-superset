{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _isFunction from \"lodash/isFunction\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/ColorSchemeControl.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { CreatableSelect } from 'src/components/Select';\nimport ControlHeader from '../ControlHeader';\nimport TooltipWrapper from '../../../components/TooltipWrapper';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  description: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func,\n  value: PropTypes.string,\n  default: PropTypes.string,\n  choices: PropTypes.oneOfType([\n  PropTypes.arrayOf(PropTypes.array),\n  PropTypes.func]).\n  isRequired,\n  schemes: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired,\n  isLinear: PropTypes.bool };\n\n\nconst defaultProps = {\n  choices: [],\n  schemes: {},\n  onChange: () => {} };\n\n\nexport default class ColorSchemeControl extends React.PureComponent {\n  constructor(props) {var _context, _context2;\n    super(props);\n    this.state = {\n      scheme: this.props.value };\n\n\n    this.onChange = _bindInstanceProperty(_context = this.onChange).call(_context, this);\n    this.renderOption = _bindInstanceProperty(_context2 = this.renderOption).call(_context2, this);\n  }\n\n  onChange(option) {\n    const optionValue = option ? option.value : null;\n    this.props.onChange(optionValue);\n    this.setState({ scheme: optionValue });\n  }\n\n  renderOption(key) {\n    const { isLinear, schemes } = this.props;\n    const schemeLookup = _isFunction(schemes) ? schemes() : schemes;\n    const currentScheme = schemeLookup[key.value || defaultProps.value];\n\n    // For categorical scheme, display all the colors\n    // For sequential scheme, show 10 or interpolate to 10.\n    // Sequential schemes usually have at most 10 colors.\n    let colors = [];\n    if (currentScheme) {\n      colors = isLinear ? currentScheme.getColors(10) : currentScheme.colors;\n    }\n\n    return (\n      ___EmotionJSX(TooltipWrapper, {\n        label: currentScheme.id + \"-tooltip\",\n        tooltip: currentScheme.label, __source: { fileName: _jsxFileName, lineNumber: 78 }, __self: this },\n\n      ___EmotionJSX(\"ul\", { className: \"color-scheme-container\", __source: { fileName: _jsxFileName, lineNumber: 82 }, __self: this },\n      _mapInstanceProperty(colors).call(colors, (color, i) =>\n      ___EmotionJSX(\"li\", {\n        key: currentScheme.id + \"-\" + i,\n        style: {\n          backgroundColor: color,\n          border: \"1px solid \" + (color === 'white' ? 'black' : color) }, __source: { fileName: _jsxFileName, lineNumber: 84 }, __self: this }, \"\\xA0\")))));\n\n\n\n\n\n\n\n\n  }\n\n  render() {var _context3;\n    const { choices } = this.props;\n    const options = _mapInstanceProperty(_context3 = _isFunction(choices) ? choices() : choices).call(_context3, choice => ({\n      value: choice[0],\n      label: choice[1] }));\n\n\n    const selectProps = {\n      multi: false,\n      name: \"select-\" + this.props.name,\n      placeholder: \"Select (\" + options.length + \")\",\n      default: this.props.default,\n      options,\n      value: this.props.value,\n      autosize: false,\n      clearable: false,\n      onChange: this.onChange,\n      optionRenderer: this.renderOption,\n      valueRenderer: this.renderOption };\n\n    return (\n      ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 120 }, __self: this },\n      ___EmotionJSX(ControlHeader, _extends({}, this.props, { __source: { fileName: _jsxFileName, lineNumber: 121 }, __self: this })),\n      ___EmotionJSX(CreatableSelect, _extends({}, selectProps, { __source: { fileName: _jsxFileName, lineNumber: 122 }, __self: this }))));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nColorSchemeControl.propTypes = propTypes;\nColorSchemeControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/ColorSchemeControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/ColorSchemeControl.jsx\");reactHotLoader.register(ColorSchemeControl, \"ColorSchemeControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/ColorSchemeControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/ColorSchemeControl.jsx"],"names":["React","PropTypes","CreatableSelect","ControlHeader","TooltipWrapper","propTypes","description","string","label","isRequired","name","onChange","func","value","default","choices","oneOfType","arrayOf","array","schemes","object","isLinear","bool","defaultProps","ColorSchemeControl","PureComponent","constructor","props","state","scheme","renderOption","option","optionValue","setState","key","schemeLookup","currentScheme","colors","getColors","id","color","i","backgroundColor","border","render","options","choice","selectProps","multi","placeholder","length","autosize","clearable","optionRenderer","valueRenderer"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isFunction } from 'lodash';\nimport { CreatableSelect } from 'src/components/Select';\nimport ControlHeader from '../ControlHeader';\nimport TooltipWrapper from '../../../components/TooltipWrapper';\n\nconst propTypes = {\n  description: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func,\n  value: PropTypes.string,\n  default: PropTypes.string,\n  choices: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.array),\n    PropTypes.func,\n  ]).isRequired,\n  schemes: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired,\n  isLinear: PropTypes.bool,\n};\n\nconst defaultProps = {\n  choices: [],\n  schemes: {},\n  onChange: () => {},\n};\n\nexport default class ColorSchemeControl extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      scheme: this.props.value,\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.renderOption = this.renderOption.bind(this);\n  }\n\n  onChange(option) {\n    const optionValue = option ? option.value : null;\n    this.props.onChange(optionValue);\n    this.setState({ scheme: optionValue });\n  }\n\n  renderOption(key) {\n    const { isLinear, schemes } = this.props;\n    const schemeLookup = isFunction(schemes) ? schemes() : schemes;\n    const currentScheme = schemeLookup[key.value || defaultProps.value];\n\n    // For categorical scheme, display all the colors\n    // For sequential scheme, show 10 or interpolate to 10.\n    // Sequential schemes usually have at most 10 colors.\n    let colors = [];\n    if (currentScheme) {\n      colors = isLinear ? currentScheme.getColors(10) : currentScheme.colors;\n    }\n\n    return (\n      <TooltipWrapper\n        label={`${currentScheme.id}-tooltip`}\n        tooltip={currentScheme.label}\n      >\n        <ul className=\"color-scheme-container\">\n          {colors.map((color, i) => (\n            <li\n              key={`${currentScheme.id}-${i}`}\n              style={{\n                backgroundColor: color,\n                border: `1px solid ${color === 'white' ? 'black' : color}`,\n              }}\n            >\n              &nbsp;\n            </li>\n          ))}\n        </ul>\n      </TooltipWrapper>\n    );\n  }\n\n  render() {\n    const { choices } = this.props;\n    const options = (isFunction(choices) ? choices() : choices).map(choice => ({\n      value: choice[0],\n      label: choice[1],\n    }));\n\n    const selectProps = {\n      multi: false,\n      name: `select-${this.props.name}`,\n      placeholder: `Select (${options.length})`,\n      default: this.props.default,\n      options,\n      value: this.props.value,\n      autosize: false,\n      clearable: false,\n      onChange: this.onChange,\n      optionRenderer: this.renderOption,\n      valueRenderer: this.renderOption,\n    };\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <CreatableSelect {...selectProps} />\n      </div>\n    );\n  }\n}\n\nColorSchemeControl.propTypes = propTypes;\nColorSchemeControl.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}