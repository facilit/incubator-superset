{"ast":null,"code":"import \"core-js/modules/es.promise\";import \"core-js/modules/es.regexp.to-string\";import \"core-js/modules/es.string.replace\";import \"core-js/modules/es.string.search\";import \"core-js/modules/es.string.split\";import _Object$values from \"@babel/runtime-corejs3/core-js-stable/object/values\";import _URL from \"@babel/runtime-corejs3/core-js-stable/url\";import _Promise from \"@babel/runtime-corejs3/core-js-stable/promise\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\nimport { SupersetClient } from '@superset-ui/connection';\nimport getClientErrorObject from './getClientErrorObject';\n\n// ATTENTION: If you change any constants, make sure to also change constants.py\n\nexport const NULL_STRING = '<NULL>';\n\nexport function getParamFromQuery(query, param) {\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i += 1) {\n    const pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === param) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\n\nexport function storeQuery(query) {\n  return SupersetClient.post({\n    endpoint: '/kv/store/',\n    postPayload: { data: query } }).\n  then(response => {\n    const baseUrl = window.location.origin + window.location.pathname;\n    const url = baseUrl + \"?id=\" + response.json.id;\n    return url;\n  });\n}\n\nexport function getParamsFromUrl() {\n  const hash = window.location.search;\n  const params = hash.split('?')[1].split('&');\n  const newParams = {};\n  _forEachInstanceProperty(params).call(params, p => {\n    const value = p.split('=')[1].replace(/\\+/g, ' ');\n    const key = p.split('=')[0];\n    newParams[key] = value;\n  });\n  return newParams;\n}\n\nexport function getShortUrl(longUrl) {\n  return SupersetClient.post({\n    endpoint: '/r/shortner/',\n    postPayload: { data: \"/\" + longUrl }, // note: url should contain 2x '/' to redirect properly\n    parseMethod: 'text',\n    stringify: false // the url saves with an extra set of string quotes without this\n  }).\n  then(({ text }) => text).\n  catch((response) =>\n  getClientErrorObject(response).then(({ error, statusText }) =>\n  _Promise.reject(error || statusText)));\n\n\n}\n\nexport function supersetURL(rootUrl, getParams = {}) {\n  const url = new _URL(rootUrl, window.location.origin);\n  for (const k in getParams) {\n    url.searchParams.set(k, getParams[k]);\n  }\n  return url.href;\n}\n\nexport function optionLabel(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  } else if (opt === '') {\n    return '<empty string>';\n  } else if (opt === true) {\n    return '<true>';\n  } else if (opt === false) {\n    return '<false>';\n  } else if (typeof opt !== 'string' && opt.toString) {\n    return opt.toString();\n  }\n  return opt;\n}\n\nexport function optionValue(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  return opt;\n}\n\nexport function optionFromValue(opt) {\n  // From a list of options, handles special values & labels\n  return { value: optionValue(opt), label: optionLabel(opt) };\n}\n\nexport function prepareCopyToClipboardTabularData(data) {\n  let result = '';\n  for (let i = 0; i < data.length; ++i) {\n    result += _Object$values(data[i]).join('\\t') + '\\n';\n  }\n  return result;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(NULL_STRING, \"NULL_STRING\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamFromQuery, \"getParamFromQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(storeQuery, \"storeQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamsFromUrl, \"getParamsFromUrl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getShortUrl, \"getShortUrl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(supersetURL, \"supersetURL\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionLabel, \"optionLabel\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionValue, \"optionValue\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionFromValue, \"optionFromValue\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(prepareCopyToClipboardTabularData, \"prepareCopyToClipboardTabularData\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/utils/common.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}