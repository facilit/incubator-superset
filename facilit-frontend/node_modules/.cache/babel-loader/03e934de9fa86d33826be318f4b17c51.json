{"ast":null,"code":"import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                 * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                 * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                 * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                 * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                 * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                 * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                 * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                 *\n                                                                                                                                                                                                                                                                                                                                                                                                 *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                 *\n                                                                                                                                                                                                                                                                                                                                                                                                 * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                 * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                 * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                 * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                 * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                 * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                 */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\nimport CopyToClipboard from './CopyToClipboard';\nimport { getShortUrl } from '../utils/common';\nimport withToasts from '../messageToasts/enhancers/withToasts';\nimport ModalTrigger from './ModalTrigger';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  url: PropTypes.string,\n  emailSubject: PropTypes.string,\n  emailContent: PropTypes.string,\n  addDangerToast: PropTypes.func.isRequired,\n  isMenuItem: PropTypes.bool,\n  title: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired };\n\n\nclass URLShortLinkModal extends React.Component {\n  constructor(props) {var _context, _context2, _context3;\n    super(props);\n    this.state = {\n      shortUrl: '' };\n\n    this.modal = null;\n    this.setModalRef = _bindInstanceProperty(_context = this.setModalRef).call(_context, this);\n    this.onShortUrlSuccess = _bindInstanceProperty(_context2 = this.onShortUrlSuccess).call(_context2, this);\n    this.getCopyUrl = _bindInstanceProperty(_context3 = this.getCopyUrl).call(_context3, this);\n  }\n\n  onShortUrlSuccess(shortUrl) {\n    this.setState(() => ({ shortUrl }));\n  }\n\n  setModalRef(ref) {\n    this.modal = ref;\n  }\n\n  getCopyUrl() {\n    getShortUrl(this.props.url).\n    then(this.onShortUrlSuccess).\n    catch(this.props.addDangerToast);\n  }\n\n  render() {\n    const emailBody = t('%s%s', this.props.emailContent, this.state.shortUrl);\n    return (\n      ___EmotionJSX(ModalTrigger, {\n        ref: this.setModalRef,\n        isMenuItem: this.props.isMenuItem,\n        triggerNode: this.props.triggerNode,\n        beforeOpen: this.getCopyUrl,\n        modalTitle: this.props.title || t('Share Dashboard'),\n        modalBody:\n        ___EmotionJSX(\"div\", null,\n        ___EmotionJSX(CopyToClipboard, {\n          text: this.state.shortUrl,\n          copyNode:\n          ___EmotionJSX(\"i\", { className: \"fa fa-clipboard\", title: t('Copy to clipboard') }) }), \"\\xA0\\xA0\",\n\n\n\n        ___EmotionJSX(\"a\", {\n          href: \"mailto:?Subject=\" + this.props.emailSubject + \"%20&Body=\" + emailBody },\n\n        ___EmotionJSX(\"i\", { className: \"fa fa-envelope\" }))) }));\n\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nURLShortLinkModal.defaultProps = {\n  url: window.location.href.substring(window.location.origin.length),\n  emailSubject: '',\n  emailContent: '' };\n\n\nURLShortLinkModal.propTypes = propTypes;const _default =\n\nwithToasts(URLShortLinkModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/URLShortLinkModal.jsx\");reactHotLoader.register(URLShortLinkModal, \"URLShortLinkModal\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/URLShortLinkModal.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/URLShortLinkModal.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/URLShortLinkModal.jsx"],"names":["React","PropTypes","t","CopyToClipboard","getShortUrl","withToasts","ModalTrigger","propTypes","url","string","emailSubject","emailContent","addDangerToast","func","isRequired","isMenuItem","bool","title","triggerNode","node","URLShortLinkModal","Component","constructor","props","state","shortUrl","modal","setModalRef","onShortUrlSuccess","getCopyUrl","setState","ref","then","catch","render","emailBody","defaultProps","window","location","href","substring","origin","length"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\nimport CopyToClipboard from './CopyToClipboard';\nimport { getShortUrl } from '../utils/common';\nimport withToasts from '../messageToasts/enhancers/withToasts';\nimport ModalTrigger from './ModalTrigger';\n\nconst propTypes = {\n  url: PropTypes.string,\n  emailSubject: PropTypes.string,\n  emailContent: PropTypes.string,\n  addDangerToast: PropTypes.func.isRequired,\n  isMenuItem: PropTypes.bool,\n  title: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired,\n};\n\nclass URLShortLinkModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shortUrl: '',\n    };\n    this.modal = null;\n    this.setModalRef = this.setModalRef.bind(this);\n    this.onShortUrlSuccess = this.onShortUrlSuccess.bind(this);\n    this.getCopyUrl = this.getCopyUrl.bind(this);\n  }\n\n  onShortUrlSuccess(shortUrl) {\n    this.setState(() => ({ shortUrl }));\n  }\n\n  setModalRef(ref) {\n    this.modal = ref;\n  }\n\n  getCopyUrl() {\n    getShortUrl(this.props.url)\n      .then(this.onShortUrlSuccess)\n      .catch(this.props.addDangerToast);\n  }\n\n  render() {\n    const emailBody = t('%s%s', this.props.emailContent, this.state.shortUrl);\n    return (\n      <ModalTrigger\n        ref={this.setModalRef}\n        isMenuItem={this.props.isMenuItem}\n        triggerNode={this.props.triggerNode}\n        beforeOpen={this.getCopyUrl}\n        modalTitle={this.props.title || t('Share Dashboard')}\n        modalBody={\n          <div>\n            <CopyToClipboard\n              text={this.state.shortUrl}\n              copyNode={\n                <i className=\"fa fa-clipboard\" title={t('Copy to clipboard')} />\n              }\n            />\n            &nbsp;&nbsp;\n            <a\n              href={`mailto:?Subject=${this.props.emailSubject}%20&Body=${emailBody}`}\n            >\n              <i className=\"fa fa-envelope\" />\n            </a>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nURLShortLinkModal.defaultProps = {\n  url: window.location.href.substring(window.location.origin.length),\n  emailSubject: '',\n  emailContent: '',\n};\n\nURLShortLinkModal.propTypes = propTypes;\n\nexport default withToasts(URLShortLinkModal);\n"]},"metadata":{},"sourceType":"module"}