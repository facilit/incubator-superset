{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\n\nimport Select from '../../../components/AsyncSelect';\nimport ControlHeader from '../ControlHeader';\nimport withToasts from '../../../messageToasts/enhancers/withToasts';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  dataEndpoint: PropTypes.string.isRequired,\n  multi: PropTypes.bool,\n  mutator: PropTypes.func,\n  onAsyncErrorMessage: PropTypes.string,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number,\n  PropTypes.arrayOf(PropTypes.string),\n  PropTypes.arrayOf(PropTypes.number)]),\n\n  addDangerToast: PropTypes.func.isRequired };\n\n\nconst defaultProps = {\n  multi: true,\n  onAsyncErrorMessage: t('Error while fetching data'),\n  onChange: () => {},\n  placeholder: t('Select ...') };\n\n\nconst SelectAsyncControl = props => {\n  const {\n    value,\n    onChange,\n    dataEndpoint,\n    multi,\n    mutator,\n    placeholder,\n    onAsyncErrorMessage } =\n  props;\n  const onSelectionChange = options => {\n    let val;\n    if (multi) {\n      val = _mapInstanceProperty(options).call(options, option => option.value);\n    } else if (options) {\n      val = options.value;\n    } else {\n      val = null;\n    }\n    onChange(val);\n  };\n\n  return (\n    ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 73 }, __self: this },\n    ___EmotionJSX(ControlHeader, _extends({}, props, { __source: { fileName: _jsxFileName, lineNumber: 74 }, __self: this })),\n    ___EmotionJSX(Select, {\n      dataEndpoint: dataEndpoint,\n      onChange: onSelectionChange,\n      onAsyncError: (errorMsg) =>\n      this.props.addDangerToast(onAsyncErrorMessage + ': ' + errorMsg),\n\n      mutator: mutator,\n      multi: multi,\n      value: value,\n      placeholder: placeholder,\n      valueRenderer: v => ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 85 }, __self: this }, v.label), __source: { fileName: _jsxFileName, lineNumber: 75 }, __self: this })));\n\n\n\n};\n\nSelectAsyncControl.propTypes = propTypes;\nSelectAsyncControl.defaultProps = defaultProps;const _default =\n\nwithToasts(SelectAsyncControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx\");reactHotLoader.register(SelectAsyncControl, \"SelectAsyncControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/SelectAsyncControl.jsx"],"names":["React","PropTypes","t","Select","ControlHeader","withToasts","propTypes","dataEndpoint","string","isRequired","multi","bool","mutator","func","onAsyncErrorMessage","onChange","placeholder","value","oneOfType","number","arrayOf","addDangerToast","defaultProps","SelectAsyncControl","props","onSelectionChange","options","val","option","errorMsg","v","label"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\n\nimport Select from '../../../components/AsyncSelect';\nimport ControlHeader from '../ControlHeader';\nimport withToasts from '../../../messageToasts/enhancers/withToasts';\n\nconst propTypes = {\n  dataEndpoint: PropTypes.string.isRequired,\n  multi: PropTypes.bool,\n  mutator: PropTypes.func,\n  onAsyncErrorMessage: PropTypes.string,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  addDangerToast: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  multi: true,\n  onAsyncErrorMessage: t('Error while fetching data'),\n  onChange: () => {},\n  placeholder: t('Select ...'),\n};\n\nconst SelectAsyncControl = props => {\n  const {\n    value,\n    onChange,\n    dataEndpoint,\n    multi,\n    mutator,\n    placeholder,\n    onAsyncErrorMessage,\n  } = props;\n  const onSelectionChange = options => {\n    let val;\n    if (multi) {\n      val = options.map(option => option.value);\n    } else if (options) {\n      val = options.value;\n    } else {\n      val = null;\n    }\n    onChange(val);\n  };\n\n  return (\n    <div>\n      <ControlHeader {...props} />\n      <Select\n        dataEndpoint={dataEndpoint}\n        onChange={onSelectionChange}\n        onAsyncError={errorMsg =>\n          this.props.addDangerToast(onAsyncErrorMessage + ': ' + errorMsg)\n        }\n        mutator={mutator}\n        multi={multi}\n        value={value}\n        placeholder={placeholder}\n        valueRenderer={v => <div>{v.label}</div>}\n      />\n    </div>\n  );\n};\n\nSelectAsyncControl.propTypes = propTypes;\nSelectAsyncControl.defaultProps = defaultProps;\n\nexport default withToasts(SelectAsyncControl);\n"]},"metadata":{},"sourceType":"module"}