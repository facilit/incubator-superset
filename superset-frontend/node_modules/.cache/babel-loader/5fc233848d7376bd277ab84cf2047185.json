{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { ListGroup, ListGroupItem } from 'react-bootstrap';\nimport shortid from 'shortid';\nimport {\nSortableContainer,\nSortableHandle,\nSortableElement,\narrayMove } from\n'react-sortable-hoc';\n\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport ControlHeader from '../ControlHeader';\nimport controlMap from './';\nimport './CollectionControl.less';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  description: PropTypes.string,\n  placeholder: PropTypes.string,\n  addTooltip: PropTypes.string,\n  itemGenerator: PropTypes.func,\n  keyAccessor: PropTypes.func,\n  onChange: PropTypes.func,\n  value: PropTypes.oneOfType([PropTypes.array]),\n  isFloat: PropTypes.bool,\n  isInt: PropTypes.bool,\n  controlName: PropTypes.string.isRequired };\n\n\nconst defaultProps = {\n  label: null,\n  description: null,\n  onChange: () => {},\n  placeholder: 'Empty collection',\n  itemGenerator: () => ({ key: shortid.generate() }),\n  keyAccessor: o => o.key,\n  value: [],\n  addTooltip: 'Add an item' };\n\nconst SortableListGroupItem = SortableElement(ListGroupItem);\nconst SortableListGroup = SortableContainer(ListGroup);\nconst SortableDragger = SortableHandle(() =>\n___EmotionJSX(\"i\", { className: \"fa fa-bars text-primary\", style: { cursor: 'ns-resize' } }));\n\n\nexport default class CollectionControl extends React.Component {\n  constructor(props) {var _context;\n    super(props);\n    this.onAdd = _bindInstanceProperty(_context = this.onAdd).call(_context, this);\n  }\n  onChange(i, value) {\n    _Object$assign(this.props.value[i], value);\n    this.props.onChange(this.props.value);\n  }\n  onAdd() {var _context2;\n    this.props.onChange(_concatInstanceProperty(_context2 = this.props.value).call(_context2, [this.props.itemGenerator()]));\n  }\n  onSortEnd({ oldIndex, newIndex }) {\n    this.props.onChange(arrayMove(this.props.value, oldIndex, newIndex));\n  }\n  removeItem(i) {var _context3;\n    this.props.onChange(_filterInstanceProperty(_context3 = this.props.value).call(_context3, (o, ix) => i !== ix));\n  }\n  renderList() {var _context4, _context5;\n    if (this.props.value.length === 0) {\n      return ___EmotionJSX(\"div\", { className: \"text-muted\" }, this.props.placeholder);\n    }\n    const Control = controlMap[this.props.controlName];\n    return (\n      ___EmotionJSX(SortableListGroup, {\n        useDragHandle: true,\n        lockAxis: \"y\",\n        onSortEnd: _bindInstanceProperty(_context4 = this.onSortEnd).call(_context4, this) },\n\n      _mapInstanceProperty(_context5 = this.props.value).call(_context5, (o, i) => {var _context6, _context7;return (\n          ___EmotionJSX(SortableListGroupItem, {\n            className: \"clearfix\",\n            key: this.props.keyAccessor(o),\n            index: i },\n\n          ___EmotionJSX(\"div\", { className: \"pull-left m-r-5\" },\n          ___EmotionJSX(SortableDragger, null)),\n\n          ___EmotionJSX(\"div\", { className: \"pull-left\" },\n          ___EmotionJSX(Control, _extends({},\n          this.props,\n          o, {\n            onChange: _bindInstanceProperty(_context6 = this.onChange).call(_context6, this, i) }))),\n\n\n          ___EmotionJSX(\"div\", { className: \"pull-right\" },\n          ___EmotionJSX(InfoTooltipWithTrigger, {\n            icon: \"times\",\n            label: \"remove-item\",\n            tooltip: \"remove item\",\n            bsStyle: \"primary\",\n            onClick: _bindInstanceProperty(_context7 = this.removeItem).call(_context7, this, i) }))));})));\n\n\n\n\n\n\n  }\n  render() {\n    return (\n      ___EmotionJSX(\"div\", { className: \"CollectionControl\" },\n      ___EmotionJSX(ControlHeader, this.props),\n      this.renderList(),\n      ___EmotionJSX(InfoTooltipWithTrigger, {\n        icon: \"plus-circle\",\n        label: \"add-item\",\n        tooltip: this.props.addTooltip,\n        bsStyle: \"primary\",\n        className: \"fa-lg\",\n        onClick: this.onAdd })));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nCollectionControl.propTypes = propTypes;\nCollectionControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");reactHotLoader.register(SortableListGroupItem, \"SortableListGroupItem\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");reactHotLoader.register(SortableListGroup, \"SortableListGroup\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");reactHotLoader.register(SortableDragger, \"SortableDragger\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");reactHotLoader.register(CollectionControl, \"CollectionControl\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/controls/CollectionControl.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}