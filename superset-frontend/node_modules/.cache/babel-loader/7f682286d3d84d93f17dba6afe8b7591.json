{"ast":null,"code":"import \"core-js/modules/es.promise\";import \"core-js/modules/es.promise.finally\";import \"core-js/modules/es.string.search\";import \"core-js/modules/web.dom-collections.iterator\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";import _defineProperty from \"@babel/runtime-corejs3/helpers/defineProperty\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/translation';\nimport { SupersetClient } from '@superset-ui/connection';\nimport moment from 'moment';\n\nimport ListView from 'src/components/ListView/ListView';\nimport withToasts from 'src/messageToasts/enhancers/withToasts';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst PAGE_SIZE = 25;\n\nclass DashboardTable extends React.PureComponent {constructor(...args) {super(...args);_defineProperty(this, \"state\",\n\n\n\n\n\n    {\n      dashboards: [],\n      dashboard_count: 0,\n      loading: false });_defineProperty(this, \"columns\",\n\n\n\n\n\n\n\n\n\n\n\n\n\n    [\n    {\n      accessor: 'dashboard_title',\n      Header: 'Dashboard',\n      sortable: true,\n      Cell: ({\n        row: {\n          original: { url, dashboard_title: dashboardTitle } } }) =>\n\n      ___EmotionJSX(\"a\", { href: url }, dashboardTitle) },\n\n    {\n      accessor: 'changed_by_fk',\n      Header: 'Creator',\n      sortable: true,\n      Cell: ({\n        row: {\n          original: { changed_by_name: changedByName, changedByUrl } } }) =>\n\n      ___EmotionJSX(\"a\", { href: changedByUrl }, changedByName) },\n\n    {\n      accessor: 'changed_on',\n      Header: 'Modified',\n      sortable: true,\n      Cell: ({\n        row: {\n          original: { changed_on: changedOn } } }) =>\n\n      ___EmotionJSX(\"span\", { className: \"no-wrap\" }, moment(changedOn).fromNow()) }]);_defineProperty(this, \"initialSort\",\n\n\n\n    [{ id: 'changed_on', desc: true }]);_defineProperty(this, \"fetchData\",\n\n    ({ pageIndex, pageSize, sortBy, filters }) => {var _context, _context2;\n      this.setState({ loading: true });\n      const filterExps = _concatInstanceProperty(_context = _mapInstanceProperty(_context2 = _Object$keys(filters)).call(_context2,\n      fk => ({\n        col: fk,\n        opr: filters[fk].filterId,\n        value: filters[fk].filterValue }))).call(_context,\n\n\n      this.props.search ?\n      [\n      {\n        col: 'dashboard_title',\n        opr: 'ct',\n        value: this.props.search }] :\n\n\n      []);\n\n\n      const queryParams = _JSON$stringify(_Object$assign({\n        order_column: sortBy[0].id,\n        order_direction: sortBy[0].desc ? 'desc' : 'asc',\n        page: pageIndex,\n        page_size: pageSize },\n      filterExps.length ? { filters: filterExps } : {}));\n\n\n      return SupersetClient.get({\n        endpoint: \"/api/v1/dashboard/?q=\" + queryParams }).\n\n      then(({ json }) => {\n        this.setState({ dashboards: json.result, dashboard_count: json.count });\n      }).\n      catch(response => {\n        if (response.status === 401) {\n          this.props.addDangerToast(\n          t(\n          \"You don't have the necessary permissions to load dashboards. Please contact your administrator.\"));\n\n\n        } else {\n          this.props.addDangerToast(\n          t('An error occurred while fetching Dashboards'));\n\n        }\n      }).\n      finally(() => this.setState({ loading: false }));\n    });_defineProperty(this, \"fetchDataDebounced\",\n\n    _debounce(this.fetchData, 200));}componentDidUpdate(prevProps) {if (prevProps.search !== this.props.search) {this.fetchDataDebounced({ pageSize: PAGE_SIZE, pageIndex: 0, sortBy: this.initialSort, filters: {} });}}\n\n  render() {\n    return (\n      ___EmotionJSX(ListView, {\n        columns: this.columns,\n        data: this.state.dashboards,\n        count: this.state.dashboard_count,\n        pageSize: PAGE_SIZE,\n        fetchData: this.fetchData,\n        loading: this.state.loading,\n        initialSort: this.initialSort }));\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}_defineProperty(DashboardTable, \"propTypes\", { addDangerToast: PropTypes.func.isRequired, search: PropTypes.string });const _default =\nwithToasts(DashboardTable);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/welcome/DashboardTable.jsx\");reactHotLoader.register(DashboardTable, \"DashboardTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/welcome/DashboardTable.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/welcome/DashboardTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}