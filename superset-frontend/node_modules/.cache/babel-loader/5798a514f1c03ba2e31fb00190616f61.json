{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";import _sliceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/slice\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport ComponentLookup from '../components/gridComponents';\nimport getDetailedComponentWidth from '../util/getDetailedComponentWidth';\nimport { getActiveFilters } from '../util/activeDashboardFilters';\nimport { componentShape } from '../util/propShapes';\nimport { COLUMN_TYPE, ROW_TYPE } from '../util/componentTypes';\n\nimport {\ncreateComponent,\ndeleteComponent,\nupdateComponents,\nhandleComponentDrop } from\n'../actions/dashboardLayout';\nimport { setDirectPathToChild } from '../actions/dashboardState';\nimport { logEvent } from '../../logger/actions';\nimport { addDangerToast } from '../../messageToasts/actions';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  createComponent: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  directPathLastUpdated: PropTypes.number,\n  dashboardId: PropTypes.number.isRequired };\n\n\nconst defaultProps = {\n  directPathToChild: [],\n  directPathLastUpdated: 0,\n  isComponentVisible: true };\n\n\nfunction mapStateToProps(\n{ dashboardLayout: undoableLayout, dashboardState, dashboardInfo },\nownProps)\n{var _context;\n  const dashboardLayout = undoableLayout.present;\n  const { id, parentId } = ownProps;\n  const component = dashboardLayout[id];\n  const props = {\n    component,\n    parentComponent: dashboardLayout[parentId],\n    editMode: dashboardState.editMode,\n    undoLength: undoableLayout.past.length,\n    redoLength: undoableLayout.future.length,\n    filters: getActiveFilters(),\n    directPathToChild: dashboardState.directPathToChild,\n    directPathLastUpdated: dashboardState.directPathLastUpdated,\n    dashboardId: dashboardInfo.id,\n    filterFieldOnFocus:\n    dashboardState.focusedFilterField.length === 0 ?\n    {} :\n    _sliceInstanceProperty(_context = dashboardState.focusedFilterField).call(_context, -1).pop() };\n\n\n  // rows and columns need more data about their child dimensions\n  // doing this allows us to not pass the entire component lookup to all Components\n  if (component) {\n    const componentType = component.type;\n    if (componentType === ROW_TYPE || componentType === COLUMN_TYPE) {\n      const { occupiedWidth, minimumWidth } = getDetailedComponentWidth({\n        id,\n        components: dashboardLayout });\n\n\n      if (componentType === ROW_TYPE) props.occupiedColumnCount = occupiedWidth;\n      if (componentType === COLUMN_TYPE) props.minColumnWidth = minimumWidth;\n    }\n  }\n\n  return props;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    addDangerToast,\n    createComponent,\n    deleteComponent,\n    updateComponents,\n    handleComponentDrop,\n    setDirectPathToChild,\n    logEvent },\n\n  dispatch);\n\n}\n\nclass DashboardComponent extends React.PureComponent {\n  render() {\n    const { component } = this.props;\n    const Component = component ? ComponentLookup[component.type] : null;\n    return Component ? ___EmotionJSX(Component, _extends({}, this.props, { __source: { fileName: _jsxFileName, lineNumber: 119 }, __self: this })) : null;\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nDashboardComponent.propTypes = propTypes;\nDashboardComponent.defaultProps = defaultProps;const _default =\n\nconnect(mapStateToProps, mapDispatchToProps)(DashboardComponent);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");reactHotLoader.register(DashboardComponent, \"DashboardComponent\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/dashboard/containers/DashboardComponent.jsx"],"names":["React","PropTypes","bindActionCreators","connect","ComponentLookup","getDetailedComponentWidth","getActiveFilters","componentShape","COLUMN_TYPE","ROW_TYPE","createComponent","deleteComponent","updateComponents","handleComponentDrop","setDirectPathToChild","logEvent","addDangerToast","propTypes","component","isRequired","parentComponent","func","directPathToChild","arrayOf","string","directPathLastUpdated","number","dashboardId","defaultProps","isComponentVisible","mapStateToProps","dashboardLayout","undoableLayout","dashboardState","dashboardInfo","ownProps","present","id","parentId","props","editMode","undoLength","past","length","redoLength","future","filters","filterFieldOnFocus","focusedFilterField","pop","componentType","type","occupiedWidth","minimumWidth","components","occupiedColumnCount","minColumnWidth","mapDispatchToProps","dispatch","DashboardComponent","PureComponent","render","Component"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport ComponentLookup from '../components/gridComponents';\nimport getDetailedComponentWidth from '../util/getDetailedComponentWidth';\nimport { getActiveFilters } from '../util/activeDashboardFilters';\nimport { componentShape } from '../util/propShapes';\nimport { COLUMN_TYPE, ROW_TYPE } from '../util/componentTypes';\n\nimport {\n  createComponent,\n  deleteComponent,\n  updateComponents,\n  handleComponentDrop,\n} from '../actions/dashboardLayout';\nimport { setDirectPathToChild } from '../actions/dashboardState';\nimport { logEvent } from '../../logger/actions';\nimport { addDangerToast } from '../../messageToasts/actions';\n\nconst propTypes = {\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  createComponent: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  directPathLastUpdated: PropTypes.number,\n  dashboardId: PropTypes.number.isRequired,\n};\n\nconst defaultProps = {\n  directPathToChild: [],\n  directPathLastUpdated: 0,\n  isComponentVisible: true,\n};\n\nfunction mapStateToProps(\n  { dashboardLayout: undoableLayout, dashboardState, dashboardInfo },\n  ownProps,\n) {\n  const dashboardLayout = undoableLayout.present;\n  const { id, parentId } = ownProps;\n  const component = dashboardLayout[id];\n  const props = {\n    component,\n    parentComponent: dashboardLayout[parentId],\n    editMode: dashboardState.editMode,\n    undoLength: undoableLayout.past.length,\n    redoLength: undoableLayout.future.length,\n    filters: getActiveFilters(),\n    directPathToChild: dashboardState.directPathToChild,\n    directPathLastUpdated: dashboardState.directPathLastUpdated,\n    dashboardId: dashboardInfo.id,\n    filterFieldOnFocus:\n      dashboardState.focusedFilterField.length === 0\n        ? {}\n        : dashboardState.focusedFilterField.slice(-1).pop(),\n  };\n\n  // rows and columns need more data about their child dimensions\n  // doing this allows us to not pass the entire component lookup to all Components\n  if (component) {\n    const componentType = component.type;\n    if (componentType === ROW_TYPE || componentType === COLUMN_TYPE) {\n      const { occupiedWidth, minimumWidth } = getDetailedComponentWidth({\n        id,\n        components: dashboardLayout,\n      });\n\n      if (componentType === ROW_TYPE) props.occupiedColumnCount = occupiedWidth;\n      if (componentType === COLUMN_TYPE) props.minColumnWidth = minimumWidth;\n    }\n  }\n\n  return props;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      addDangerToast,\n      createComponent,\n      deleteComponent,\n      updateComponents,\n      handleComponentDrop,\n      setDirectPathToChild,\n      logEvent,\n    },\n    dispatch,\n  );\n}\n\nclass DashboardComponent extends React.PureComponent {\n  render() {\n    const { component } = this.props;\n    const Component = component ? ComponentLookup[component.type] : null;\n    return Component ? <Component {...this.props} /> : null;\n  }\n}\n\nDashboardComponent.propTypes = propTypes;\nDashboardComponent.defaultProps = defaultProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DashboardComponent);\n"]},"metadata":{},"sourceType":"module"}