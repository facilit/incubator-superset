{"ast":null,"code":"import _bindInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/bind\";var _jsxFileName = \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/EmbedCodeButton.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, OverlayTrigger } from 'react-bootstrap';\nimport { t } from '@superset-ui/translation';\n\nimport CopyToClipboard from './../../components/CopyToClipboard';\nimport { getExploreLongUrl } from '../exploreUtils';import { jsx as ___EmotionJSX } from \"@emotion/core\";\n\nconst propTypes = {\n  latestQueryFormData: PropTypes.object.isRequired };\n\n\nexport default class EmbedCodeButton extends React.Component {\n  constructor(props) {var _context;\n    super(props);\n    this.state = {\n      height: '400',\n      width: '600' };\n\n    this.handleInputChange = _bindInstanceProperty(_context = this.handleInputChange).call(_context, this);\n  }\n\n  handleInputChange(e) {\n    const value = e.currentTarget.value;\n    const name = e.currentTarget.name;\n    const data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  generateEmbedHTML() {\n    const srcLink =\n    window.location.origin +\n    getExploreLongUrl(this.props.latestQueryFormData, 'standalone') + (\"&height=\" +\n    this.state.height);\n    return (\n      '<iframe\\n' + (\"  width=\\\"\" +\n      this.state.width + \"\\\"\\n\") + (\"  height=\\\"\" +\n      this.state.height + \"\\\"\\n\") +\n      '  seamless\\n' +\n      '  frameBorder=\"0\"\\n' +\n      '  scrolling=\"no\"\\n' + (\"  src=\\\"\" +\n      srcLink + \"\\\"\\n\") +\n      '>\\n' +\n      '</iframe>');\n\n  }\n\n  renderPopover() {\n    const html = this.generateEmbedHTML();\n    return (\n      ___EmotionJSX(Popover, { id: \"embed-code-popover\", __source: { fileName: _jsxFileName, lineNumber: 70 }, __self: this },\n      ___EmotionJSX(\"div\", { __source: { fileName: _jsxFileName, lineNumber: 71 }, __self: this },\n      ___EmotionJSX(\"div\", { className: \"row\", __source: { fileName: _jsxFileName, lineNumber: 72 }, __self: this },\n      ___EmotionJSX(\"div\", { className: \"col-sm-10\", __source: { fileName: _jsxFileName, lineNumber: 73 }, __self: this },\n      ___EmotionJSX(\"textarea\", {\n        name: \"embedCode\",\n        value: html,\n        rows: \"4\",\n        readOnly: true,\n        className: \"form-control input-sm\", __source: { fileName: _jsxFileName, lineNumber: 74 }, __self: this })),\n\n\n      ___EmotionJSX(\"div\", { className: \"col-sm-2\", __source: { fileName: _jsxFileName, lineNumber: 82 }, __self: this },\n      ___EmotionJSX(CopyToClipboard, {\n        shouldShowText: false,\n        text: html,\n        copyNode:\n        ___EmotionJSX(\"i\", {\n          className: \"fa fa-clipboard\",\n          title: t('Copy to clipboard'), __source: { fileName: _jsxFileName, lineNumber: 87 }, __self: this }), __source: { fileName: _jsxFileName, lineNumber: 83 }, __self: this }))),\n\n\n\n\n\n      ___EmotionJSX(\"br\", { __source: { fileName: _jsxFileName, lineNumber: 95 }, __self: this }),\n      ___EmotionJSX(\"div\", { className: \"row\", __source: { fileName: _jsxFileName, lineNumber: 96 }, __self: this },\n      ___EmotionJSX(\"div\", { className: \"col-md-6 col-sm-12\", __source: { fileName: _jsxFileName, lineNumber: 97 }, __self: this },\n      ___EmotionJSX(\"div\", { className: \"form-group\", __source: { fileName: _jsxFileName, lineNumber: 98 }, __self: this },\n      ___EmotionJSX(\"small\", { __source: { fileName: _jsxFileName, lineNumber: 99 }, __self: this },\n      ___EmotionJSX(\"label\", { className: \"control-label\", htmlFor: \"embed-height\", __source: { fileName: _jsxFileName, lineNumber: 100 }, __self: this },\n      t('Height'))),\n\n\n      ___EmotionJSX(\"input\", {\n        className: \"form-control input-sm\",\n        type: \"text\",\n        defaultValue: this.state.height,\n        name: \"height\",\n        onChange: this.handleInputChange, __source: { fileName: _jsxFileName, lineNumber: 104 }, __self: this }))),\n\n\n\n      ___EmotionJSX(\"div\", { className: \"col-md-6 col-sm-12\", __source: { fileName: _jsxFileName, lineNumber: 113 }, __self: this },\n      ___EmotionJSX(\"div\", { className: \"form-group\", __source: { fileName: _jsxFileName, lineNumber: 114 }, __self: this },\n      ___EmotionJSX(\"small\", { __source: { fileName: _jsxFileName, lineNumber: 115 }, __self: this },\n      ___EmotionJSX(\"label\", { className: \"control-label\", htmlFor: \"embed-width\", __source: { fileName: _jsxFileName, lineNumber: 116 }, __self: this },\n      t('Width'))),\n\n\n      ___EmotionJSX(\"input\", {\n        className: \"form-control input-sm\",\n        type: \"text\",\n        defaultValue: this.state.width,\n        name: \"width\",\n        onChange: this.handleInputChange,\n        id: \"embed-width\", __source: { fileName: _jsxFileName, lineNumber: 120 }, __self: this })))))));\n\n\n\n\n\n\n\n  }\n  render() {\n    return (\n      ___EmotionJSX(OverlayTrigger, {\n        trigger: \"click\",\n        rootClose: true,\n        placement: \"left\",\n        overlay: this.renderPopover(), __source: { fileName: _jsxFileName, lineNumber: 137 }, __self: this },\n\n      ___EmotionJSX(\"span\", { className: \"btn btn-default btn-sm\", \"data-test\": \"embed-code-button\", __source: { fileName: _jsxFileName, lineNumber: 143 }, __self: this },\n      ___EmotionJSX(\"i\", { className: \"fa fa-code\", __source: { fileName: _jsxFileName, lineNumber: 144 }, __self: this }), \"\\xA0\")));\n\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nEmbedCodeButton.propTypes = propTypes;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/EmbedCodeButton.jsx\");reactHotLoader.register(EmbedCodeButton, \"EmbedCodeButton\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/EmbedCodeButton.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/explore/components/EmbedCodeButton.jsx"],"names":["React","PropTypes","Popover","OverlayTrigger","t","CopyToClipboard","getExploreLongUrl","propTypes","latestQueryFormData","object","isRequired","EmbedCodeButton","Component","constructor","props","state","height","width","handleInputChange","e","value","currentTarget","name","data","setState","generateEmbedHTML","srcLink","window","location","origin","renderPopover","html","render"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, OverlayTrigger } from 'react-bootstrap';\nimport { t } from '@superset-ui/translation';\n\nimport CopyToClipboard from './../../components/CopyToClipboard';\nimport { getExploreLongUrl } from '../exploreUtils';\n\nconst propTypes = {\n  latestQueryFormData: PropTypes.object.isRequired,\n};\n\nexport default class EmbedCodeButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: '400',\n      width: '600',\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange(e) {\n    const value = e.currentTarget.value;\n    const name = e.currentTarget.name;\n    const data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  generateEmbedHTML() {\n    const srcLink =\n      window.location.origin +\n      getExploreLongUrl(this.props.latestQueryFormData, 'standalone') +\n      `&height=${this.state.height}`;\n    return (\n      '<iframe\\n' +\n      `  width=\"${this.state.width}\"\\n` +\n      `  height=\"${this.state.height}\"\\n` +\n      '  seamless\\n' +\n      '  frameBorder=\"0\"\\n' +\n      '  scrolling=\"no\"\\n' +\n      `  src=\"${srcLink}\"\\n` +\n      '>\\n' +\n      '</iframe>'\n    );\n  }\n\n  renderPopover() {\n    const html = this.generateEmbedHTML();\n    return (\n      <Popover id=\"embed-code-popover\">\n        <div>\n          <div className=\"row\">\n            <div className=\"col-sm-10\">\n              <textarea\n                name=\"embedCode\"\n                value={html}\n                rows=\"4\"\n                readOnly\n                className=\"form-control input-sm\"\n              />\n            </div>\n            <div className=\"col-sm-2\">\n              <CopyToClipboard\n                shouldShowText={false}\n                text={html}\n                copyNode={\n                  <i\n                    className=\"fa fa-clipboard\"\n                    title={t('Copy to clipboard')}\n                  />\n                }\n              />\n            </div>\n          </div>\n          <br />\n          <div className=\"row\">\n            <div className=\"col-md-6 col-sm-12\">\n              <div className=\"form-group\">\n                <small>\n                  <label className=\"control-label\" htmlFor=\"embed-height\">\n                    {t('Height')}\n                  </label>\n                </small>\n                <input\n                  className=\"form-control input-sm\"\n                  type=\"text\"\n                  defaultValue={this.state.height}\n                  name=\"height\"\n                  onChange={this.handleInputChange}\n                />\n              </div>\n            </div>\n            <div className=\"col-md-6 col-sm-12\">\n              <div className=\"form-group\">\n                <small>\n                  <label className=\"control-label\" htmlFor=\"embed-width\">\n                    {t('Width')}\n                  </label>\n                </small>\n                <input\n                  className=\"form-control input-sm\"\n                  type=\"text\"\n                  defaultValue={this.state.width}\n                  name=\"width\"\n                  onChange={this.handleInputChange}\n                  id=\"embed-width\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Popover>\n    );\n  }\n  render() {\n    return (\n      <OverlayTrigger\n        trigger=\"click\"\n        rootClose\n        placement=\"left\"\n        overlay={this.renderPopover()}\n      >\n        <span className=\"btn btn-default btn-sm\" data-test=\"embed-code-button\">\n          <i className=\"fa fa-code\" />\n          &nbsp;\n        </span>\n      </OverlayTrigger>\n    );\n  }\n}\n\nEmbedCodeButton.propTypes = propTypes;\n"]},"metadata":{},"sourceType":"module"}