{"ast":null,"code":"import \"core-js/modules/es.symbol.description\";import \"core-js/modules/es.promise\";import \"core-js/modules/es.regexp.to-string\";import \"core-js/modules/es.string.search\";import \"core-js/modules/web.dom-collections.iterator\";import _parseInt from \"@babel/runtime-corejs3/core-js-stable/parse-int\";import _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _findInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/find\";import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";import _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";import _Promise from \"@babel/runtime-corejs3/core-js-stable/promise\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    */\nimport shortid from 'shortid';\nimport JSONbig from 'json-bigint';\nimport { t } from '@superset-ui/translation';\nimport { SupersetClient } from '@superset-ui/connection';\nimport invert from 'lodash/invert';\nimport mapKeys from 'lodash/mapKeys';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\n\nimport { now } from '../../modules/dates';\nimport {\naddDangerToast as addDangerToastAction,\naddInfoToast as addInfoToastAction,\naddSuccessToast as addSuccessToastAction,\naddWarningToast as addWarningToastAction } from\n'../../messageToasts/actions/index';\nimport getClientErrorObject from '../../utils/getClientErrorObject';\nimport COMMON_ERR_MESSAGES from '../../utils/errorMessages';\n\nexport const RESET_STATE = 'RESET_STATE';\nexport const ADD_QUERY_EDITOR = 'ADD_QUERY_EDITOR';\nexport const UPDATE_QUERY_EDITOR = 'UPDATE_QUERY_EDITOR';\nexport const QUERY_EDITOR_SAVED = 'QUERY_EDITOR_SAVED';\nexport const CLONE_QUERY_TO_NEW_TAB = 'CLONE_QUERY_TO_NEW_TAB';\nexport const REMOVE_QUERY_EDITOR = 'REMOVE_QUERY_EDITOR';\nexport const MERGE_TABLE = 'MERGE_TABLE';\nexport const REMOVE_TABLE = 'REMOVE_TABLE';\nexport const END_QUERY = 'END_QUERY';\nexport const REMOVE_QUERY = 'REMOVE_QUERY';\nexport const EXPAND_TABLE = 'EXPAND_TABLE';\nexport const COLLAPSE_TABLE = 'COLLAPSE_TABLE';\nexport const QUERY_EDITOR_SETDB = 'QUERY_EDITOR_SETDB';\nexport const QUERY_EDITOR_SET_SCHEMA = 'QUERY_EDITOR_SET_SCHEMA';\nexport const QUERY_EDITOR_SET_SCHEMA_OPTIONS =\n'QUERY_EDITOR_SET_SCHEMA_OPTIONS';\nexport const QUERY_EDITOR_SET_TABLE_OPTIONS = 'QUERY_EDITOR_SET_TABLE_OPTIONS';\nexport const QUERY_EDITOR_SET_TITLE = 'QUERY_EDITOR_SET_TITLE';\nexport const QUERY_EDITOR_SET_AUTORUN = 'QUERY_EDITOR_SET_AUTORUN';\nexport const QUERY_EDITOR_SET_SQL = 'QUERY_EDITOR_SET_SQL';\nexport const QUERY_EDITOR_SET_QUERY_LIMIT = 'QUERY_EDITOR_SET_QUERY_LIMIT';\nexport const QUERY_EDITOR_SET_TEMPLATE_PARAMS =\n'QUERY_EDITOR_SET_TEMPLATE_PARAMS';\nexport const QUERY_EDITOR_SET_SELECTED_TEXT = 'QUERY_EDITOR_SET_SELECTED_TEXT';\nexport const QUERY_EDITOR_PERSIST_HEIGHT = 'QUERY_EDITOR_PERSIST_HEIGHT';\nexport const MIGRATE_QUERY_EDITOR = 'MIGRATE_QUERY_EDITOR';\nexport const MIGRATE_TAB_HISTORY = 'MIGRATE_TAB_HISTORY';\nexport const MIGRATE_TABLE = 'MIGRATE_TABLE';\nexport const MIGRATE_QUERY = 'MIGRATE_QUERY';\n\nexport const SET_DATABASES = 'SET_DATABASES';\nexport const SET_ACTIVE_QUERY_EDITOR = 'SET_ACTIVE_QUERY_EDITOR';\nexport const LOAD_QUERY_EDITOR = 'LOAD_QUERY_EDITOR';\nexport const SET_TABLES = 'SET_TABLES';\nexport const SET_ACTIVE_SOUTHPANE_TAB = 'SET_ACTIVE_SOUTHPANE_TAB';\nexport const REFRESH_QUERIES = 'REFRESH_QUERIES';\nexport const SET_USER_OFFLINE = 'SET_USER_OFFLINE';\nexport const RUN_QUERY = 'RUN_QUERY';\nexport const START_QUERY = 'START_QUERY';\nexport const STOP_QUERY = 'STOP_QUERY';\nexport const REQUEST_QUERY_RESULTS = 'REQUEST_QUERY_RESULTS';\nexport const QUERY_SUCCESS = 'QUERY_SUCCESS';\nexport const QUERY_FAILED = 'QUERY_FAILED';\nexport const CLEAR_QUERY_RESULTS = 'CLEAR_QUERY_RESULTS';\nexport const REMOVE_DATA_PREVIEW = 'REMOVE_DATA_PREVIEW';\nexport const CHANGE_DATA_PREVIEW_ID = 'CHANGE_DATA_PREVIEW_ID';\n\nexport const START_QUERY_VALIDATION = 'START_QUERY_VALIDATION';\nexport const QUERY_VALIDATION_RETURNED = 'QUERY_VALIDATION_RETURNED';\nexport const QUERY_VALIDATION_FAILED = 'QUERY_VALIDATION_FAILED';\nexport const COST_ESTIMATE_STARTED = 'COST_ESTIMATE_STARTED';\nexport const COST_ESTIMATE_RETURNED = 'COST_ESTIMATE_RETURNED';\nexport const COST_ESTIMATE_FAILED = 'COST_ESTIMATE_FAILED';\n\nexport const CREATE_DATASOURCE_STARTED = 'CREATE_DATASOURCE_STARTED';\nexport const CREATE_DATASOURCE_SUCCESS = 'CREATE_DATASOURCE_SUCCESS';\nexport const CREATE_DATASOURCE_FAILED = 'CREATE_DATASOURCE_FAILED';\n\nexport const addInfoToast = addInfoToastAction;\nexport const addSuccessToast = addSuccessToastAction;\nexport const addDangerToast = addDangerToastAction;\nexport const addWarningToast = addWarningToastAction;\n\n// a map of SavedQuery field names to the different names used client-side,\n// because for now making the names consistent is too complicated\n// so it might as well only happen in one place\nconst queryClientMapping = {\n  id: 'remoteId',\n  db_id: 'dbId',\n  client_id: 'id',\n  label: 'title' };\n\nconst queryServerMapping = invert(queryClientMapping);\n\n// uses a mapping like those above to convert object key names to another style\nconst fieldConverter = mapping => (obj) =>\nmapKeys(obj, (value, key) => key in mapping ? mapping[key] : key);\n\nconst convertQueryToServer = fieldConverter(queryServerMapping);\nconst convertQueryToClient = fieldConverter(queryClientMapping);\n\nexport function resetState() {\n  return { type: RESET_STATE };\n}\n\nexport function startQueryValidation(query) {\n  _Object$assign(query, {\n    id: query.id ? query.id : shortid.generate() });\n\n  return { type: START_QUERY_VALIDATION, query };\n}\n\nexport function queryValidationReturned(query, results) {\n  return { type: QUERY_VALIDATION_RETURNED, query, results };\n}\n\nexport function queryValidationFailed(query, message, error) {\n  return { type: QUERY_VALIDATION_FAILED, query, message, error };\n}\n\nexport function saveQuery(query) {\n  return (dispatch) =>\n  SupersetClient.post({\n    endpoint: '/savedqueryviewapi/api/create',\n    postPayload: convertQueryToServer(query),\n    stringify: false }).\n\n  then(result => {\n    dispatch({\n      type: QUERY_EDITOR_SAVED,\n      query,\n      result: convertQueryToClient(result.json.item) });\n\n    dispatch(addSuccessToast(t('Your query was saved')));\n  }).\n  catch(() =>\n  dispatch(addDangerToast(t('Your query could not be saved'))));\n\n}\n\nexport function updateQueryEditor(alterations) {\n  return { type: UPDATE_QUERY_EDITOR, alterations };\n}\n\nexport function updateSavedQuery(query) {\n  return (dispatch) =>\n  SupersetClient.put({\n    endpoint: \"/savedqueryviewapi/api/update/\" + query.remoteId,\n    postPayload: convertQueryToServer(query),\n    stringify: false }).\n\n  then(() => dispatch(addSuccessToast(t('Your query was updated')))).\n  catch(() =>\n  dispatch(addDangerToast(t('Your query could not be updated')))).\n\n  then(() => dispatch(updateQueryEditor(query)));\n}\n\nexport function scheduleQuery(query) {\n  return (dispatch) =>\n  SupersetClient.post({\n    endpoint: '/savedqueryviewapi/api/create',\n    postPayload: query,\n    stringify: false }).\n\n  then(() =>\n  dispatch(\n  addSuccessToast(\n  t(\n  'Your query has been scheduled. To see details of your query, navigate to Saved Queries')))).\n\n\n\n\n  catch(() =>\n  dispatch(addDangerToast(t('Your query could not be scheduled'))));\n\n}\n\nexport function estimateQueryCost(query) {\n  const { dbId, schema, sql, templateParams } = query;\n  const endpoint =\n  schema === null ? \"/superset/estimate_query_cost/\" +\n  dbId + \"/\" : \"/superset/estimate_query_cost/\" +\n  dbId + \"/\" + schema + \"/\";\n  return (dispatch) =>\n  _Promise.all([\n  dispatch({ type: COST_ESTIMATE_STARTED, query }),\n  SupersetClient.post({\n    endpoint,\n    postPayload: {\n      sql,\n      templateParams: JSON.parse(templateParams || '{}') } }).\n\n\n  then(({ json }) =>\n  dispatch({ type: COST_ESTIMATE_RETURNED, query, json })).\n\n  catch((response) =>\n  getClientErrorObject(response).then(error => {\n    const message =\n    error.error ||\n    error.statusText ||\n    t('Failed at retrieving results');\n    return dispatch({\n      type: COST_ESTIMATE_FAILED,\n      query,\n      error: message });\n\n  }))]);\n\n\n}\n\nexport function startQuery(query) {\n  _Object$assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n    progress: 0,\n    startDttm: now(),\n    state: query.runAsync ? 'pending' : 'running',\n    cached: false });\n\n  return { type: START_QUERY, query };\n}\n\nexport function querySuccess(query, results) {\n  return function (dispatch) {\n    const sync =\n    !query.isDataPreview &&\n    isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + results.query.sqlEditorId),\n      postPayload: { latest_query_id: query.id } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: QUERY_SUCCESS, query, results })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while storing the latest query id in the backend. ' +\n    'Please contact your administrator if this problem persists.'))));\n\n\n\n\n  };\n}\n\nexport function queryFailed(query, msg, link) {\n  return function (dispatch) {\n    const sync =\n    !query.isDataPreview &&\n    isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + query.sqlEditorId),\n      postPayload: { latest_query_id: query.id } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: QUERY_FAILED, query, msg, link })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while storing the latest query id in the backend. ' +\n    'Please contact your administrator if this problem persists.'))));\n\n\n\n\n  };\n}\n\nexport function stopQuery(query) {\n  return { type: STOP_QUERY, query };\n}\n\nexport function clearQueryResults(query) {\n  return { type: CLEAR_QUERY_RESULTS, query };\n}\n\nexport function removeDataPreview(table) {\n  return { type: REMOVE_DATA_PREVIEW, table };\n}\n\nexport function requestQueryResults(query) {\n  return { type: REQUEST_QUERY_RESULTS, query };\n}\n\nexport function fetchQueryResults(query, displayLimit) {\n  return function (dispatch) {\n    dispatch(requestQueryResults(query));\n\n    return SupersetClient.get({\n      endpoint: \"/superset/results/\" + query.resultsKey + \"/?rows=\" + displayLimit,\n      parseMethod: 'text' }).\n\n    then(({ text = '{}' }) => {\n      const bigIntJson = JSONbig.parse(text);\n      return dispatch(querySuccess(query, bigIntJson));\n    }).\n    catch((response) =>\n    getClientErrorObject(response).then(error => {\n      const message =\n      error.error ||\n      error.statusText ||\n      t('Failed at retrieving results');\n\n      return dispatch(queryFailed(query, message, error.link));\n    }));\n\n  };\n}\n\nexport function runQuery(query) {\n  return function (dispatch) {\n    dispatch(startQuery(query));\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      runAsync: query.runAsync,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      tab: query.tab,\n      tmp_table_name: query.tempTableName,\n      select_as_cta: query.ctas,\n      templateParams: query.templateParams,\n      queryLimit: query.queryLimit,\n      expand_data: true };\n\n\n    return SupersetClient.post({\n      endpoint: '/superset/sql_json/',\n      body: _JSON$stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n      parseMethod: 'text' }).\n\n    then(({ text = '{}' }) => {\n      if (!query.runAsync) {\n        const bigIntJson = JSONbig.parse(text);\n        dispatch(querySuccess(query, bigIntJson));\n      }\n    }).\n    catch((response) =>\n    getClientErrorObject(response).then(error => {\n      let message = error.error || error.statusText || t('Unknown error');\n      if (_includesInstanceProperty(message).call(message, 'CSRF token')) {\n        message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n      }\n      dispatch(queryFailed(query, message, error.link));\n    }));\n\n  };\n}\n\nexport function validateQuery(query) {\n  return function (dispatch) {\n    dispatch(startQueryValidation(query));\n\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      templateParams: query.templateParams,\n      validate_only: true };\n\n\n    return SupersetClient.post({\n      endpoint: \"/superset/validate_sql_json/\" + window.location.search,\n      postPayload,\n      stringify: false }).\n\n    then(({ json }) => dispatch(queryValidationReturned(query, json))).\n    catch((response) =>\n    getClientErrorObject(response).then(error => {\n      let message = error.error || error.statusText || t('Unknown error');\n      if (_includesInstanceProperty(message).call(message, 'CSRF token')) {\n        message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n      }\n      dispatch(queryValidationFailed(query, message, error));\n    }));\n\n  };\n}\n\nexport function postStopQuery(query) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/superset/stop_query/',\n      postPayload: { client_id: query.id },\n      stringify: false }).\n\n    then(() => dispatch(stopQuery(query))).\n    then(() => dispatch(addSuccessToast(t('Query was stopped.')))).\n    catch(() =>\n    dispatch(\n    addDangerToast(t('Failed at stopping query. ') + (\"'\" + query.id + \"'\"))));\n\n\n  };\n}\n\nexport function setDatabases(databases) {\n  return { type: SET_DATABASES, databases };\n}\n\nfunction migrateTable(table, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI('/tableschemaview/'),\n    postPayload: { table: _Object$assign({}, table, { queryEditorId }) } }).\n\n  then(({ json }) => {\n    const newTable = _Object$assign({},\n    table, {\n      id: json.id,\n      queryEditorId });\n\n    return dispatch({ type: MIGRATE_TABLE, oldTable: table, newTable });\n  }).\n  catch(() =>\n  dispatch(\n  addWarningToast(\n  t(\n  'Unable to migrate table schema state to backend. Superset will retry ' +\n  'later. Please contact your administrator if this problem persists.'))));\n\n\n\n\n}\n\nfunction migrateQuery(queryId, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI(\"/tabstateview/\" + queryEditorId + \"/migrate_query\"),\n    postPayload: { queryId } }).\n\n  then(() => dispatch({ type: MIGRATE_QUERY, queryId, queryEditorId })).\n  catch(() =>\n  dispatch(\n  addWarningToast(\n  t(\n  'Unable to migrate query state to backend. Superset will retry later. ' +\n  'Please contact your administrator if this problem persists.'))));\n\n\n\n\n}\n\nexport function migrateQueryEditorFromLocalStorage(\nqueryEditor,\ntables,\nqueries)\n{\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/tabstateview/',\n      postPayload: { queryEditor } }).\n\n    then(({ json }) => {\n      const newQueryEditor = _Object$assign({},\n      queryEditor, {\n        id: json.id.toString() });\n\n      dispatch({\n        type: MIGRATE_QUERY_EDITOR,\n        oldQueryEditor: queryEditor,\n        newQueryEditor });\n\n      dispatch({\n        type: MIGRATE_TAB_HISTORY,\n        oldId: queryEditor.id,\n        newId: newQueryEditor.id });\n\n      return _Promise.all([\n      ..._mapInstanceProperty(tables).call(tables, (table) =>\n      migrateTable(table, newQueryEditor.id, dispatch)),\n\n      ..._mapInstanceProperty(queries).call(queries, (query) =>\n      migrateQuery(query.id, newQueryEditor.id, dispatch))]);\n\n\n    }).\n    catch(() =>\n    dispatch(\n    addWarningToast(\n    t(\n    'Unable to migrate query editor state to backend. Superset will retry ' +\n    'later. Please contact your administrator if this problem persists.'))));\n\n\n\n\n  };\n}\n\nexport function addQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.post({\n      endpoint: '/tabstateview/',\n      postPayload: { queryEditor } }) :\n\n    _Promise.resolve({ json: { id: shortid.generate() } });\n\n    return sync.\n    then(({ json }) => {\n      const newQueryEditor = _Object$assign({},\n      queryEditor, {\n        id: json.id.toString() });\n\n      return dispatch({\n        type: ADD_QUERY_EDITOR,\n        queryEditor: newQueryEditor });\n\n    }).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'Unable to add a new tab to the backend. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function cloneQueryToNewTab(query, autorun) {\n  return function (dispatch, getState) {\n    const state = getState();\n    const { queryEditors, tabHistory } = state.sqlLab;\n    const sourceQueryEditor = _findInstanceProperty(queryEditors).call(queryEditors,\n    qe => qe.id === tabHistory[tabHistory.length - 1]);\n\n    const queryEditor = {\n      title: t('Copy of %s', sourceQueryEditor.title),\n      dbId: query.dbId ? query.dbId : null,\n      schema: query.schema ? query.schema : null,\n      autorun,\n      sql: query.sql,\n      queryLimit: sourceQueryEditor.queryLimit,\n      maxRow: sourceQueryEditor.maxRow,\n      templateParams: sourceQueryEditor.templateParams };\n\n    return dispatch(addQueryEditor(queryEditor));\n  };\n}\n\nexport function setActiveQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.post({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id + \"/activate\") }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: SET_ACTIVE_QUERY_EDITOR, queryEditor })).\n    catch(response => {\n      if (response.status !== 404) {\n        return dispatch(\n        addDangerToast(\n        t(\n        'An error occurred while setting the active tab. Please contact ' +\n        'your administrator.')));\n\n\n\n      }\n      return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n    });\n  };\n}\n\nexport function loadQueryEditor(queryEditor) {\n  return { type: LOAD_QUERY_EDITOR, queryEditor };\n}\n\nexport function setTables(tableSchemas) {var _context;\n  const tables = _mapInstanceProperty(_context = _filterInstanceProperty(tableSchemas).call(tableSchemas,\n  tableSchema => tableSchema.description !== null)).call(_context,\n  tableSchema => {\n    const {\n      columns,\n      selectStar,\n      primaryKey,\n      foreignKeys,\n      indexes,\n      dataPreviewQueryId } =\n    tableSchema.description;\n    return {\n      dbId: tableSchema.database_id,\n      queryEditorId: tableSchema.tab_state_id.toString(),\n      schema: tableSchema.schema,\n      name: tableSchema.table,\n      expanded: tableSchema.expanded,\n      id: tableSchema.id,\n      dataPreviewQueryId,\n      columns,\n      selectStar,\n      primaryKey,\n      foreignKeys,\n      indexes,\n      isMetadataLoading: false,\n      isExtraMetadataLoading: false };\n\n  });\n  return { type: SET_TABLES, tables };\n}\n\nexport function switchQueryEditor(queryEditor, displayLimit) {\n  return function (dispatch) {\n    if (\n    isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n    !queryEditor.loaded)\n    {\n      SupersetClient.get({\n        endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id) }).\n\n      then(({ json }) => {\n        const loadedQueryEditor = {\n          id: json.id.toString(),\n          loaded: true,\n          title: json.label,\n          sql: json.sql,\n          selectedText: null,\n          latestQueryId: json.latest_query ? json.latest_query.id : null,\n          autorun: json.autorun,\n          dbId: json.database_id,\n          templateParams: json.template_params,\n          schema: json.schema,\n          queryLimit: json.query_limit,\n          validationResult: {\n            id: null,\n            errors: [],\n            completed: false } };\n\n\n        dispatch(loadQueryEditor(loadedQueryEditor));\n        dispatch(setTables(json.table_schemas || []));\n        dispatch(setActiveQueryEditor(loadedQueryEditor));\n        if (json.latest_query && json.latest_query.resultsKey) {\n          dispatch(fetchQueryResults(json.latest_query, displayLimit));\n        }\n      }).\n      catch(response => {\n        if (response.status !== 404) {\n          return dispatch(\n          addDangerToast(t('An error occurred while fetching tab state')));\n\n        }\n        return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n      });\n    } else {\n      dispatch(setActiveQueryEditor(queryEditor));\n    }\n  };\n}\n\nexport function setActiveSouthPaneTab(tabId) {\n  return { type: SET_ACTIVE_SOUTHPANE_TAB, tabId };\n}\n\nexport function removeQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.delete({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id) }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while removing tab. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function removeQuery(query) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.delete({\n      endpoint: encodeURI(\"/tabstateview/\" +\n      query.sqlEditorId + \"/query/\" + query.id) }) :\n\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: REMOVE_QUERY, query })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while removing query. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetDb(queryEditor, dbId) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { database_id: dbId } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: QUERY_EDITOR_SETDB, queryEditor, dbId })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab database ID. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetSchema(queryEditor, schema) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { schema } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() =>\n    dispatch({ type: QUERY_EDITOR_SET_SCHEMA, queryEditor, schema })).\n\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab schema. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetSchemaOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_SCHEMA_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetTableOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_TABLE_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetAutorun(queryEditor, autorun) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { autorun } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() =>\n    dispatch({ type: QUERY_EDITOR_SET_AUTORUN, queryEditor, autorun })).\n\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab autorun. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetTitle(queryEditor, title) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { label: title } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() =>\n    dispatch({ type: QUERY_EDITOR_SET_TITLE, queryEditor, title })).\n\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab title. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetSql(queryEditor, sql) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { sql } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: QUERY_EDITOR_SET_SQL, queryEditor, sql })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while storing your query in the backend. To ' +\n    'avoid losing your changes, please save your query using the ' +\n    '\"Save Query\" button.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetQueryLimit(queryEditor, queryLimit) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { query_limit: queryLimit } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() =>\n    dispatch({\n      type: QUERY_EDITOR_SET_QUERY_LIMIT,\n      queryEditor,\n      queryLimit })).\n\n\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab title. Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetTemplateParams(queryEditor, templateParams) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.put({\n      endpoint: encodeURI(\"/tabstateview/\" + queryEditor.id),\n      postPayload: { template_params: templateParams } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() =>\n    dispatch({\n      type: QUERY_EDITOR_SET_TEMPLATE_PARAMS,\n      queryEditor,\n      templateParams })).\n\n\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while setting the tab template parameters. ' +\n    'Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function queryEditorSetSelectedText(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SELECTED_TEXT, queryEditor, sql };\n}\n\nexport function mergeTable(table, query) {\n  return { type: MERGE_TABLE, table, query };\n}\n\nfunction getTableMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n    \"/api/v1/database/\" + query.dbId + \"/table/\" + (\n    encodeURIComponent(table.name) + \"/\" + encodeURIComponent(\n    table.schema) + \"/\")) }).\n\n\n\n  then(({ json }) => {\n    const dataPreviewQuery = {\n      id: shortid.generate(),\n      dbId: query.dbId,\n      sql: json.selectStar,\n      tableName: table.name,\n      sqlEditorId: null,\n      tab: '',\n      runAsync: false,\n      ctas: false,\n      isDataPreview: true };\n\n    const newTable = _Object$assign({},\n    table, {},\n    json, {\n      expanded: true,\n      isMetadataLoading: false,\n      dataPreviewQueryId: dataPreviewQuery.id });\n\n    _Promise.all([\n    dispatch(mergeTable(newTable, dataPreviewQuery)), // Merge table to tables in state\n    dispatch(runQuery(dataPreviewQuery)) // Run query to get preview data for table\n    ]);\n    return newTable;\n  }).\n  catch(() =>\n  _Promise.all([\n  dispatch(\n  mergeTable(_Object$assign({},\n  table, {\n    isMetadataLoading: false }))),\n\n\n  dispatch(\n  addDangerToast(t('An error occurred while fetching table metadata')))]));\n\n\n\n}\n\nfunction getTableExtendedMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n    \"/superset/extra_table_metadata/\" + query.dbId + \"/\" + (\n    encodeURIComponent(table.name) + \"/\" + encodeURIComponent(\n    table.schema) + \"/\")) }).\n\n\n\n  then(({ json }) => {\n    dispatch(\n    mergeTable(_Object$assign({}, table, {}, json, { isExtraMetadataLoading: false })));\n\n    return json;\n  }).\n  catch(() =>\n  _Promise.all([\n  dispatch(mergeTable(_Object$assign({}, table, { isExtraMetadataLoading: false }))),\n  dispatch(\n  addDangerToast(t('An error occurred while fetching table metadata')))]));\n\n\n\n}\n\nexport function addTable(query, tableName, schemaName) {\n  return function (dispatch) {\n    const table = {\n      dbId: query.dbId,\n      queryEditorId: query.id,\n      schema: schemaName,\n      name: tableName };\n\n    dispatch(\n    mergeTable(_Object$assign({},\n    table, {\n      isMetadataLoading: true,\n      isExtraMetadataLoading: true,\n      expanded: false })));\n\n\n\n    return _Promise.all([\n    getTableMetadata(table, query, dispatch),\n    getTableExtendedMetadata(table, query, dispatch)]).\n    then(([newTable, json]) => {\n      const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n      SupersetClient.post({\n        endpoint: encodeURI('/tableschemaview/'),\n        postPayload: { table: _Object$assign({}, newTable, {}, json) } }) :\n\n      _Promise.resolve({ json: { id: shortid.generate() } });\n\n      return sync.\n      then(({ json: resultJson }) =>\n      dispatch(mergeTable(_Object$assign({}, table, { id: resultJson.id })))).\n\n      catch(() =>\n      dispatch(\n      addDangerToast(\n      t(\n      'An error occurred while fetching table metadata. ' +\n      'Please contact your administrator.'))));\n\n\n\n\n    });\n  };\n}\n\nexport function changeDataPreviewId(oldQueryId, newQuery) {\n  return { type: CHANGE_DATA_PREVIEW_ID, oldQueryId, newQuery };\n}\n\nexport function reFetchQueryResults(query) {\n  return function (dispatch) {\n    const newQuery = {\n      id: shortid.generate(),\n      dbId: query.dbId,\n      sql: query.sql,\n      tableName: query.tableName,\n      sqlEditorId: null,\n      tab: '',\n      runAsync: false,\n      ctas: false,\n      queryLimit: query.queryLimit,\n      isDataPreview: query.isDataPreview };\n\n    dispatch(runQuery(newQuery));\n    dispatch(changeDataPreviewId(query.id, newQuery));\n  };\n}\n\nexport function expandTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.post({\n      endpoint: encodeURI(\"/tableschemaview/\" + table.id + \"/expanded\"),\n      postPayload: { expanded: true } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: EXPAND_TABLE, table })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while expanding the table schema. ' +\n    'Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function collapseTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.post({\n      endpoint: encodeURI(\"/tableschemaview/\" + table.id + \"/expanded\"),\n      postPayload: { expanded: false } }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: COLLAPSE_TABLE, table })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while collapsing the table schema. ' +\n    'Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function removeTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) ?\n    SupersetClient.delete({\n      endpoint: encodeURI(\"/tableschemaview/\" + table.id) }) :\n\n    _Promise.resolve();\n\n    return sync.\n    then(() => dispatch({ type: REMOVE_TABLE, table })).\n    catch(() =>\n    dispatch(\n    addDangerToast(\n    t(\n    'An error occurred while removing the table schema. ' +\n    'Please contact your administrator.'))));\n\n\n\n\n  };\n}\n\nexport function refreshQueries(alteredQueries) {\n  return { type: REFRESH_QUERIES, alteredQueries };\n}\n\nexport function setUserOffline(offline) {\n  return { type: SET_USER_OFFLINE, offline };\n}\n\nexport function persistEditorHeight(queryEditor, northPercent, southPercent) {\n  return {\n    type: QUERY_EDITOR_PERSIST_HEIGHT,\n    queryEditor,\n    northPercent,\n    southPercent };\n\n}\n\nexport function popStoredQuery(urlId) {\n  return function (dispatch) {\n    return SupersetClient.get({ endpoint: \"/kv/\" + urlId }).\n    then(({ json }) =>\n    dispatch(\n    addQueryEditor({\n      title: json.title ? json.title : t('Sjsonhared query'),\n      dbId: json.dbId ? _parseInt(json.dbId, 10) : null,\n      schema: json.schema ? json.schema : null,\n      autorun: json.autorun ? json.autorun : false,\n      sql: json.sql ? json.sql : 'SELECT ...' }))).\n\n\n\n    catch(() => dispatch(addDangerToast(t(\"The query couldn't be loaded\"))));\n  };\n}\nexport function popSavedQuery(saveQueryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: \"/savedqueryviewapi/api/get/\" + saveQueryId }).\n\n    then(({ json }) => {\n      const queryEditorProps = _Object$assign({},\n      convertQueryToClient(json.result), {\n        autorun: false });\n\n      return dispatch(addQueryEditor(queryEditorProps));\n    }).\n    catch(() => dispatch(addDangerToast(t(\"The query couldn't be loaded\"))));\n  };\n}\nexport function popDatasourceQuery(datasourceKey, sql) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: \"/superset/fetch_datasource_metadata?datasourceKey=\" + datasourceKey }).\n\n    then(({ json }) =>\n    dispatch(\n    addQueryEditor({\n      title: 'Query ' + json.name,\n      dbId: json.database.id,\n      schema: json.schema,\n      autorun: sql !== undefined,\n      sql: sql || json.select_star }))).\n\n\n\n    catch(() =>\n    dispatch(addDangerToast(t(\"The datasource couldn't be loaded\"))));\n\n  };\n}\nexport function createDatasourceStarted() {\n  return { type: CREATE_DATASOURCE_STARTED };\n}\nexport function createDatasourceSuccess(data) {\n  const datasource = data.table_id + \"__table\";\n  return { type: CREATE_DATASOURCE_SUCCESS, datasource };\n}\nexport function createDatasourceFailed(err) {\n  return { type: CREATE_DATASOURCE_FAILED, err };\n}\n\nexport function createDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/sqllab_viz/',\n      postPayload: { data: vizOptions } }).\n\n    then(({ json }) => {\n      dispatch(createDatasourceSuccess(json));\n\n      return _Promise.resolve(json);\n    }).\n    catch(() => {\n      dispatch(\n      createDatasourceFailed(\n      t('An error occurred while creating the data source')));\n\n\n\n      return _Promise.reject();\n    });\n  };\n}\n\nexport function createCtasDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/get_or_create_table/',\n      postPayload: { data: vizOptions } }).\n\n    then(({ json }) => {\n      dispatch(createDatasourceSuccess(json));\n\n      return json;\n    }).\n    catch(() => {\n      const errorMsg = t('An error occurred while creating the data source');\n      dispatch(createDatasourceFailed(errorMsg));\n      return _Promise.reject(new Error(errorMsg));\n    });\n  };\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(RESET_STATE, \"RESET_STATE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(ADD_QUERY_EDITOR, \"ADD_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(UPDATE_QUERY_EDITOR, \"UPDATE_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SAVED, \"QUERY_EDITOR_SAVED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CLONE_QUERY_TO_NEW_TAB, \"CLONE_QUERY_TO_NEW_TAB\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REMOVE_QUERY_EDITOR, \"REMOVE_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(MERGE_TABLE, \"MERGE_TABLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REMOVE_TABLE, \"REMOVE_TABLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(END_QUERY, \"END_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REMOVE_QUERY, \"REMOVE_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(EXPAND_TABLE, \"EXPAND_TABLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(COLLAPSE_TABLE, \"COLLAPSE_TABLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SETDB, \"QUERY_EDITOR_SETDB\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_SCHEMA, \"QUERY_EDITOR_SET_SCHEMA\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_SCHEMA_OPTIONS, \"QUERY_EDITOR_SET_SCHEMA_OPTIONS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_TABLE_OPTIONS, \"QUERY_EDITOR_SET_TABLE_OPTIONS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_TITLE, \"QUERY_EDITOR_SET_TITLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_AUTORUN, \"QUERY_EDITOR_SET_AUTORUN\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_SQL, \"QUERY_EDITOR_SET_SQL\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_QUERY_LIMIT, \"QUERY_EDITOR_SET_QUERY_LIMIT\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_TEMPLATE_PARAMS, \"QUERY_EDITOR_SET_TEMPLATE_PARAMS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_SET_SELECTED_TEXT, \"QUERY_EDITOR_SET_SELECTED_TEXT\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_EDITOR_PERSIST_HEIGHT, \"QUERY_EDITOR_PERSIST_HEIGHT\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(MIGRATE_QUERY_EDITOR, \"MIGRATE_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(MIGRATE_TAB_HISTORY, \"MIGRATE_TAB_HISTORY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(MIGRATE_TABLE, \"MIGRATE_TABLE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(MIGRATE_QUERY, \"MIGRATE_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(SET_DATABASES, \"SET_DATABASES\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(SET_ACTIVE_QUERY_EDITOR, \"SET_ACTIVE_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(LOAD_QUERY_EDITOR, \"LOAD_QUERY_EDITOR\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(SET_TABLES, \"SET_TABLES\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(SET_ACTIVE_SOUTHPANE_TAB, \"SET_ACTIVE_SOUTHPANE_TAB\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REFRESH_QUERIES, \"REFRESH_QUERIES\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(SET_USER_OFFLINE, \"SET_USER_OFFLINE\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(RUN_QUERY, \"RUN_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(START_QUERY, \"START_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(STOP_QUERY, \"STOP_QUERY\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REQUEST_QUERY_RESULTS, \"REQUEST_QUERY_RESULTS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_SUCCESS, \"QUERY_SUCCESS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_FAILED, \"QUERY_FAILED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CLEAR_QUERY_RESULTS, \"CLEAR_QUERY_RESULTS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(REMOVE_DATA_PREVIEW, \"REMOVE_DATA_PREVIEW\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CHANGE_DATA_PREVIEW_ID, \"CHANGE_DATA_PREVIEW_ID\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(START_QUERY_VALIDATION, \"START_QUERY_VALIDATION\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_VALIDATION_RETURNED, \"QUERY_VALIDATION_RETURNED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(QUERY_VALIDATION_FAILED, \"QUERY_VALIDATION_FAILED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(COST_ESTIMATE_STARTED, \"COST_ESTIMATE_STARTED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(COST_ESTIMATE_RETURNED, \"COST_ESTIMATE_RETURNED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(COST_ESTIMATE_FAILED, \"COST_ESTIMATE_FAILED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CREATE_DATASOURCE_STARTED, \"CREATE_DATASOURCE_STARTED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CREATE_DATASOURCE_SUCCESS, \"CREATE_DATASOURCE_SUCCESS\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(CREATE_DATASOURCE_FAILED, \"CREATE_DATASOURCE_FAILED\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addInfoToast, \"addInfoToast\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addSuccessToast, \"addSuccessToast\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addDangerToast, \"addDangerToast\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addWarningToast, \"addWarningToast\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryClientMapping, \"queryClientMapping\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryServerMapping, \"queryServerMapping\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(fieldConverter, \"fieldConverter\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(convertQueryToServer, \"convertQueryToServer\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(convertQueryToClient, \"convertQueryToClient\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(resetState, \"resetState\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(startQueryValidation, \"startQueryValidation\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryValidationReturned, \"queryValidationReturned\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryValidationFailed, \"queryValidationFailed\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(saveQuery, \"saveQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(updateQueryEditor, \"updateQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(updateSavedQuery, \"updateSavedQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(scheduleQuery, \"scheduleQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(estimateQueryCost, \"estimateQueryCost\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(startQuery, \"startQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(querySuccess, \"querySuccess\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryFailed, \"queryFailed\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(stopQuery, \"stopQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(clearQueryResults, \"clearQueryResults\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(removeDataPreview, \"removeDataPreview\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(requestQueryResults, \"requestQueryResults\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(fetchQueryResults, \"fetchQueryResults\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(runQuery, \"runQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(validateQuery, \"validateQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(postStopQuery, \"postStopQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(setDatabases, \"setDatabases\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(migrateTable, \"migrateTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(migrateQuery, \"migrateQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(migrateQueryEditorFromLocalStorage, \"migrateQueryEditorFromLocalStorage\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addQueryEditor, \"addQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(cloneQueryToNewTab, \"cloneQueryToNewTab\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(setActiveQueryEditor, \"setActiveQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(loadQueryEditor, \"loadQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(setTables, \"setTables\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(switchQueryEditor, \"switchQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(setActiveSouthPaneTab, \"setActiveSouthPaneTab\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(removeQueryEditor, \"removeQueryEditor\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(removeQuery, \"removeQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetDb, \"queryEditorSetDb\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetSchema, \"queryEditorSetSchema\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetSchemaOptions, \"queryEditorSetSchemaOptions\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetTableOptions, \"queryEditorSetTableOptions\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetAutorun, \"queryEditorSetAutorun\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetTitle, \"queryEditorSetTitle\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetSql, \"queryEditorSetSql\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetQueryLimit, \"queryEditorSetQueryLimit\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetTemplateParams, \"queryEditorSetTemplateParams\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(queryEditorSetSelectedText, \"queryEditorSetSelectedText\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(mergeTable, \"mergeTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(getTableMetadata, \"getTableMetadata\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(getTableExtendedMetadata, \"getTableExtendedMetadata\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(addTable, \"addTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(changeDataPreviewId, \"changeDataPreviewId\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(reFetchQueryResults, \"reFetchQueryResults\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(expandTable, \"expandTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(collapseTable, \"collapseTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(removeTable, \"removeTable\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(refreshQueries, \"refreshQueries\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(setUserOffline, \"setUserOffline\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(persistEditorHeight, \"persistEditorHeight\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(popStoredQuery, \"popStoredQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(popSavedQuery, \"popSavedQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(popDatasourceQuery, \"popDatasourceQuery\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(createDatasourceStarted, \"createDatasourceStarted\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(createDatasourceSuccess, \"createDatasourceSuccess\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(createDatasourceFailed, \"createDatasourceFailed\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(createDatasource, \"createDatasource\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");reactHotLoader.register(createCtasDatasource, \"createCtasDatasource\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/tiago/git-facilit/incubator-superset/superset-frontend/src/SqlLab/actions/sqlLab.js"],"names":["shortid","JSONbig","t","SupersetClient","invert","mapKeys","isFeatureEnabled","FeatureFlag","now","addDangerToast","addDangerToastAction","addInfoToast","addInfoToastAction","addSuccessToast","addSuccessToastAction","addWarningToast","addWarningToastAction","getClientErrorObject","COMMON_ERR_MESSAGES","RESET_STATE","ADD_QUERY_EDITOR","UPDATE_QUERY_EDITOR","QUERY_EDITOR_SAVED","CLONE_QUERY_TO_NEW_TAB","REMOVE_QUERY_EDITOR","MERGE_TABLE","REMOVE_TABLE","END_QUERY","REMOVE_QUERY","EXPAND_TABLE","COLLAPSE_TABLE","QUERY_EDITOR_SETDB","QUERY_EDITOR_SET_SCHEMA","QUERY_EDITOR_SET_SCHEMA_OPTIONS","QUERY_EDITOR_SET_TABLE_OPTIONS","QUERY_EDITOR_SET_TITLE","QUERY_EDITOR_SET_AUTORUN","QUERY_EDITOR_SET_SQL","QUERY_EDITOR_SET_QUERY_LIMIT","QUERY_EDITOR_SET_TEMPLATE_PARAMS","QUERY_EDITOR_SET_SELECTED_TEXT","QUERY_EDITOR_PERSIST_HEIGHT","MIGRATE_QUERY_EDITOR","MIGRATE_TAB_HISTORY","MIGRATE_TABLE","MIGRATE_QUERY","SET_DATABASES","SET_ACTIVE_QUERY_EDITOR","LOAD_QUERY_EDITOR","SET_TABLES","SET_ACTIVE_SOUTHPANE_TAB","REFRESH_QUERIES","SET_USER_OFFLINE","RUN_QUERY","START_QUERY","STOP_QUERY","REQUEST_QUERY_RESULTS","QUERY_SUCCESS","QUERY_FAILED","CLEAR_QUERY_RESULTS","REMOVE_DATA_PREVIEW","CHANGE_DATA_PREVIEW_ID","START_QUERY_VALIDATION","QUERY_VALIDATION_RETURNED","QUERY_VALIDATION_FAILED","COST_ESTIMATE_STARTED","COST_ESTIMATE_RETURNED","COST_ESTIMATE_FAILED","CREATE_DATASOURCE_STARTED","CREATE_DATASOURCE_SUCCESS","CREATE_DATASOURCE_FAILED","queryClientMapping","id","db_id","client_id","label","queryServerMapping","fieldConverter","mapping","obj","value","key","convertQueryToServer","convertQueryToClient","resetState","type","startQueryValidation","query","generate","queryValidationReturned","results","queryValidationFailed","message","error","saveQuery","dispatch","post","endpoint","postPayload","stringify","then","result","json","item","catch","updateQueryEditor","alterations","updateSavedQuery","put","remoteId","scheduleQuery","estimateQueryCost","dbId","schema","sql","templateParams","all","JSON","parse","response","statusText","startQuery","progress","startDttm","state","runAsync","cached","querySuccess","sync","isDataPreview","SQLLAB_BACKEND_PERSISTENCE","encodeURI","sqlEditorId","latest_query_id","resolve","queryFailed","msg","link","stopQuery","clearQueryResults","removeDataPreview","table","requestQueryResults","fetchQueryResults","displayLimit","get","resultsKey","parseMethod","text","bigIntJson","runQuery","database_id","sql_editor_id","tab","tmp_table_name","tempTableName","select_as_cta","ctas","queryLimit","expand_data","body","headers","SESSION_TIMED_OUT","validateQuery","validate_only","window","location","search","postStopQuery","setDatabases","databases","migrateTable","queryEditorId","newTable","oldTable","migrateQuery","queryId","migrateQueryEditorFromLocalStorage","queryEditor","tables","queries","newQueryEditor","toString","oldQueryEditor","oldId","newId","addQueryEditor","cloneQueryToNewTab","autorun","getState","queryEditors","tabHistory","sqlLab","sourceQueryEditor","qe","length","title","maxRow","setActiveQueryEditor","status","loadQueryEditor","setTables","tableSchemas","tableSchema","description","columns","selectStar","primaryKey","foreignKeys","indexes","dataPreviewQueryId","tab_state_id","name","expanded","isMetadataLoading","isExtraMetadataLoading","switchQueryEditor","loaded","loadedQueryEditor","selectedText","latestQueryId","latest_query","template_params","query_limit","validationResult","errors","completed","table_schemas","setActiveSouthPaneTab","tabId","removeQueryEditor","delete","removeQuery","queryEditorSetDb","queryEditorSetSchema","queryEditorSetSchemaOptions","options","queryEditorSetTableOptions","queryEditorSetAutorun","queryEditorSetTitle","queryEditorSetSql","queryEditorSetQueryLimit","queryEditorSetTemplateParams","queryEditorSetSelectedText","mergeTable","getTableMetadata","encodeURIComponent","dataPreviewQuery","tableName","getTableExtendedMetadata","addTable","schemaName","resultJson","changeDataPreviewId","oldQueryId","newQuery","reFetchQueryResults","expandTable","collapseTable","removeTable","refreshQueries","alteredQueries","setUserOffline","offline","persistEditorHeight","northPercent","southPercent","popStoredQuery","urlId","popSavedQuery","saveQueryId","queryEditorProps","popDatasourceQuery","datasourceKey","database","undefined","select_star","createDatasourceStarted","createDatasourceSuccess","data","datasource","table_id","createDatasourceFailed","err","createDatasource","vizOptions","reject","createCtasDatasource","errorMsg","Error"],"mappings":"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qIAIAE,oB,+IAOAG,uB,kJAIAE,qB,gJAIAG,S,oIAoBAW,iB,4IAIAE,gB,2IAcAG,a,wIAqBAC,iB,4IAmCAU,U,qIAWAM,Y,uIA0BAQ,W,sIA0BAG,S,oIAIAC,iB,4IAIAC,iB,4IAIAE,mB,8IAIAC,iB,4IAyBAO,Q,mIA2CAa,a,wIAiCAK,a,wIAiBAC,Y,uIAIPE,Y,uIAyBAI,Y,uIAkBOE,kC,6JA+CAS,c,yIAgCAC,kB,6IAqBAW,oB,+IA0BAE,e,0IAIAC,S,oIAgCAe,iB,4IAiDAY,qB,gJAIAE,iB,4IAsBAE,W,sIAwBAC,gB,2IAuBAC,oB,+IAyBAC,2B,sJAIAE,0B,qJAIAC,qB,gJAyBAC,mB,8IAyBAC,iB,4IAyBAC,wB,mJA6BAC,4B,uJA8BAC,0B,qJAIAC,U,qIAIPC,gB,2IAiDAI,wB,mJAyBOC,Q,mIA8CAG,mB,8IAIAG,mB,8IAmBAC,W,sIAwBAC,a,wIAwBAC,W,sIAuBAC,c,yIAIAE,c,yIAIAE,mB,8IASAG,c,yIAiBAE,a,wIAeAG,kB,6IAqBAK,uB,kJAGAC,uB,kJAIAI,sB,iJAIAE,gB,2IAwBAG,oB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport shortid from 'shortid';\nimport JSONbig from 'json-bigint';\nimport { t } from '@superset-ui/translation';\nimport { SupersetClient } from '@superset-ui/connection';\nimport invert from 'lodash/invert';\nimport mapKeys from 'lodash/mapKeys';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\n\nimport { now } from '../../modules/dates';\nimport {\n  addDangerToast as addDangerToastAction,\n  addInfoToast as addInfoToastAction,\n  addSuccessToast as addSuccessToastAction,\n  addWarningToast as addWarningToastAction,\n} from '../../messageToasts/actions/index';\nimport getClientErrorObject from '../../utils/getClientErrorObject';\nimport COMMON_ERR_MESSAGES from '../../utils/errorMessages';\n\nexport const RESET_STATE = 'RESET_STATE';\nexport const ADD_QUERY_EDITOR = 'ADD_QUERY_EDITOR';\nexport const UPDATE_QUERY_EDITOR = 'UPDATE_QUERY_EDITOR';\nexport const QUERY_EDITOR_SAVED = 'QUERY_EDITOR_SAVED';\nexport const CLONE_QUERY_TO_NEW_TAB = 'CLONE_QUERY_TO_NEW_TAB';\nexport const REMOVE_QUERY_EDITOR = 'REMOVE_QUERY_EDITOR';\nexport const MERGE_TABLE = 'MERGE_TABLE';\nexport const REMOVE_TABLE = 'REMOVE_TABLE';\nexport const END_QUERY = 'END_QUERY';\nexport const REMOVE_QUERY = 'REMOVE_QUERY';\nexport const EXPAND_TABLE = 'EXPAND_TABLE';\nexport const COLLAPSE_TABLE = 'COLLAPSE_TABLE';\nexport const QUERY_EDITOR_SETDB = 'QUERY_EDITOR_SETDB';\nexport const QUERY_EDITOR_SET_SCHEMA = 'QUERY_EDITOR_SET_SCHEMA';\nexport const QUERY_EDITOR_SET_SCHEMA_OPTIONS =\n  'QUERY_EDITOR_SET_SCHEMA_OPTIONS';\nexport const QUERY_EDITOR_SET_TABLE_OPTIONS = 'QUERY_EDITOR_SET_TABLE_OPTIONS';\nexport const QUERY_EDITOR_SET_TITLE = 'QUERY_EDITOR_SET_TITLE';\nexport const QUERY_EDITOR_SET_AUTORUN = 'QUERY_EDITOR_SET_AUTORUN';\nexport const QUERY_EDITOR_SET_SQL = 'QUERY_EDITOR_SET_SQL';\nexport const QUERY_EDITOR_SET_QUERY_LIMIT = 'QUERY_EDITOR_SET_QUERY_LIMIT';\nexport const QUERY_EDITOR_SET_TEMPLATE_PARAMS =\n  'QUERY_EDITOR_SET_TEMPLATE_PARAMS';\nexport const QUERY_EDITOR_SET_SELECTED_TEXT = 'QUERY_EDITOR_SET_SELECTED_TEXT';\nexport const QUERY_EDITOR_PERSIST_HEIGHT = 'QUERY_EDITOR_PERSIST_HEIGHT';\nexport const MIGRATE_QUERY_EDITOR = 'MIGRATE_QUERY_EDITOR';\nexport const MIGRATE_TAB_HISTORY = 'MIGRATE_TAB_HISTORY';\nexport const MIGRATE_TABLE = 'MIGRATE_TABLE';\nexport const MIGRATE_QUERY = 'MIGRATE_QUERY';\n\nexport const SET_DATABASES = 'SET_DATABASES';\nexport const SET_ACTIVE_QUERY_EDITOR = 'SET_ACTIVE_QUERY_EDITOR';\nexport const LOAD_QUERY_EDITOR = 'LOAD_QUERY_EDITOR';\nexport const SET_TABLES = 'SET_TABLES';\nexport const SET_ACTIVE_SOUTHPANE_TAB = 'SET_ACTIVE_SOUTHPANE_TAB';\nexport const REFRESH_QUERIES = 'REFRESH_QUERIES';\nexport const SET_USER_OFFLINE = 'SET_USER_OFFLINE';\nexport const RUN_QUERY = 'RUN_QUERY';\nexport const START_QUERY = 'START_QUERY';\nexport const STOP_QUERY = 'STOP_QUERY';\nexport const REQUEST_QUERY_RESULTS = 'REQUEST_QUERY_RESULTS';\nexport const QUERY_SUCCESS = 'QUERY_SUCCESS';\nexport const QUERY_FAILED = 'QUERY_FAILED';\nexport const CLEAR_QUERY_RESULTS = 'CLEAR_QUERY_RESULTS';\nexport const REMOVE_DATA_PREVIEW = 'REMOVE_DATA_PREVIEW';\nexport const CHANGE_DATA_PREVIEW_ID = 'CHANGE_DATA_PREVIEW_ID';\n\nexport const START_QUERY_VALIDATION = 'START_QUERY_VALIDATION';\nexport const QUERY_VALIDATION_RETURNED = 'QUERY_VALIDATION_RETURNED';\nexport const QUERY_VALIDATION_FAILED = 'QUERY_VALIDATION_FAILED';\nexport const COST_ESTIMATE_STARTED = 'COST_ESTIMATE_STARTED';\nexport const COST_ESTIMATE_RETURNED = 'COST_ESTIMATE_RETURNED';\nexport const COST_ESTIMATE_FAILED = 'COST_ESTIMATE_FAILED';\n\nexport const CREATE_DATASOURCE_STARTED = 'CREATE_DATASOURCE_STARTED';\nexport const CREATE_DATASOURCE_SUCCESS = 'CREATE_DATASOURCE_SUCCESS';\nexport const CREATE_DATASOURCE_FAILED = 'CREATE_DATASOURCE_FAILED';\n\nexport const addInfoToast = addInfoToastAction;\nexport const addSuccessToast = addSuccessToastAction;\nexport const addDangerToast = addDangerToastAction;\nexport const addWarningToast = addWarningToastAction;\n\n// a map of SavedQuery field names to the different names used client-side,\n// because for now making the names consistent is too complicated\n// so it might as well only happen in one place\nconst queryClientMapping = {\n  id: 'remoteId',\n  db_id: 'dbId',\n  client_id: 'id',\n  label: 'title',\n};\nconst queryServerMapping = invert(queryClientMapping);\n\n// uses a mapping like those above to convert object key names to another style\nconst fieldConverter = mapping => obj =>\n  mapKeys(obj, (value, key) => (key in mapping ? mapping[key] : key));\n\nconst convertQueryToServer = fieldConverter(queryServerMapping);\nconst convertQueryToClient = fieldConverter(queryClientMapping);\n\nexport function resetState() {\n  return { type: RESET_STATE };\n}\n\nexport function startQueryValidation(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n  });\n  return { type: START_QUERY_VALIDATION, query };\n}\n\nexport function queryValidationReturned(query, results) {\n  return { type: QUERY_VALIDATION_RETURNED, query, results };\n}\n\nexport function queryValidationFailed(query, message, error) {\n  return { type: QUERY_VALIDATION_FAILED, query, message, error };\n}\n\nexport function saveQuery(query) {\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/savedqueryviewapi/api/create',\n      postPayload: convertQueryToServer(query),\n      stringify: false,\n    })\n      .then(result => {\n        dispatch({\n          type: QUERY_EDITOR_SAVED,\n          query,\n          result: convertQueryToClient(result.json.item),\n        });\n        dispatch(addSuccessToast(t('Your query was saved')));\n      })\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be saved'))),\n      );\n}\n\nexport function updateQueryEditor(alterations) {\n  return { type: UPDATE_QUERY_EDITOR, alterations };\n}\n\nexport function updateSavedQuery(query) {\n  return dispatch =>\n    SupersetClient.put({\n      endpoint: `/savedqueryviewapi/api/update/${query.remoteId}`,\n      postPayload: convertQueryToServer(query),\n      stringify: false,\n    })\n      .then(() => dispatch(addSuccessToast(t('Your query was updated'))))\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be updated'))),\n      )\n      .then(() => dispatch(updateQueryEditor(query)));\n}\n\nexport function scheduleQuery(query) {\n  return dispatch =>\n    SupersetClient.post({\n      endpoint: '/savedqueryviewapi/api/create',\n      postPayload: query,\n      stringify: false,\n    })\n      .then(() =>\n        dispatch(\n          addSuccessToast(\n            t(\n              'Your query has been scheduled. To see details of your query, navigate to Saved Queries',\n            ),\n          ),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t('Your query could not be scheduled'))),\n      );\n}\n\nexport function estimateQueryCost(query) {\n  const { dbId, schema, sql, templateParams } = query;\n  const endpoint =\n    schema === null\n      ? `/superset/estimate_query_cost/${dbId}/`\n      : `/superset/estimate_query_cost/${dbId}/${schema}/`;\n  return dispatch =>\n    Promise.all([\n      dispatch({ type: COST_ESTIMATE_STARTED, query }),\n      SupersetClient.post({\n        endpoint,\n        postPayload: {\n          sql,\n          templateParams: JSON.parse(templateParams || '{}'),\n        },\n      })\n        .then(({ json }) =>\n          dispatch({ type: COST_ESTIMATE_RETURNED, query, json }),\n        )\n        .catch(response =>\n          getClientErrorObject(response).then(error => {\n            const message =\n              error.error ||\n              error.statusText ||\n              t('Failed at retrieving results');\n            return dispatch({\n              type: COST_ESTIMATE_FAILED,\n              query,\n              error: message,\n            });\n          }),\n        ),\n    ]);\n}\n\nexport function startQuery(query) {\n  Object.assign(query, {\n    id: query.id ? query.id : shortid.generate(),\n    progress: 0,\n    startDttm: now(),\n    state: query.runAsync ? 'pending' : 'running',\n    cached: false,\n  });\n  return { type: START_QUERY, query };\n}\n\nexport function querySuccess(query, results) {\n  return function (dispatch) {\n    const sync =\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${results.query.sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_SUCCESS, query, results }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing the latest query id in the backend. ' +\n                'Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryFailed(query, msg, link) {\n  return function (dispatch) {\n    const sync =\n      !query.isDataPreview &&\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.put({\n            endpoint: encodeURI(`/tabstateview/${query.sqlEditorId}`),\n            postPayload: { latest_query_id: query.id },\n          })\n        : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_FAILED, query, msg, link }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing the latest query id in the backend. ' +\n                'Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function stopQuery(query) {\n  return { type: STOP_QUERY, query };\n}\n\nexport function clearQueryResults(query) {\n  return { type: CLEAR_QUERY_RESULTS, query };\n}\n\nexport function removeDataPreview(table) {\n  return { type: REMOVE_DATA_PREVIEW, table };\n}\n\nexport function requestQueryResults(query) {\n  return { type: REQUEST_QUERY_RESULTS, query };\n}\n\nexport function fetchQueryResults(query, displayLimit) {\n  return function (dispatch) {\n    dispatch(requestQueryResults(query));\n\n    return SupersetClient.get({\n      endpoint: `/superset/results/${query.resultsKey}/?rows=${displayLimit}`,\n      parseMethod: 'text',\n    })\n      .then(({ text = '{}' }) => {\n        const bigIntJson = JSONbig.parse(text);\n        return dispatch(querySuccess(query, bigIntJson));\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          const message =\n            error.error ||\n            error.statusText ||\n            t('Failed at retrieving results');\n\n          return dispatch(queryFailed(query, message, error.link));\n        }),\n      );\n  };\n}\n\nexport function runQuery(query) {\n  return function (dispatch) {\n    dispatch(startQuery(query));\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      runAsync: query.runAsync,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      tab: query.tab,\n      tmp_table_name: query.tempTableName,\n      select_as_cta: query.ctas,\n      templateParams: query.templateParams,\n      queryLimit: query.queryLimit,\n      expand_data: true,\n    };\n\n    return SupersetClient.post({\n      endpoint: '/superset/sql_json/',\n      body: JSON.stringify(postPayload),\n      headers: { 'Content-Type': 'application/json' },\n      parseMethod: 'text',\n    })\n      .then(({ text = '{}' }) => {\n        if (!query.runAsync) {\n          const bigIntJson = JSONbig.parse(text);\n          dispatch(querySuccess(query, bigIntJson));\n        }\n      })\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          let message = error.error || error.statusText || t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryFailed(query, message, error.link));\n        }),\n      );\n  };\n}\n\nexport function validateQuery(query) {\n  return function (dispatch) {\n    dispatch(startQueryValidation(query));\n\n    const postPayload = {\n      client_id: query.id,\n      database_id: query.dbId,\n      json: true,\n      schema: query.schema,\n      sql: query.sql,\n      sql_editor_id: query.sqlEditorId,\n      templateParams: query.templateParams,\n      validate_only: true,\n    };\n\n    return SupersetClient.post({\n      endpoint: `/superset/validate_sql_json/${window.location.search}`,\n      postPayload,\n      stringify: false,\n    })\n      .then(({ json }) => dispatch(queryValidationReturned(query, json)))\n      .catch(response =>\n        getClientErrorObject(response).then(error => {\n          let message = error.error || error.statusText || t('Unknown error');\n          if (message.includes('CSRF token')) {\n            message = t(COMMON_ERR_MESSAGES.SESSION_TIMED_OUT);\n          }\n          dispatch(queryValidationFailed(query, message, error));\n        }),\n      );\n  };\n}\n\nexport function postStopQuery(query) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/superset/stop_query/',\n      postPayload: { client_id: query.id },\n      stringify: false,\n    })\n      .then(() => dispatch(stopQuery(query)))\n      .then(() => dispatch(addSuccessToast(t('Query was stopped.'))))\n      .catch(() =>\n        dispatch(\n          addDangerToast(t('Failed at stopping query. ') + `'${query.id}'`),\n        ),\n      );\n  };\n}\n\nexport function setDatabases(databases) {\n  return { type: SET_DATABASES, databases };\n}\n\nfunction migrateTable(table, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI('/tableschemaview/'),\n    postPayload: { table: { ...table, queryEditorId } },\n  })\n    .then(({ json }) => {\n      const newTable = {\n        ...table,\n        id: json.id,\n        queryEditorId,\n      };\n      return dispatch({ type: MIGRATE_TABLE, oldTable: table, newTable });\n    })\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate table schema state to backend. Superset will retry ' +\n              'later. Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nfunction migrateQuery(queryId, queryEditorId, dispatch) {\n  return SupersetClient.post({\n    endpoint: encodeURI(`/tabstateview/${queryEditorId}/migrate_query`),\n    postPayload: { queryId },\n  })\n    .then(() => dispatch({ type: MIGRATE_QUERY, queryId, queryEditorId }))\n    .catch(() =>\n      dispatch(\n        addWarningToast(\n          t(\n            'Unable to migrate query state to backend. Superset will retry later. ' +\n              'Please contact your administrator if this problem persists.',\n          ),\n        ),\n      ),\n    );\n}\n\nexport function migrateQueryEditorFromLocalStorage(\n  queryEditor,\n  tables,\n  queries,\n) {\n  return function (dispatch) {\n    return SupersetClient.post({\n      endpoint: '/tabstateview/',\n      postPayload: { queryEditor },\n    })\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        dispatch({\n          type: MIGRATE_QUERY_EDITOR,\n          oldQueryEditor: queryEditor,\n          newQueryEditor,\n        });\n        dispatch({\n          type: MIGRATE_TAB_HISTORY,\n          oldId: queryEditor.id,\n          newId: newQueryEditor.id,\n        });\n        return Promise.all([\n          ...tables.map(table =>\n            migrateTable(table, newQueryEditor.id, dispatch),\n          ),\n          ...queries.map(query =>\n            migrateQuery(query.id, newQueryEditor.id, dispatch),\n          ),\n        ]);\n      })\n      .catch(() =>\n        dispatch(\n          addWarningToast(\n            t(\n              'Unable to migrate query editor state to backend. Superset will retry ' +\n                'later. Please contact your administrator if this problem persists.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function addQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: '/tabstateview/',\n          postPayload: { queryEditor },\n        })\n      : Promise.resolve({ json: { id: shortid.generate() } });\n\n    return sync\n      .then(({ json }) => {\n        const newQueryEditor = {\n          ...queryEditor,\n          id: json.id.toString(),\n        };\n        return dispatch({\n          type: ADD_QUERY_EDITOR,\n          queryEditor: newQueryEditor,\n        });\n      })\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'Unable to add a new tab to the backend. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function cloneQueryToNewTab(query, autorun) {\n  return function (dispatch, getState) {\n    const state = getState();\n    const { queryEditors, tabHistory } = state.sqlLab;\n    const sourceQueryEditor = queryEditors.find(\n      qe => qe.id === tabHistory[tabHistory.length - 1],\n    );\n    const queryEditor = {\n      title: t('Copy of %s', sourceQueryEditor.title),\n      dbId: query.dbId ? query.dbId : null,\n      schema: query.schema ? query.schema : null,\n      autorun,\n      sql: query.sql,\n      queryLimit: sourceQueryEditor.queryLimit,\n      maxRow: sourceQueryEditor.maxRow,\n      templateParams: sourceQueryEditor.templateParams,\n    };\n    return dispatch(addQueryEditor(queryEditor));\n  };\n}\n\nexport function setActiveQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}/activate`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: SET_ACTIVE_QUERY_EDITOR, queryEditor }))\n      .catch(response => {\n        if (response.status !== 404) {\n          return dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while setting the active tab. Please contact ' +\n                  'your administrator.',\n              ),\n            ),\n          );\n        }\n        return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n      });\n  };\n}\n\nexport function loadQueryEditor(queryEditor) {\n  return { type: LOAD_QUERY_EDITOR, queryEditor };\n}\n\nexport function setTables(tableSchemas) {\n  const tables = tableSchemas\n    .filter(tableSchema => tableSchema.description !== null)\n    .map(tableSchema => {\n      const {\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        dataPreviewQueryId,\n      } = tableSchema.description;\n      return {\n        dbId: tableSchema.database_id,\n        queryEditorId: tableSchema.tab_state_id.toString(),\n        schema: tableSchema.schema,\n        name: tableSchema.table,\n        expanded: tableSchema.expanded,\n        id: tableSchema.id,\n        dataPreviewQueryId,\n        columns,\n        selectStar,\n        primaryKey,\n        foreignKeys,\n        indexes,\n        isMetadataLoading: false,\n        isExtraMetadataLoading: false,\n      };\n    });\n  return { type: SET_TABLES, tables };\n}\n\nexport function switchQueryEditor(queryEditor, displayLimit) {\n  return function (dispatch) {\n    if (\n      isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE) &&\n      !queryEditor.loaded\n    ) {\n      SupersetClient.get({\n        endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n      })\n        .then(({ json }) => {\n          const loadedQueryEditor = {\n            id: json.id.toString(),\n            loaded: true,\n            title: json.label,\n            sql: json.sql,\n            selectedText: null,\n            latestQueryId: json.latest_query ? json.latest_query.id : null,\n            autorun: json.autorun,\n            dbId: json.database_id,\n            templateParams: json.template_params,\n            schema: json.schema,\n            queryLimit: json.query_limit,\n            validationResult: {\n              id: null,\n              errors: [],\n              completed: false,\n            },\n          };\n          dispatch(loadQueryEditor(loadedQueryEditor));\n          dispatch(setTables(json.table_schemas || []));\n          dispatch(setActiveQueryEditor(loadedQueryEditor));\n          if (json.latest_query && json.latest_query.resultsKey) {\n            dispatch(fetchQueryResults(json.latest_query, displayLimit));\n          }\n        })\n        .catch(response => {\n          if (response.status !== 404) {\n            return dispatch(\n              addDangerToast(t('An error occurred while fetching tab state')),\n            );\n          }\n          return dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor });\n        });\n    } else {\n      dispatch(setActiveQueryEditor(queryEditor));\n    }\n  };\n}\n\nexport function setActiveSouthPaneTab(tabId) {\n  return { type: SET_ACTIVE_SOUTHPANE_TAB, tabId };\n}\n\nexport function removeQueryEditor(queryEditor) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY_EDITOR, queryEditor }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing tab. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeQuery(query) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(\n            `/tabstateview/${query.sqlEditorId}/query/${query.id}`,\n          ),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_QUERY, query }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing query. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetDb(queryEditor, dbId) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { database_id: dbId },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_EDITOR_SETDB, queryEditor, dbId }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab database ID. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchema(queryEditor, schema) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { schema },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_SCHEMA, queryEditor, schema }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab schema. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSchemaOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_SCHEMA_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetTableOptions(queryEditor, options) {\n  return { type: QUERY_EDITOR_SET_TABLE_OPTIONS, queryEditor, options };\n}\n\nexport function queryEditorSetAutorun(queryEditor, autorun) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { autorun },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_AUTORUN, queryEditor, autorun }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab autorun. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTitle(queryEditor, title) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { label: title },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({ type: QUERY_EDITOR_SET_TITLE, queryEditor, title }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab title. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSql(queryEditor, sql) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { sql },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: QUERY_EDITOR_SET_SQL, queryEditor, sql }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while storing your query in the backend. To ' +\n                'avoid losing your changes, please save your query using the ' +\n                '\"Save Query\" button.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetQueryLimit(queryEditor, queryLimit) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { query_limit: queryLimit },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_QUERY_LIMIT,\n          queryEditor,\n          queryLimit,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab title. Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetTemplateParams(queryEditor, templateParams) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.put({\n          endpoint: encodeURI(`/tabstateview/${queryEditor.id}`),\n          postPayload: { template_params: templateParams },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() =>\n        dispatch({\n          type: QUERY_EDITOR_SET_TEMPLATE_PARAMS,\n          queryEditor,\n          templateParams,\n        }),\n      )\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while setting the tab template parameters. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function queryEditorSetSelectedText(queryEditor, sql) {\n  return { type: QUERY_EDITOR_SET_SELECTED_TEXT, queryEditor, sql };\n}\n\nexport function mergeTable(table, query) {\n  return { type: MERGE_TABLE, table, query };\n}\n\nfunction getTableMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/api/v1/database/${query.dbId}/table/` +\n        `${encodeURIComponent(table.name)}/${encodeURIComponent(\n          table.schema,\n        )}/`,\n    ),\n  })\n    .then(({ json }) => {\n      const dataPreviewQuery = {\n        id: shortid.generate(),\n        dbId: query.dbId,\n        sql: json.selectStar,\n        tableName: table.name,\n        sqlEditorId: null,\n        tab: '',\n        runAsync: false,\n        ctas: false,\n        isDataPreview: true,\n      };\n      const newTable = {\n        ...table,\n        ...json,\n        expanded: true,\n        isMetadataLoading: false,\n        dataPreviewQueryId: dataPreviewQuery.id,\n      };\n      Promise.all([\n        dispatch(mergeTable(newTable, dataPreviewQuery)), // Merge table to tables in state\n        dispatch(runQuery(dataPreviewQuery)), // Run query to get preview data for table\n      ]);\n      return newTable;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(\n          mergeTable({\n            ...table,\n            isMetadataLoading: false,\n          }),\n        ),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nfunction getTableExtendedMetadata(table, query, dispatch) {\n  return SupersetClient.get({\n    endpoint: encodeURI(\n      `/superset/extra_table_metadata/${query.dbId}/` +\n        `${encodeURIComponent(table.name)}/${encodeURIComponent(\n          table.schema,\n        )}/`,\n    ),\n  })\n    .then(({ json }) => {\n      dispatch(\n        mergeTable({ ...table, ...json, isExtraMetadataLoading: false }),\n      );\n      return json;\n    })\n    .catch(() =>\n      Promise.all([\n        dispatch(mergeTable({ ...table, isExtraMetadataLoading: false })),\n        dispatch(\n          addDangerToast(t('An error occurred while fetching table metadata')),\n        ),\n      ]),\n    );\n}\n\nexport function addTable(query, tableName, schemaName) {\n  return function (dispatch) {\n    const table = {\n      dbId: query.dbId,\n      queryEditorId: query.id,\n      schema: schemaName,\n      name: tableName,\n    };\n    dispatch(\n      mergeTable({\n        ...table,\n        isMetadataLoading: true,\n        isExtraMetadataLoading: true,\n        expanded: false,\n      }),\n    );\n\n    return Promise.all([\n      getTableMetadata(table, query, dispatch),\n      getTableExtendedMetadata(table, query, dispatch),\n    ]).then(([newTable, json]) => {\n      const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n        ? SupersetClient.post({\n            endpoint: encodeURI('/tableschemaview/'),\n            postPayload: { table: { ...newTable, ...json } },\n          })\n        : Promise.resolve({ json: { id: shortid.generate() } });\n\n      return sync\n        .then(({ json: resultJson }) =>\n          dispatch(mergeTable({ ...table, id: resultJson.id })),\n        )\n        .catch(() =>\n          dispatch(\n            addDangerToast(\n              t(\n                'An error occurred while fetching table metadata. ' +\n                  'Please contact your administrator.',\n              ),\n            ),\n          ),\n        );\n    });\n  };\n}\n\nexport function changeDataPreviewId(oldQueryId, newQuery) {\n  return { type: CHANGE_DATA_PREVIEW_ID, oldQueryId, newQuery };\n}\n\nexport function reFetchQueryResults(query) {\n  return function (dispatch) {\n    const newQuery = {\n      id: shortid.generate(),\n      dbId: query.dbId,\n      sql: query.sql,\n      tableName: query.tableName,\n      sqlEditorId: null,\n      tab: '',\n      runAsync: false,\n      ctas: false,\n      queryLimit: query.queryLimit,\n      isDataPreview: query.isDataPreview,\n    };\n    dispatch(runQuery(newQuery));\n    dispatch(changeDataPreviewId(query.id, newQuery));\n  };\n}\n\nexport function expandTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: true },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: EXPAND_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while expanding the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function collapseTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.post({\n          endpoint: encodeURI(`/tableschemaview/${table.id}/expanded`),\n          postPayload: { expanded: false },\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: COLLAPSE_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while collapsing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function removeTable(table) {\n  return function (dispatch) {\n    const sync = isFeatureEnabled(FeatureFlag.SQLLAB_BACKEND_PERSISTENCE)\n      ? SupersetClient.delete({\n          endpoint: encodeURI(`/tableschemaview/${table.id}`),\n        })\n      : Promise.resolve();\n\n    return sync\n      .then(() => dispatch({ type: REMOVE_TABLE, table }))\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'An error occurred while removing the table schema. ' +\n                'Please contact your administrator.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nexport function refreshQueries(alteredQueries) {\n  return { type: REFRESH_QUERIES, alteredQueries };\n}\n\nexport function setUserOffline(offline) {\n  return { type: SET_USER_OFFLINE, offline };\n}\n\nexport function persistEditorHeight(queryEditor, northPercent, southPercent) {\n  return {\n    type: QUERY_EDITOR_PERSIST_HEIGHT,\n    queryEditor,\n    northPercent,\n    southPercent,\n  };\n}\n\nexport function popStoredQuery(urlId) {\n  return function (dispatch) {\n    return SupersetClient.get({ endpoint: `/kv/${urlId}` })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            title: json.title ? json.title : t('Sjsonhared query'),\n            dbId: json.dbId ? parseInt(json.dbId, 10) : null,\n            schema: json.schema ? json.schema : null,\n            autorun: json.autorun ? json.autorun : false,\n            sql: json.sql ? json.sql : 'SELECT ...',\n          }),\n        ),\n      )\n      .catch(() => dispatch(addDangerToast(t(\"The query couldn't be loaded\"))));\n  };\n}\nexport function popSavedQuery(saveQueryId) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/savedqueryviewapi/api/get/${saveQueryId}`,\n    })\n      .then(({ json }) => {\n        const queryEditorProps = {\n          ...convertQueryToClient(json.result),\n          autorun: false,\n        };\n        return dispatch(addQueryEditor(queryEditorProps));\n      })\n      .catch(() => dispatch(addDangerToast(t(\"The query couldn't be loaded\"))));\n  };\n}\nexport function popDatasourceQuery(datasourceKey, sql) {\n  return function (dispatch) {\n    return SupersetClient.get({\n      endpoint: `/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,\n    })\n      .then(({ json }) =>\n        dispatch(\n          addQueryEditor({\n            title: 'Query ' + json.name,\n            dbId: json.database.id,\n            schema: json.schema,\n            autorun: sql !== undefined,\n            sql: sql || json.select_star,\n          }),\n        ),\n      )\n      .catch(() =>\n        dispatch(addDangerToast(t(\"The datasource couldn't be loaded\"))),\n      );\n  };\n}\nexport function createDatasourceStarted() {\n  return { type: CREATE_DATASOURCE_STARTED };\n}\nexport function createDatasourceSuccess(data) {\n  const datasource = `${data.table_id}__table`;\n  return { type: CREATE_DATASOURCE_SUCCESS, datasource };\n}\nexport function createDatasourceFailed(err) {\n  return { type: CREATE_DATASOURCE_FAILED, err };\n}\n\nexport function createDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/sqllab_viz/',\n      postPayload: { data: vizOptions },\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json));\n\n        return Promise.resolve(json);\n      })\n      .catch(() => {\n        dispatch(\n          createDatasourceFailed(\n            t('An error occurred while creating the data source'),\n          ),\n        );\n\n        return Promise.reject();\n      });\n  };\n}\n\nexport function createCtasDatasource(vizOptions) {\n  return dispatch => {\n    dispatch(createDatasourceStarted());\n    return SupersetClient.post({\n      endpoint: '/superset/get_or_create_table/',\n      postPayload: { data: vizOptions },\n    })\n      .then(({ json }) => {\n        dispatch(createDatasourceSuccess(json));\n\n        return json;\n      })\n      .catch(() => {\n        const errorMsg = t('An error occurred while creating the data source');\n        dispatch(createDatasourceFailed(errorMsg));\n        return Promise.reject(new Error(errorMsg));\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}