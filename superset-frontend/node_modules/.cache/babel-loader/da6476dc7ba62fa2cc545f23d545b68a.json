{"ast":null,"code":"import _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";import _forEachInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _Object$assign from \"@babel/runtime-corejs3/core-js-stable/object/assign\";import _reduceInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/reduce\";import _extends from \"@babel/runtime-corejs3/helpers/extends\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * Licensed to the Apache Software Foundation (ASF) under one\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * or more contributor license agreements.  See the NOTICE file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * distributed with this work for additional information\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * regarding copyright ownership.  The ASF licenses this file\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * to you under the Apache License, Version 2.0 (the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * \"License\"); you may not use this file except in compliance\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * with the License.  You may obtain a copy of the License at\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         *   http://www.apache.org/licenses/LICENSE-2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * Unless required by applicable law or agreed to in writing,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * software distributed under the License is distributed on an\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * KIND, either express or implied.  See the License for the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * specific language governing permissions and limitations\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * under the License.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         */\nimport { t } from '@superset-ui/translation';\nimport React from 'react';\nimport { Col, DropdownButton, MenuItem, Row } from 'react-bootstrap';\nimport IndeterminateCheckbox from '../IndeterminateCheckbox';\nimport TableCollection from './TableCollection';\nimport Pagination from './Pagination';\nimport { FilterMenu, FilterInputs } from './LegacyFilters';\nimport FilterControls from './Filters';\nimport { ListViewError, useListViewState } from './utils';\nimport './ListViewStyles.less';import { jsx as ___EmotionJSX } from \"@emotion/core\";\nconst bulkSelectColumnConfig = {\n  Cell: ({ row }) => ___EmotionJSX(IndeterminateCheckbox, _extends({}, row.getToggleRowSelectedProps(), { id: row.id })),\n  Header: ({ getToggleAllRowsSelectedProps }) => ___EmotionJSX(IndeterminateCheckbox, _extends({}, getToggleAllRowsSelectedProps(), { id: 'header-toggle-all' })),\n  id: 'selection' };\n\nconst ListView = ({ columns, data, count, pageSize: initialPageSize, fetchData, loading, initialSort = [], className = '', title = '', filters = [], bulkActions = [], useNewUIFilters = false }) => {\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow, pageCount = 1, gotoPage, removeFilterAndApply, setInternalFilters, updateInternalFilter, applyFilterValue, applyFilters, filtersApplied, selectedFlatRows, state: { pageIndex, pageSize, internalFilters } } = useListViewState({\n    bulkSelectColumnConfig,\n    bulkSelectMode: Boolean(bulkActions.length),\n    columns,\n    count,\n    data,\n    fetchData,\n    initialPageSize,\n    initialSort,\n    initialFilters: useNewUIFilters ? filters : [] });\n\n  const filterable = Boolean(filters.length);\n  if (filterable) {\n    const columnAccessors = _reduceInstanceProperty(columns).call(columns, (acc, col) => _Object$assign({}, acc, { [col.accessor || col.id]: true }), {});\n    _forEachInstanceProperty(filters).call(filters, f => {\n      if (!columnAccessors[f.id]) {\n        throw new ListViewError(\"Invalid filter config, \" + f.id + \" is not present in columns\");\n      }\n    });\n  }\n  return ___EmotionJSX(\"div\", { className: \"superset-list-view \" + className },\n  ___EmotionJSX(\"div\", { className: \"header\" },\n  !useNewUIFilters && ___EmotionJSX(React.Fragment, null,\n  title && filterable && ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { md: 11 },\n  ___EmotionJSX(\"h2\", null, t(title))),\n\n  filterable && ___EmotionJSX(Col, { md: 1 },\n  ___EmotionJSX(FilterMenu, { filters: filters, internalFilters: internalFilters, setInternalFilters: setInternalFilters }))),\n\n\n  ___EmotionJSX(\"hr\", null),\n  ___EmotionJSX(FilterInputs, { internalFilters: internalFilters, filters: filters, updateInternalFilter: updateInternalFilter, removeFilterAndApply: removeFilterAndApply, filtersApplied: filtersApplied, applyFilters: applyFilters }))),\n\n\n  useNewUIFilters && ___EmotionJSX(React.Fragment, null,\n  ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { md: 10 },\n  ___EmotionJSX(\"h2\", null, t(title)))),\n\n\n  ___EmotionJSX(\"hr\", null),\n  ___EmotionJSX(FilterControls, { filters: filters, internalFilters: internalFilters, updateFilterValue: applyFilterValue }))),\n\n\n  ___EmotionJSX(\"div\", { className: \"body\" },\n  ___EmotionJSX(TableCollection, { getTableProps: getTableProps, getTableBodyProps: getTableBodyProps, prepareRow: prepareRow, headerGroups: headerGroups, rows: rows, loading: loading })),\n\n  ___EmotionJSX(\"div\", { className: \"footer\" },\n  ___EmotionJSX(Row, null,\n  ___EmotionJSX(Col, { md: 2 },\n  ___EmotionJSX(\"div\", { className: \"form-actions-container\" },\n  ___EmotionJSX(\"div\", { className: \"btn-group\" },\n  bulkActions.length > 0 && ___EmotionJSX(DropdownButton, { id: \"bulk-actions\", bsSize: \"small\", bsStyle: \"default\", noCaret: true, title: ___EmotionJSX(React.Fragment, null,\n    t('Actions'), \" \", ___EmotionJSX(\"span\", { className: \"caret\" })) },\n\n  _mapInstanceProperty(bulkActions).call(bulkActions, (action) =>\n  // @ts-ignore\n  ___EmotionJSX(MenuItem, { key: action.key, eventKey: selectedFlatRows\n    // @ts-ignore\n    , onSelect: selectedRows => {\n      action.onSelect(_mapInstanceProperty(selectedRows).call(selectedRows, r => r.original));\n    } },\n  action.name)))))),\n\n\n\n\n\n  ___EmotionJSX(Col, { md: 8, className: \"text-center\" },\n  ___EmotionJSX(Pagination, { totalPages: pageCount || 0, currentPage: pageCount ? pageIndex + 1 : 0, onChange: p => gotoPage(p - 1), hideFirstAndLastPageLinks: true })),\n\n  ___EmotionJSX(Col, { md: 2 },\n  ___EmotionJSX(\"span\", { className: \"pull-right\" },\n  t('showing'), ' ',\n  ___EmotionJSX(\"strong\", null,\n  pageSize * pageIndex + (rows.length && 1), \"-\",\n  pageSize * pageIndex + rows.length),\n  ' ',\n  t('of'), \" \", ___EmotionJSX(\"strong\", null, count))))));\n\n\n\n\n\n};__signature__(ListView, \"useListViewState{{ getTableProps, getTableBodyProps, headerGroups, rows, prepareRow, pageCount = 1, gotoPage, removeFilterAndApply, setInternalFilters, updateInternalFilter, applyFilterValue, applyFilters, filtersApplied, selectedFlatRows, state: { pageIndex, pageSize, internalFilters }, }}\", () => [useListViewState]);const _default =\nListView;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(bulkSelectColumnConfig, \"bulkSelectColumnConfig\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/ListView.tsx\");reactHotLoader.register(ListView, \"ListView\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/ListView.tsx\");reactHotLoader.register(_default, \"default\", \"/home/tiago/git-facilit/incubator-superset/superset-frontend/src/components/ListView/ListView.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":null,"metadata":{},"sourceType":"module"}